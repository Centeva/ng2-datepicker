!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("moment"),require("jquery"));else if("function"==typeof define&&define.amd)define(["@angular/core","@angular/common","@angular/forms","moment","jquery"],t);else{var n="object"==typeof exports?t(require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("moment"),require("jquery")):t(e["@angular/core"],e["@angular/common"],e["@angular/forms"],e.moment,e.jquery);for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(e,t,n,a,o){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="/",__webpack_require__(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),a=e[t[0]];return function(e,t,o){a.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";var a=n(1);t.DatePickerModule=a.DatePickerModule},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(3),d=n(4),c=n(5),l=n(18),s=n(7),p=n(9),h=function(){function DatePickerModule(){}return DatePickerModule=a([r.NgModule({exports:[c.DatePickerComponent,l.DualPickerComponent],declarations:[c.DatePickerComponent,l.DualPickerComponent,s.CalendarComponent,p.CalendarGridComponent],imports:[i.CommonModule,d.FormsModule]}),o("design:paramtypes",[])],DatePickerModule)}();t.DatePickerModule=h},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(2),d=n(6),c=n(7),l=n(8),s=n(10),p=n(4),h=n(14);!function(e){e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden"}(t.DatePickerMode||(t.DatePickerMode={}));var u=t.DatePickerMode,m=function(e){function DatePickerComponent(t,n){var a=this;e.call(this),this.myElement=t,this.renderer=n,this.CalendarMode=l.CalendarMode,this.DatePickerMode=u,this.dateChange=new i.EventEmitter,this.mode=u.Hidden,this.dateClickListener=function(e){var t=d(e);return function(){a.setDate(t)}},this.monthChangeListener=function(){a.changeMode(l.CalendarMode.Calendar)},this.yearChangeListener=function(){a.changeMode(l.CalendarMode.Calendar)}}return a(DatePickerComponent,e),Object.defineProperty(DatePickerComponent.prototype,"date",{get:function(){return this.dateValue},set:function(e){e instanceof d&&e.isValid()&&(this.input.nativeElement.value=e.format("MM/DD/YYYY"),this.dateValue=e,this.dateChange.emit(e)),this.propagateChange(e)},enumerable:!0,configurable:!0}),Object.defineProperty(DatePickerComponent.prototype,"match",{get:function(){return this.validDateExpression||/^((0?[13578]|10|12)(-|\/)(([1-9])|(0[1-9])|([12])([0-9]?)|(3[01]?))(-|\/)((19)([2-9])(\d{1})|(20)([01])(\d{1})|([8901])(\d{1}))|(0?[2469]|11)(-|\/)(([1-9])|(0[1-9])|([12])([0-9]?)|(3[0]?))(-|\/)((19)([2-9])(\d{1})|(20)([01])(\d{1})|([8901])(\d{1})))$/},set:function(e){this.validDateExpression=new RegExp(e)},enumerable:!0,configurable:!0}),DatePickerComponent.prototype.onDateStringChange=function(e){if(this.match.test(e)){var t=d(new Date(e));void 0===this.dateValue?this.dateValue=t:this.dateValue.set(t.toObject()),this.dateChange.emit(this.dateValue),t.isValid()?this.cal.date=this.dateValue:this.cal.date=d(),this.touched(),this.propagateChange(e),this.renderCalendar()}},DatePickerComponent.prototype.changeGlobalMode=function(e){switch(this.mode=e,this.mode){case u.Visible:this.changeMode(l.CalendarMode.Calendar),s(this.myElement.nativeElement).addClass("ct-dp-active");break;case u.Hidden:s(this.myElement.nativeElement).removeClass("ct-dp-active")}},DatePickerComponent.prototype.touched=function(){this.propagateTouched(this.date)},DatePickerComponent.prototype.changeMode=function(e){switch(this.cal.changeMode(e),e){case l.CalendarMode.Calendar:this.renderCalendar()}},DatePickerComponent.prototype.goPrev=function(){this.cal.mode==l.CalendarMode.Calendar?(this.cal.date.month(this.cal.date.month()-1),this.renderCalendar()):this.cal.goPrev()},DatePickerComponent.prototype.goNext=function(){this.cal.mode==l.CalendarMode.Calendar?(this.cal.date.month(this.cal.date.month()+1),this.renderCalendar()):this.cal.goNext()},DatePickerComponent.prototype.closePicker=function(e){9===e.which&&this.changeGlobalMode(u.Hidden)},DatePickerComponent.prototype.ngOnInit=function(){this.date instanceof d&&this.date.isValid()?this.cal.date=d(this.date):this.cal.date=d(),this.cal.subscribeToChangeMonth(this.monthChangeListener),this.cal.subscribeToChangeYear(this.yearChangeListener)},DatePickerComponent.prototype.ngOnChanges=function(e){},DatePickerComponent.prototype.ngAfterViewInit=function(){var e=this;this.renderCalendar(),this.input.nativeElement.style["z-index"]=this.zIndexVal,this.input.nativeElement.addEventListener("focus",function(){e.changeGlobalMode(u.Visible)}),this.input.nativeElement.addEventListener("keyup",function(t){e.onDateStringChange(e.input.nativeElement.value)}),this.input.nativeElement.addEventListener("keydown",function(t){e.closePicker(t)})},DatePickerComponent.prototype.setDate=function(e){switch(this.mode){case u.Visible:this.touched(),this.date=e,this.changeGlobalMode(u.Hidden)}this.renderCalendar()},DatePickerComponent.prototype.ngOnDestroy=function(){},DatePickerComponent.prototype.renderCalendar=function(){this.cal.renderCalendar(this.dateClickListener,this.date,this.date,this.minDateVal,this.maxDateVal)},DatePickerComponent.prototype.writeValue=function(e){e&&(this.date=e)},DatePickerComponent.prototype.validate=function(e){return e.value instanceof d&&e.value.isValid()?this.minDateVal&&this.minDateVal.isAfter(e.value)?"Date cannot be before "+this.minDateVal.format("mm/DD/yyyy"):this.maxDateVal&&this.maxDateVal.isBefore(e.value)?"Date cannot be after "+this.maxDateVal.format("mm/DD/yyyy"):null:"Invalid Date"},o([i.Output(),r("design:type",Object)],DatePickerComponent.prototype,"dateChange",void 0),o([i.Input(),r("design:type",Object)],DatePickerComponent.prototype,"date",null),o([i.Input(),r("design:type",Object)],DatePickerComponent.prototype,"match",null),o([i.ContentChild("date"),r("design:type","function"==typeof(t="undefined"!=typeof i.ElementRef&&i.ElementRef)&&t||Object)],DatePickerComponent.prototype,"input",void 0),o([i.ViewChild(c.CalendarComponent),r("design:type","function"==typeof(h="undefined"!=typeof c.CalendarComponent&&c.CalendarComponent)&&h||Object)],DatePickerComponent.prototype,"cal",void 0),DatePickerComponent=o([i.Component({selector:"ct-date-picker",template:n(15),styles:[n(16),n(17)],encapsulation:i.ViewEncapsulation.None,providers:[{provide:p.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return DatePickerComponent}),multi:!0},{provide:p.NG_VALIDATORS,useExisting:i.forwardRef(function(){return DatePickerComponent}),multi:!0}]}),r("design:paramtypes",["function"==typeof(m="undefined"!=typeof i.ElementRef&&i.ElementRef)&&m||Object,"function"==typeof(f="undefined"!=typeof i.Renderer&&i.Renderer)&&f||Object])],DatePickerComponent);var t,h,m,f}(h.DatePickerBase);t.DatePickerComponent=m},function(e,t){e.exports=a},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(8),c=n(9),l=function(){function CalendarComponent(){this.CalendarMode=d.CalendarMode,this.mode=d.CalendarMode.Calendar,this.months=[],this.years=[],this.monthListeners=[],this.yearListeners=[],this.generateMonthData()}return Object.defineProperty(CalendarComponent.prototype,"yearData",{get:function(){return this.years},enumerable:!0,configurable:!0}),CalendarComponent.prototype.ngOnInit=function(){},CalendarComponent.prototype.ngOnDestroy=function(){},CalendarComponent.prototype.subscribeToChangeMonth=function(e){this.monthListeners.push(e)},CalendarComponent.prototype.subscribeToChangeYear=function(e){this.yearListeners.push(e)},CalendarComponent.prototype.changeMode=function(e){switch(this.mode=e,e){case d.CalendarMode.Year:this.generateYearData(this.date.year())}},CalendarComponent.prototype.generateMonthData=function(){var e=i(new Date);e.month(0);var t=i(new Date);for(t.month(0);e.year()===t.year();)this.months.push(t.format("MMM")),t.month(t.month()+1)},CalendarComponent.prototype.generateYearData=function(e){this.years=[];for(var t=e-CalendarComponent.halfNumYearsShown,n=0;n<CalendarComponent.numYearsShown;n++)this.years.push(t+n)},CalendarComponent.prototype.goPrev=function(){switch(this.mode){case d.CalendarMode.Calendar:break;case d.CalendarMode.Month:break;case d.CalendarMode.Year:this.generateYearData(this.years[CalendarComponent.halfNumYearsShown]-CalendarComponent.numYearsShown)}},CalendarComponent.prototype.goNext=function(){switch(this.mode){case d.CalendarMode.Calendar:break;case d.CalendarMode.Month:break;case d.CalendarMode.Year:this.generateYearData(this.years[CalendarComponent.halfNumYearsShown]+CalendarComponent.numYearsShown)}},CalendarComponent.prototype.renderCalendar=function(e,t,n,a,o){this.grid.renderCalendar(this.date,e,t,n,a,o)},CalendarComponent.prototype.setMonth=function(e){this.date.month(e);for(var t=0,n=this.monthListeners;t<n.length;t++){var a=n[t];a()}},CalendarComponent.prototype.setYear=function(e){this.date.year(e);for(var t=0,n=this.yearListeners;t<n.length;t++){var a=n[t];a()}},CalendarComponent.numYearsShown=15,CalendarComponent.halfNumYearsShown=Math.floor(CalendarComponent.numYearsShown/2),a([r.ViewChild(c.CalendarGridComponent),o("design:type","function"==typeof(e="undefined"!=typeof c.CalendarGridComponent&&c.CalendarGridComponent)&&e||Object)],CalendarComponent.prototype,"grid",void 0),CalendarComponent=a([r.Component({selector:"ct-calendar",template:n(12),styles:[n(13)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",[])],CalendarComponent);var e}();t.CalendarComponent=l},function(e,t){"use strict";!function(e){e[e.Calendar=0]="Calendar",e[e.Month=1]="Month",e[e.Year=2]="Year"}(t.CalendarMode||(t.CalendarMode={}));t.CalendarMode},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(10),c=function(){function CalendarGridComponent(e,t){this.myElement=e,this.renderer=t,this.today=i()}return CalendarGridComponent.prototype.ngOnInit=function(){},CalendarGridComponent.prototype.ngOnDestroy=function(){},CalendarGridComponent.prototype.renderCalendar=function(e,t,n,a,o,r){var c=i(e);c.date(1);for(var l=d("<div class='ct-dp-cal-header'></div>"),s=0;s<7;s++){c.day(s);var p=d("<div></div>");p.text(c.format("dd")),p.attr("ct-cal-dp-day",s.toString()),p.addClass("ct-dp-cal-day"),l.append(p)}c.date(1);for(var h=d("<div class='ct-dp-cal-body'></div>"),s=0;s<c.day();s++){var p=d("<div></div>");p.attr("ct-dp-cal-day",s.toString()),p.addClass("ct-dp-cal-day"),h.append(p)}for(;c.month()===e.month();){var p=d("<button></button>");p.text(c.date().toString()),p.attr("ct-dp-cal-day",c.date().toString()),p.attr("tabIndex","-1"),p.addClass("ct-dp-cal-day"),this.today.date()===c.date()&&this.today.month()===c.month()&&p.addClass("today"),(n&&c.isSame(n,"day")||a&&c.isSame(a,"day"))&&p.addClass("active"),a&&n&&c.isBetween(a,n)&&p.addClass("between"),(r&&o&&c.isBefore(o)||c.isAfter(r))&&p.attr("disabled","disabled"),p.click(t(c)),c.date(c.date()+1),h.append(p)}d(this.myElement.nativeElement).empty(),l.appendTo(this.myElement.nativeElement),h.appendTo(this.myElement.nativeElement)},CalendarGridComponent.prototype.renderCalendarRenderer=function(e,t,n,a){var o=i(e.date);o.date(1),this.renderer.selectRootElement(this.myElement.nativeElement);var r=this.renderer.createElement(this.myElement.nativeElement,"div");this.renderer.setElementClass(r,".ct-dp-cal-header",!0);var d=this.renderer.createElement(this.myElement.nativeElement,"div");this.renderer.setElementClass(r,".ct-dp-cal-body",!0);for(var c=0;c<7;c++){o.day(c);var l=this.renderer.createElement(r,"div");this.renderer.setText(l,o.format("dd")),this.renderer.setElementAttribute(l,"ct-cal-dp-day",c.toString()),this.renderer.setElementClass(l,"ct-dp-cal-day",!0)}o.date(1);for(var c=0;c<o.day();c++){var l=this.renderer.createElement(d,"div");this.renderer.setElementAttribute(l,"ct-dp-cal-day",c.toString()),this.renderer.setElementClass(l,"ct-dp-cal-day",!0)}for(;o.month()===e.date.month();){var l=this.renderer.createElement(d,"button");this.renderer.setText(l,o.date().toString()),this.renderer.setElementAttribute(l,"ct-dp-cal-day",o.date().toString()),this.renderer.setElementAttribute(l,"tabindex","-1"),this.renderer.setElementClass(l,"ct-dp-cal-day",!0),(n&&o.isSame(n,"day")||a&&o.isSame(a,"day"))&&this.renderer.setElementClass(l,"active",!0),a&&n&&o.isBetween(a,n)&&this.renderer.setElementClass(l,"between",!0),this.renderer.listen(l,"click",t(o)),o.date(o.date()+1)}},CalendarGridComponent=a([r.Component({selector:"ct-calendar-grid",template:"",styles:[n(11)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.ElementRef&&r.ElementRef)&&e||Object,"function"==typeof(t="undefined"!=typeof r.Renderer&&r.Renderer)&&t||Object])],CalendarGridComponent);var e,t}();t.CalendarGridComponent=c},function(e,t){e.exports=o},function(e,t){e.exports=".today{font-weight:700}"},function(e,t){e.exports='<div class="ct-dp-cal" [ngClass]="{\'hidden\': mode != CalendarMode.Calendar}">\r\n    <ct-calendar-grid></ct-calendar-grid>\r\n</div>\r\n<div class="ct-dp-months" [ngClass]="{\'hidden\': mode != CalendarMode.Month}">\r\n    <template ngFor let-item [ngForOf]="months" [ngForTrackBy]="myTrackBy" let-i="index"><!--\r\n        --><button tabindex="-1" class="ct-dp-btn ct-dp-month" (click)="setMonth(i)">{{item}}</button>\r\n    </template>\r\n</div>\r\n<div class="ct-dp-years" [ngClass]="{\'hidden\': mode != CalendarMode.Year}">\r\n    <template ngFor let-item [ngForOf]="years" [ngForTrackBy]="myTrackBy" let-i="index"><!--\r\n        --><button tabindex="-1" class="ct-dp-btn ct-dp-year" (click)="setYear(item)">{{item}}</button>\r\n    </template>\r\n</div>'},function(e,t){e.exports=""},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(8),c=function(){function DatePickerBase(){this.CalendarMode=d.CalendarMode,this.propagateChange=function(){},this.propagateTouched=function(){},this.validateFn=function(){},this.shadowZIndex=100,this.zIndexVal=101,this.minDateVal=null,this.maxDateVal=null}return Object.defineProperty(DatePickerBase.prototype,"zIndex",{set:function(e){this.shadowZIndex=e,this.zIndexVal=e+1},enumerable:!0,configurable:!0}),Object.defineProperty(DatePickerBase.prototype,"minDate",{set:function(e){var t=i(e);t.isValid()?this.minDateVal=i(e):this.minDateVal=null},enumerable:!0,configurable:!0}),Object.defineProperty(DatePickerBase.prototype,"maxDate",{set:function(e){var t=i(e);t.isValid()?this.maxDateVal=i(e):this.maxDateVal=null},enumerable:!0,configurable:!0}),DatePickerBase.prototype.registerOnChange=function(e){this.propagateChange=e},DatePickerBase.prototype.registerOnTouched=function(e){this.propagateTouched=e},a([r.Input("zIndex"),o("design:type",Number),o("design:paramtypes",[Number])],DatePickerBase.prototype,"zIndex",null),a([r.Input("minDate"),o("design:type",Object),o("design:paramtypes",[Object])],DatePickerBase.prototype,"minDate",null),a([r.Input("maxDate"),o("design:type",Object),o("design:paramtypes",[Object])],DatePickerBase.prototype,"maxDate",null),DatePickerBase}();t.DatePickerBase=c},function(e,t){e.exports='<ng-content></ng-content>\r\n<div class="ct-dp-shadow-box" (click)="changeGlobalMode(DatePickerMode.Hidden)" *ngIf="mode != DatePickerMode.Hidden" [style.z-index]="shadowZIndex">\r\n</div>\r\n<div class="ct-dp-picker" [class.hidden]="mode == DatePickerMode.Hidden" [style.z-index]="zIndexVal">\r\n    <div class="ct-dp-caret-1"></div>\r\n    <div class="ct-dp-caret-2"></div>\r\n    <div class="ct-dp-header"><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-prev  ct-dp-btn" (click)="goPrev()" [disabled]="cal.mode == CalendarMode.Month">&lt;</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-month ct-dp-btn" (click)="changeMode(CalendarMode.Month)">{{cal.date.format("MMMM")}}</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-year  ct-dp-btn" (click)="changeMode(CalendarMode.Year)">{{cal.date.format("YYYY")}}</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-next  ct-dp-btn" (click)="goNext()" [disabled]="cal.mode == CalendarMode.Month">&gt;</button>\r\n    </div>\r\n    <ct-calendar></ct-calendar>\r\n</div>'},13,function(e,t){e.exports='.ct-dp-active input{position:relative}.ct-dp-shadow-box{position:fixed;top:0;right:0;bottom:0;left:0;background-color:transparent}.ct-dp-picker{width:220px;border:1px solid #808080;box-sizing:content-box;position:absolute;background-color:white;margin-top:14px;transition:.5s}.ct-dp-picker.ct-dp-dualpicker{width:440px}.ct-dp-picker.ct-dp-picker-to{margin-left:15px}.ct-dp-caret-2,.ct-dp-caret-1{bottom:100%;left:10%;border:solid transparent;height:0;width:0;position:absolute;pointer-events:none;transition:.5s}.ct-dp-caret-2{border-color:rgba(136,183,213,0);border-bottom-color:white;border-width:14px;margin-left:-14px}.ct-dp-caret-1{border-color:rgba(194,225,245,0);border-bottom-color:#808080;border-width:16px;margin-left:-16px}.ct-dp-header{border-bottom:1px solid #808080}.ct-dp-cal{padding:5px;width:220px;float:left}.ct-dp-cal-inactive{visibility:hidden}.ct-dp-cal-header{color:#808080}.ct-dp-cal-day{width:30px;height:30px;float:left;text-align:center}.ct-dp-cal-day:disabled{color:#bfbfbf}.ct-dp-cal-day.active{background-color:lightblue}.ct-dp-cal-day.between{background-color:lightgray}.ct-dp-months,.ct-dp-years{width:220px;float:left;padding:5px}.ct-dp-month,.ct-dp-year{width:33.33%;float:left;text-align:center}.ct-dp-btn{padding:4px;background-color:white;border:none}.ct-dp-btn:hover{background-color:#999}.ct-dp-btn[disabled]:hover{background-color:white}.ct-dp-btn[disabled]{color:white}.ct-dp-picker .ct-dp-btn-prev,.ct-dp-picker .ct-dp-btn-next{width:10%}.ct-dp-picker .ct-dp-btn-month{width:50%;font-weight:500}.ct-dp-picker .ct-dp-btn-year{width:30%;font-weight:500}.ct-dp-picker.ct-dp-dualpicker .ct-dp-btn-prev,.ct-dp-picker.ct-dp-dualpicker .ct-dp-btn-next{width:5%}.ct-dp-picker.ct-dp-dualpicker .ct-dp-btn-month{width:25%}.ct-dp-picker.ct-dp-dualpicker .ct-dp-btn-year{width:15%}.clearfix,.ct-dp-cal:after,.ct-dp-months:after,.ct-dp-years:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.no-button,.ct-dp-cal-day{background:transparent;border:none !important}.pull-right{float:right}.hidden{display:none !important}'},function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},o=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(2),d=n(6),c=n(10),l=n(7),s=n(8),p=n(4),h=n(14);!function(e){e[e.To=0]="To",e[e.From=1]="From",e[e.Hidden=2]="Hidden"}(t.DualPickerMode||(t.DualPickerMode={}));var u=t.DualPickerMode,m=function(e){function DualPickerComponent(t){var n=this;e.call(this),this.myElement=t,this.CalendarMode=s.CalendarMode,this.DualPickerMode=u,this.today=d(),this.dateFromChange=new i.EventEmitter,this.dateToChange=new i.EventEmitter,this.mode=u.Hidden,this.timerId=null,this.month1ChangeListener=function(){n.shiftCal2(),n.changeMode(s.CalendarMode.Calendar,n.cal1),n.changeMode(s.CalendarMode.Calendar,n.cal2)},this.month2ChangeListener=function(){n.shiftCal1(),n.changeMode(s.CalendarMode.Calendar,n.cal1),n.changeMode(s.CalendarMode.Calendar,n.cal2)},this.year1ChangeListener=function(){n.shiftCal2(),n.changeMode(s.CalendarMode.Calendar,n.cal1),n.changeMode(s.CalendarMode.Calendar,n.cal2)},this.year2ChangeListener=function(){n.shiftCal1(),n.changeMode(s.CalendarMode.Calendar,n.cal1),n.changeMode(s.CalendarMode.Calendar,n.cal2)},this.dateClickListener=function(e){var t=d(e);return function(){n.setDate(t)}}}return a(DualPickerComponent,e),Object.defineProperty(DualPickerComponent.prototype,"dateFrom",{get:function(){return this.dateFromValue},set:function(e){e instanceof d&&e.isValid()&&(this.inputFrom.nativeElement.value=e.format("MM/DD/YYYY"),this.dateFromValue=e,this.dateFromChange.emit(e)),this.propagateChange({dateFrom:this.dateFrom,dateTo:this.dateTo})},enumerable:!0,configurable:!0}),Object.defineProperty(DualPickerComponent.prototype,"dateTo",{get:function(){return this.dateToValue},set:function(e){e instanceof d&&e.isValid()&&(this.inputTo.nativeElement.value=e.format("MM/DD/YYYY"),this.dateToValue=e,this.dateToChange.emit(e)),this.propagateChange({dateFrom:this.dateFrom,dateTo:this.dateTo})},enumerable:!0,configurable:!0}),Object.defineProperty(DualPickerComponent.prototype,"match",{get:function(){return this.validDateExpression||/^((0?[13578]|10|12)(-|\/)(([1-9])|(0[1-9])|([12])([0-9]?)|(3[01]?))(-|\/)((19)([2-9])(\d{1})|(20)([01])(\d{1})|([8901])(\d{1}))|(0?[2469]|11)(-|\/)(([1-9])|(0[1-9])|([12])([0-9]?)|(3[0]?))(-|\/)((19)([2-9])(\d{1})|(20)([01])(\d{1})|([8901])(\d{1})))$/},set:function(e){this.validDateExpression=e},enumerable:!0,configurable:!0}),DualPickerComponent.prototype.changeGlobalMode=function(e,t){var n=this;void 0===t&&(t=!1),null!=this.timerId&&clearTimeout(this.timerId),t?this.timerId=setTimeout(function(){n.changeGlobalModeFn(e)},400):this.changeGlobalModeFn(e)},DualPickerComponent.prototype.changeGlobalModeFn=function(e){switch(this.mode=e,this.mode){case u.To:var t=c(this.inputTo.nativeElement).position().left;c(this.myElement.nativeElement).find(".ct-dp-caret").css({left:t}),c(this.myElement.nativeElement).addClass("ct-dp-active");break;case u.From:var n=c(this.inputFrom.nativeElement).position().left;c(this.myElement.nativeElement).find(".ct-dp-caret").css({left:n}),c(this.myElement.nativeElement).addClass("ct-dp-active");break;case u.Hidden:c(this.myElement.nativeElement).removeClass("ct-dp-active")}this.changeMode(s.CalendarMode.Calendar,this.cal1),this.changeMode(s.CalendarMode.Calendar,this.cal2)},DualPickerComponent.prototype.onDateFromStringChange=function(e){if(this.match.test(e)){var t=d(new Date(e));t.isValid()&&(void 0===this.dateFromValue?this.dateFromValue=t:this.dateFromValue.set(t.toObject()),this.correctDateTo(),this.cal1.date=this.dateFromValue,this.shiftCal2(),this.dateFromChange.emit(this.dateFromValue),this.renderCalendar())}},DualPickerComponent.prototype.onDateToStringChange=function(e){if(this.match.test(e)){var t=d(new Date(e));t.isValid()&&(void 0===this.dateToValue?this.dateToValue=t:this.dateToValue.set(t.toObject()),this.correctDateFrom(),this.cal2.date=this.dateToValue,this.shiftCal1(),this.dateToChange.emit(this.dateToValue),this.renderCalendar())}},DualPickerComponent.prototype.shiftCal1=function(){this.cal1.date=d(this.cal2.date),this.cal1.date.subtract({month:1})},DualPickerComponent.prototype.shiftCal2=function(){this.cal2.date=d(this.cal1.date),this.cal2.date.add({month:1})},DualPickerComponent.prototype.changeMode=function(e,t){switch(t.changeMode(e),e){case s.CalendarMode.Calendar:this.renderCalendar()}},DualPickerComponent.prototype.goPrev=function(){this.cal1.mode==s.CalendarMode.Calendar&&this.cal2.mode==s.CalendarMode.Calendar?(this.cal1.date.month(this.cal1.date.month()-1),this.shiftCal2(),this.renderCalendar()):(this.cal1.goPrev(),this.cal2.goPrev())},DualPickerComponent.prototype.goNext=function(){this.cal1.mode==s.CalendarMode.Calendar&&this.cal2.mode==s.CalendarMode.Calendar?(this.cal1.date.month(this.cal1.date.month()+1),this.shiftCal2(),this.renderCalendar()):(this.cal1.goNext(),this.cal2.goNext())},DualPickerComponent.prototype.touched=function(){this.propagateTouched({dateFrom:this.dateFrom,dateTo:this.dateTo})},DualPickerComponent.prototype.closePicker=function(e){9===e.which&&(this.changeGlobalModeFn(u.Hidden),this.touched())},DualPickerComponent.prototype.ngOnInit=function(){this.cal1.date=d(this.dateFrom),this.shiftCal2(),this.cal1.subscribeToChangeMonth(this.month1ChangeListener),this.cal2.subscribeToChangeMonth(this.month2ChangeListener),this.cal1.subscribeToChangeYear(this.year1ChangeListener),this.cal2.subscribeToChangeYear(this.year2ChangeListener)},DualPickerComponent.prototype.ngAfterViewInit=function(){var e=this;this.renderCalendar(),this.inputTo.nativeElement.style["z-index"]=this.zIndexVal,this.inputFrom.nativeElement.style["z-index"]=this.zIndexVal,this.inputFrom.nativeElement.addEventListener("focus",function(){e.changeGlobalMode(u.From)}),this.inputTo.nativeElement.addEventListener("focus",function(){e.changeGlobalMode(u.To)}),this.inputFrom.nativeElement.addEventListener("keyup",function(t){e.onDateFromStringChange(e.inputFrom.nativeElement.value)}),this.inputTo.nativeElement.addEventListener("keyup",function(t){e.onDateToStringChange(e.inputTo.nativeElement.value)}),this.inputTo.nativeElement.addEventListener("keydown",function(t){e.closePicker(t)})},DualPickerComponent.prototype.ngOnChanges=function(e){},DualPickerComponent.prototype.ngOnDestroy=function(){},DualPickerComponent.prototype.writeValue=function(e){e&&(this.dateTo=e.dateTo,this.dateFrom=e.dateFrom)},DualPickerComponent.prototype.validate=function(e){return null==e.value?"Invalid Value":e.value.dateFrom instanceof d&&e.value.dateFrom.isValid()?this.minDateVal&&this.minDateVal.isAfter(e.value.dateFrom)?"Date cannot be before "+this.minDateVal.format("mm/DD/yyyy"):this.maxDateVal&&this.maxDateVal.isBefore(e.value.dateFrom)?"Date cannot be after "+this.maxDateVal.format("mm/DD/yyyy"):e.value.dateTo instanceof d&&e.value.dateTo.isValid()?this.minDateVal&&this.minDateVal.isAfter(e.value.dateTo)?"Date cannot be before "+this.minDateVal.format("mm/DD/yyyy"):this.maxDateVal&&this.maxDateVal.isBefore(e.value.dateTo)?"Date cannot be after "+this.maxDateVal.format("mm/DD/yyyy"):null:"Invalid Date":"Invalid Date"},DualPickerComponent.prototype.renderCalendar=function(){this.cal1.renderCalendar(this.dateClickListener,this.dateTo,this.dateFrom,this.minDateVal,this.maxDateVal),this.cal2.renderCalendar(this.dateClickListener,this.dateTo,this.dateFrom,this.minDateVal,this.maxDateVal)},DualPickerComponent.prototype.setDate=function(e){switch(this.mode){case u.From:this.dateFrom=e,this.correctDateTo(),this.changeGlobalMode(u.To);break;case u.To:this.dateTo=e,this.correctDateFrom(),this.changeGlobalMode(u.Hidden,!0)}this.touched(),this.renderCalendar()},DualPickerComponent.prototype.correctDateTo=function(){this.dateTo&&this.dateFrom.isAfter(this.dateTo)&&(this.dateTo=d(this.dateFrom),this.dateTo.add({day:1}))},DualPickerComponent.prototype.correctDateFrom=function(){this.dateFrom&&this.dateFrom.isValid()&&this.dateTo.isBefore(this.dateFrom)&&(this.dateFrom=d(this.dateTo),this.dateFrom.subtract({day:1}))},o([i.Output(),r("design:type",Object)],DualPickerComponent.prototype,"dateFromChange",void 0),o([i.Output(),r("design:type",Object)],DualPickerComponent.prototype,"dateToChange",void 0),o([i.Input(),r("design:type",Object)],DualPickerComponent.prototype,"dateFrom",null),o([i.Input(),r("design:type",Object)],DualPickerComponent.prototype,"dateTo",null),o([i.Input(),r("design:type",Object)],DualPickerComponent.prototype,"match",null),o([i.ContentChild("dateTo",l.CalendarComponent),r("design:type","function"==typeof(t="undefined"!=typeof i.ElementRef&&i.ElementRef)&&t||Object)],DualPickerComponent.prototype,"inputTo",void 0),o([i.ContentChild("dateFrom",l.CalendarComponent),r("design:type","function"==typeof(h="undefined"!=typeof i.ElementRef&&i.ElementRef)&&h||Object)],DualPickerComponent.prototype,"inputFrom",void 0),o([i.ViewChild("cal1",l.CalendarComponent),r("design:type","function"==typeof(m="undefined"!=typeof l.CalendarComponent&&l.CalendarComponent)&&m||Object)],DualPickerComponent.prototype,"cal1",void 0),o([i.ViewChild("cal2",l.CalendarComponent),r("design:type","function"==typeof(f="undefined"!=typeof l.CalendarComponent&&l.CalendarComponent)&&f||Object)],DualPickerComponent.prototype,"cal2",void 0),DualPickerComponent=o([i.Component({selector:"ct-dual-picker",template:n(19),styles:[n(20),n(17)],encapsulation:i.ViewEncapsulation.None,providers:[{provide:p.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return DualPickerComponent}),multi:!0},{provide:p.NG_VALIDATORS,useExisting:i.forwardRef(function(){return DualPickerComponent}),multi:!0}]}),r("design:paramtypes",["function"==typeof(C="undefined"!=typeof i.ElementRef&&i.ElementRef)&&C||Object])],DualPickerComponent);var t,h,m,f,C}(h.DatePickerBase);t.DualPickerComponent=m},function(e,t){e.exports='<ng-content></ng-content>\r\n<div class="ct-dp-shadow-box" (click)="changeGlobalMode(DualPickerMode.Hidden)" *ngIf="mode != DualPickerMode.Hidden" [style.z-index]="shadowZIndex">\r\n</div>\r\n<div class="ct-dp-picker ct-dp-dualpicker" [class.hidden]="mode == DualPickerMode.Hidden" [class.ct-dp-picker-to]="mode == DualPickerMode.To" [style.z-index]="zIndexVal">\r\n    <div class="ct-dp-caret ct-dp-caret-1"></div>\r\n    <div class="ct-dp-caret ct-dp-caret-2"></div>\r\n    <div class="ct-dp-header"><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-prev  ct-dp-btn" (click)="goPrev()" [disabled]="cal1.mode == CalendarMode.Month || cal2.mode == CalendarMode.Month">&lt;</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-month ct-dp-btn" [disabled]="cal2.mode != CalendarMode.Calendar" (click)="changeMode(CalendarMode.Month, cal1)">{{cal1.date.format("MMMM")}}</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-year  ct-dp-btn" [disabled]="cal2.mode != CalendarMode.Calendar" (click)="changeMode(CalendarMode.Year, cal1)">{{cal1.date.format("YYYY")}}</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-next  ct-dp-btn" [disabled]="true"></button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-prev  ct-dp-btn" [disabled]="true"></button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-month ct-dp-btn" [disabled]="cal1.mode != CalendarMode.Calendar" (click)="changeMode(CalendarMode.Month, cal2)">{{cal2.date.format("MMMM")}}</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-year  ct-dp-btn" [disabled]="cal1.mode != CalendarMode.Calendar" (click)="changeMode(CalendarMode.Year, cal2)">{{cal2.date.format("YYYY")}}</button><!--\r\n        --><button tabindex="-1" class="ct-dp-btn-next  ct-dp-btn" (click)="goNext()" [disabled]="this.cal1.mode == CalendarMode.Month || this.cal2.mode == CalendarMode.Month">&gt;</button>\r\n    </div>\r\n    <ct-calendar #cal1 [ngClass]="{\'ct-dp-cal-inactive\': cal2.mode != CalendarMode.Calendar}"></ct-calendar>\r\n    <ct-calendar #cal2 [ngClass]="{\'ct-dp-cal-inactive\': cal1.mode != CalendarMode.Calendar}"></ct-calendar>\r\n</div>';
},13]))});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9jdG5nLnVtZC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMjY4YzhhOTY2ZWE1Nzk0N2U4ZDYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0ZXBpY2tlci5tb2R1bGUudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2NvbW1vblwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2Zvcm1zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NhbGVuZGFyLW1vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwianF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQubGVzcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudC5sZXNzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGF0ZXBpY2tlci1iYXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRlcGlja2VyL2RhdGVwaWNrZXIuY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9jb21tb24ubGVzcyIsIndlYnBhY2s6Ly8vLi9zcmMvZHVhbHBpY2tlci9kdWFscGlja2VyLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZHVhbHBpY2tlci9kdWFscGlja2VyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJhIiwiaSIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzJfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTBfXyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJfbSIsImFyZ3MiLCJzbGljZSIsImZuIiwiYiIsImFwcGx5IiwiY29uY2F0IiwiZGF0ZXBpY2tlcl9tb2R1bGVfMSIsIkRhdGVQaWNrZXJNb2R1bGUiLCJfX2RlY29yYXRlIiwiZGVjb3JhdG9ycyIsInRhcmdldCIsImtleSIsImRlc2MiLCJkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJjb3JlXzEiLCJjb21tb25fMSIsImZvcm1zXzEiLCJkYXRlcGlja2VyX2NvbXBvbmVudF8xIiwiZHVhbHBpY2tlcl9jb21wb25lbnRfMSIsImNhbGVuZGFyX2NvbXBvbmVudF8xIiwiY2FsZW5kYXJfZ3JpZF9jb21wb25lbnRfMSIsIk5nTW9kdWxlIiwiRGF0ZVBpY2tlckNvbXBvbmVudCIsIkR1YWxQaWNrZXJDb21wb25lbnQiLCJkZWNsYXJhdGlvbnMiLCJDYWxlbmRhckNvbXBvbmVudCIsIkNhbGVuZGFyR3JpZENvbXBvbmVudCIsImltcG9ydHMiLCJDb21tb25Nb2R1bGUiLCJGb3Jtc01vZHVsZSIsIl9fZXh0ZW5kcyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJtb21lbnQiLCJjYWxlbmRhcl9tb2RlXzEiLCIkIiwiZGF0ZXBpY2tlcl9iYXNlXzEiLCJEYXRlUGlja2VyTW9kZSIsIl9zdXBlciIsIm15RWxlbWVudCIsInJlbmRlcmVyIiwiX3RoaXMiLCJDYWxlbmRhck1vZGUiLCJkYXRlQ2hhbmdlIiwiRXZlbnRFbWl0dGVyIiwibW9kZSIsIkhpZGRlbiIsImRhdGVDbGlja0xpc3RlbmVyIiwiZGF0ZSIsInNldERhdGUiLCJtb250aENoYW5nZUxpc3RlbmVyIiwiY2hhbmdlTW9kZSIsIkNhbGVuZGFyIiwieWVhckNoYW5nZUxpc3RlbmVyIiwiZ2V0IiwiZGF0ZVZhbHVlIiwic2V0IiwidmFsIiwiaXNWYWxpZCIsImlucHV0IiwibmF0aXZlRWxlbWVudCIsInZhbHVlIiwiZm9ybWF0IiwiZW1pdCIsInByb3BhZ2F0ZUNoYW5nZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ2YWxpZERhdGVFeHByZXNzaW9uIiwiUmVnRXhwIiwib25EYXRlU3RyaW5nQ2hhbmdlIiwibWF0Y2giLCJ0ZXN0IiwiRGF0ZSIsInVuZGVmaW5lZCIsInRvT2JqZWN0IiwiY2FsIiwidG91Y2hlZCIsInJlbmRlckNhbGVuZGFyIiwiY2hhbmdlR2xvYmFsTW9kZSIsIlZpc2libGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicHJvcGFnYXRlVG91Y2hlZCIsImdvUHJldiIsIm1vbnRoIiwiZ29OZXh0IiwiY2xvc2VQaWNrZXIiLCJldmVudCIsIndoaWNoIiwibmdPbkluaXQiLCJzdWJzY3JpYmVUb0NoYW5nZU1vbnRoIiwic3Vic2NyaWJlVG9DaGFuZ2VZZWFyIiwibmdPbkNoYW5nZXMiLCJpbnB1dHMiLCJuZ0FmdGVyVmlld0luaXQiLCJzdHlsZSIsInpJbmRleFZhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZ09uRGVzdHJveSIsIm1pbkRhdGVWYWwiLCJtYXhEYXRlVmFsIiwid3JpdGVWYWx1ZSIsInZhbGlkYXRlIiwiaXNBZnRlciIsImlzQmVmb3JlIiwiT3V0cHV0IiwiSW5wdXQiLCJDb250ZW50Q2hpbGQiLCJfYSIsIkVsZW1lbnRSZWYiLCJWaWV3Q2hpbGQiLCJfYiIsIkNvbXBvbmVudCIsInNlbGVjdG9yIiwidGVtcGxhdGUiLCJzdHlsZXMiLCJlbmNhcHN1bGF0aW9uIiwiVmlld0VuY2Fwc3VsYXRpb24iLCJOb25lIiwicHJvdmlkZXJzIiwicHJvdmlkZSIsIk5HX1ZBTFVFX0FDQ0VTU09SIiwidXNlRXhpc3RpbmciLCJmb3J3YXJkUmVmIiwibXVsdGkiLCJOR19WQUxJREFUT1JTIiwiX2MiLCJfZCIsIlJlbmRlcmVyIiwiRGF0ZVBpY2tlckJhc2UiLCJtb250aHMiLCJ5ZWFycyIsIm1vbnRoTGlzdGVuZXJzIiwieWVhckxpc3RlbmVycyIsImdlbmVyYXRlTW9udGhEYXRhIiwibGlzdGVuZXIiLCJwdXNoIiwiWWVhciIsImdlbmVyYXRlWWVhckRhdGEiLCJ5ZWFyIiwieSIsImhhbGZOdW1ZZWFyc1Nob3duIiwibnVtWWVhcnNTaG93biIsIk1vbnRoIiwiY2xpY2tDYWxsYmFjayIsImRhdGVUbyIsImRhdGVGcm9tIiwibWluRGF0ZSIsIm1heERhdGUiLCJncmlkIiwic2V0TW9udGgiLCJpbmRleCIsIl9pIiwic2V0WWVhciIsIk1hdGgiLCJmbG9vciIsInRvZGF5IiwiaGVhZGVyIiwiZGF5IiwiZWwiLCJ0ZXh0IiwiYXR0ciIsInRvU3RyaW5nIiwiYXBwZW5kIiwiYm9keSIsImlzU2FtZSIsImlzQmV0d2VlbiIsImNsaWNrIiwiZW1wdHkiLCJhcHBlbmRUbyIsInJlbmRlckNhbGVuZGFyUmVuZGVyZXIiLCJzZWxlY3RSb290RWxlbWVudCIsImhlYWRlckVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0RWxlbWVudENsYXNzIiwiY2FsRWxlbWVudCIsInNldFRleHQiLCJzZXRFbGVtZW50QXR0cmlidXRlIiwibGlzdGVuIiwidmFsaWRhdGVGbiIsInNoYWRvd1pJbmRleCIsInJlZ2lzdGVyT25DaGFuZ2UiLCJyZWdpc3Rlck9uVG91Y2hlZCIsIk51bWJlciIsIkR1YWxQaWNrZXJNb2RlIiwiZGF0ZUZyb21DaGFuZ2UiLCJkYXRlVG9DaGFuZ2UiLCJ0aW1lcklkIiwibW9udGgxQ2hhbmdlTGlzdGVuZXIiLCJzaGlmdENhbDIiLCJjYWwxIiwiY2FsMiIsIm1vbnRoMkNoYW5nZUxpc3RlbmVyIiwic2hpZnRDYWwxIiwieWVhcjFDaGFuZ2VMaXN0ZW5lciIsInllYXIyQ2hhbmdlTGlzdGVuZXIiLCJkYXRlRnJvbVZhbHVlIiwiaW5wdXRGcm9tIiwiZGF0ZVRvVmFsdWUiLCJpbnB1dFRvIiwiZGVsYXkiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2hhbmdlR2xvYmFsTW9kZUZuIiwiVG8iLCJsIiwicG9zaXRpb24iLCJsZWZ0IiwiZmluZCIsImNzcyIsIkZyb20iLCJsZnJvbSIsIm9uRGF0ZUZyb21TdHJpbmdDaGFuZ2UiLCJjb3JyZWN0RGF0ZVRvIiwib25EYXRlVG9TdHJpbmdDaGFuZ2UiLCJjb3JyZWN0RGF0ZUZyb20iLCJzdWJ0cmFjdCIsImFkZCIsIl9lIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLG1CQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLGlCQUFBQSxRQUFBLG1CQUFBQSxRQUFBLGtCQUFBQSxRQUFBLFVBQUFBLFFBQUEsZUFDQSxzQkFBQUMsZ0JBQUFDLElBQ0FELFFBQUEsc0VBQUFKLE9BQ0EsQ0FDQSxHQUFBTSxHQUFBLGdCQUFBTCxTQUFBRCxFQUFBRyxRQUFBLGlCQUFBQSxRQUFBLG1CQUFBQSxRQUFBLGtCQUFBQSxRQUFBLFVBQUFBLFFBQUEsV0FBQUgsRUFBQUQsRUFBQSxpQkFBQUEsRUFBQSxtQkFBQUEsRUFBQSxrQkFBQUEsRUFBQSxPQUFBQSxFQUFBLE9BQ0EsUUFBQVEsS0FBQUQsSUFBQSxnQkFBQUwsaUJBQUFGLEdBQUFRLEdBQUFELEVBQUFDLEtBRUNDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRCxNQ0FnQixVQUFVQyxHQ04xQixRQUFBQyxxQkFBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFmLE9BR0EsSUFBQUMsR0FBQWUsRUFBQUQsSUFDQWYsV0FDQWlCLEdBQUFGLEVBQ0FHLFFBQUEsRUFVQSxPQU5BTCxHQUFBRSxHQUFBSSxLQUFBbEIsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQWMscUJBR0FiLEVBQUFpQixRQUFBLEVBR0FqQixFQUFBRCxRQXZCQSxHQUFBZ0IsS0FxQ0EsT0FUQUYscUJBQUFNLEVBQUFQLEVBR0FDLG9CQUFBTyxFQUFBTCxFQUdBRixvQkFBQVEsRUFBQSxJQUdBUixvQkFBQSxJRGNXLFNBQVNELEdBRW5CLElBQUksR0FBSVAsS0FBS08sR0FDWixHQUFHVSxPQUFPQyxVQUFVQyxlQUFlTixLQUFLTixFQUFTUCxHQUNoRCxhQUFjTyxHQUFRUCxJQUN0QixJQUFLLFdBQVksS0FDakIsS0FBSyxTQUVKTyxFQUFRUCxHQUFNLFNBQVNvQixHQUN0QixHQUFJQyxHQUFPRCxFQUFHRSxNQUFNLEdBQUlDLEVBQUtoQixFQUFRYSxFQUFHLEdBQ3hDLE9BQU8sVUFBVXJCLEVBQUV5QixFQUFFVCxHQUNwQlEsRUFBR0UsTUFBTXhCLE1BQU9GLEVBQUV5QixFQUFFVCxHQUFHVyxPQUFPTCxNQUU5QmQsRUFBUVAsR0FDVixNQUNELFNBRUNPLEVBQVFQLEdBQUtPLEVBQVFBLEVBQVFQLElBS2hDLE1BQU9PLEtBR0YsU0FBU1osRUFBUUQsRUFBU2MsR0FFL0IsWUUvRUQsSUFBQW1CLEdBQUFuQixFQUErQixFQUF2QmQsR0FBQWtDLGlCQUFBRCxFQUFBQyxrQkZzRkYsU0FBU2pDLEVBQVFELEVBQVNjLEdBRS9CLFlBQ0EsSUFBSXFCLEdBQWM1QixNQUFRQSxLQUFLNEIsWUFBZSxTQUFVQyxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhuQixFQUFJb0IsVUFBVUMsT0FBUUMsRUFBSXRCLEVBQUksRUFBSWdCLEVBQWtCLE9BQVRFLEVBQWdCQSxFQUFPaEIsT0FBT3FCLHlCQUF5QlAsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpNLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJILEVBQUlFLFFBQVFDLFNBQVNWLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSWpDLEdBQUk4QixFQUFXTSxPQUFTLEVBQUdwQyxHQUFLLEVBQUdBLEtBQVNrQyxFQUFJSixFQUFXOUIsTUFBSXFDLEdBQUt0QixFQUFJLEVBQUltQixFQUFFRyxHQUFLdEIsRUFBSSxFQUFJbUIsRUFBRUgsRUFBUUMsRUFBS0ssR0FBS0gsRUFBRUgsRUFBUUMsS0FBU0ssRUFDaEosT0FBT3RCLEdBQUksR0FBS3NCLEdBQUtwQixPQUFPd0IsZUFBZVYsRUFBUUMsRUFBS0ssR0FBSUEsR0FFNURLLEVBQWN6QyxNQUFRQSxLQUFLeUMsWUFBZSxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixnQkFBWkwsVUFBb0Qsa0JBQXJCQSxTQUFRTSxTQUF5QixNQUFPTixTQUFRTSxTQUFTRixFQUFHQyxJR2hHM0dFLEVBQUF0QyxFQUF5QixHQUN6QnVDLEVBQUF2QyxFQUE2QixHQUM3QndDLEVBQUF4QyxFQUE0QixHQUU1QnlDLEVBQUF6QyxFQUFvQyxHQUNwQzBDLEVBQUExQyxFQUFvQyxJQUNwQzJDLEVBQUEzQyxFQUFrQyxHQUNsQzRDLEVBQUE1QyxFQUFzQyxHQWN0Q29CLEVBQUEsbUJBQUFBLHFCQUVBLE1BZEFBLGtCQUFBQyxHQUFDaUIsRUFBQU8sVUFDQzNELFNBQ0V1RCxFQUFBSyxvQkFDQUosRUFBQUsscUJBRUZDLGNBQ0VQLEVBQUFLLG9CQUNBSixFQUFBSyxvQkFDQUosRUFBQU0sa0JBQ0FMLEVBQUFNLHVCQUNGQyxTQUFVWixFQUFBYSxhQUFjWixFQUFBYSxlSHNHakJuQixFQUFXLHlCQUNaZCxvQkdyR0tsQyxHQUFBa0MsaUJBQWdCQSxHSDZHdkIsU0FBU2pDLEVBQVFELEdJbEl2QkMsRUFBQUQsUUFBQVEsR0p3SU0sU0FBU1AsRUFBUUQsR0t4SXZCQyxFQUFBRCxRQUFBUyxHTDhJTSxTQUFTUixFQUFRRCxHTTlJdkJDLEVBQUFELFFBQUFVLEdOb0pNLFNBQVNULEVBQVFELEVBQVNjLEdBRS9CLFlBQ0EsSUFBSXNELEdBQWE3RCxNQUFRQSxLQUFLNkQsV0FBYyxTQUFVNUIsRUFBR1YsR0FFckQsUUFBU3VDLE1BQU85RCxLQUFLK0QsWUFBYzlCLEVBRG5DLElBQUssR0FBSWxCLEtBQUtRLEdBQU9BLEVBQUVMLGVBQWVILEtBQUlrQixFQUFFbEIsR0FBS1EsRUFBRVIsR0FFbkRrQixHQUFFaEIsVUFBa0IsT0FBTk0sRUFBYVAsT0FBT2dELE9BQU96QyxJQUFNdUMsR0FBRzdDLFVBQVlNLEVBQUVOLFVBQVcsR0FBSTZDLE1BRS9FbEMsRUFBYzVCLE1BQVFBLEtBQUs0QixZQUFlLFNBQVVDLEVBQVlDLEVBQVFDLEVBQUtDLEdBQzdFLEdBQTJIQyxHQUF2SG5CLEVBQUlvQixVQUFVQyxPQUFRQyxFQUFJdEIsRUFBSSxFQUFJZ0IsRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9oQixPQUFPcUIseUJBQXlCUCxFQUFRQyxHQUFPQyxDQUNySCxJQUF1QixnQkFBWk0sVUFBb0Qsa0JBQXJCQSxTQUFRQyxTQUF5QkgsRUFBSUUsUUFBUUMsU0FBU1YsRUFBWUMsRUFBUUMsRUFBS0MsT0FDcEgsS0FBSyxHQUFJakMsR0FBSThCLEVBQVdNLE9BQVMsRUFBR3BDLEdBQUssRUFBR0EsS0FBU2tDLEVBQUlKLEVBQVc5QixNQUFJcUMsR0FBS3RCLEVBQUksRUFBSW1CLEVBQUVHLEdBQUt0QixFQUFJLEVBQUltQixFQUFFSCxFQUFRQyxFQUFLSyxHQUFLSCxFQUFFSCxFQUFRQyxLQUFTSyxFQUNoSixPQUFPdEIsR0FBSSxHQUFLc0IsR0FBS3BCLE9BQU93QixlQUFlVixFQUFRQyxFQUFLSyxHQUFJQSxHQUU1REssRUFBY3pDLE1BQVFBLEtBQUt5QyxZQUFlLFNBQVVDLEVBQUdDLEdBQ3ZELEdBQXVCLGdCQUFaTCxVQUFvRCxrQkFBckJBLFNBQVFNLFNBQXlCLE1BQU9OLFNBQVFNLFNBQVNGLEVBQUdDLElPbkszR0UsRUFBQXRDLEVBSU8sR0FDSzBELEVBQU0xRCxFQUFNLEdBQ3hCMkMsRUFBQTNDLEVBQWtDLEdBQ2xDMkQsRUFBQTNELEVBQTZCLEdBQ2pCNEQsRUFBQzVELEVBQU0sSUFDbkJ3QyxFQUFBeEMsRUFBb0YsR0FDcEY2RCxFQUFBN0QsRUFBK0IsS0FFL0IsU0FBWThELEdBQ1ZBLElBQUEscUJBQVNBLElBQUEsb0JBREM1RSxFQUFBNEUsaUJBQUE1RSxFQUFBNEUsbUJBQVosSUFBWUEsR0FBQTVFLEVBQUE0RSxlQWNaaEIsRUFBQSxTQUFBaUIsR0FpQ0UsUUFBQWpCLHFCQUFvQmtCLEVBQStCQyxHQWpDckQsR0FBQUMsR0FBQXpFLElBa0NJc0UsR0FBQTFELEtBQUFaLE1BRGtCQSxLQUFBdUUsWUFBK0J2RSxLQUFBd0UsV0EvQjVDeEUsS0FBQTBFLGFBQWVSLEVBQUFRLGFBQ2YxRSxLQUFBcUUsZUFBaUJBLEVBRWRyRSxLQUFBMkUsV0FBYSxHQUFJOUIsR0FBQStCLGFBMEJwQjVFLEtBQUE2RSxLQUF1QlIsRUFBZVMsT0FpRzdDOUUsS0FBQStFLGtCQUFvQixTQUFDQyxHQUNuQixHQUFJL0MsR0FBSWdDLEVBQU9lLEVBQ2YsT0FBTyxZQUNMUCxFQUFLUSxRQUFRaEQsS0FJVGpDLEtBQUFrRixvQkFBc0IsV0FDNUJULEVBQUtVLFdBQVdqQixFQUFBUSxhQUFhVSxXQUd2QnBGLEtBQUFxRixtQkFBcUIsV0FDM0JaLEVBQUtVLFdBQVdqQixFQUFBUSxhQUFhVSxXQXdDakMsTUFwTHlDdkIsR0FBQVIsb0JBQUFpQixHQVF2Q3RELE9BQUF3QixlQUFJYSxvQkFBQXBDLFVBQUEsUVB5S0dxRSxJT3pLUCxXQUNFLE1BQU90RixNQUFLdUYsV1AyS1BDLElPektQLFNBQVNDLEdBQ0hBLFlBQWV4QixJQUFVd0IsRUFBSUMsWUFDL0IxRixLQUFLMkYsTUFBTUMsY0FBY0MsTUFBUUosRUFBSUssT0FBTyxjQUM1QzlGLEtBQUt1RixVQUFZRSxFQUNqQnpGLEtBQUsyRSxXQUFXb0IsS0FBS04sSUFFdkJ6RixLQUFLZ0csZ0JBQWdCUCxJUDJLaEJRLFlBQVksRUFDWkMsY0FBYyxJT3hLckJsRixPQUFBd0IsZUFBSWEsb0JBQUFwQyxVQUFBLFNQMktHcUUsSU8zS1AsV0FDRSxNQUFPdEYsTUFBS21HLHFCQUF1Qiw4UFA2SzlCWCxJTzNLUCxTQUFVQyxHQUNSekYsS0FBS21HLG9CQUFzQixHQUFJQyxRQUFPWCxJUDZLakNRLFlBQVksRUFDWkMsY0FBYyxJT2xLZDdDLG9CQUFBcEMsVUFBQW9GLG1CQUFQLFNBQTBCWixHQUN4QixHQUFJekYsS0FBS3NHLE1BQU1DLEtBQUtkLEdBQU0sQ0FDeEIsR0FBSTVFLEdBQUlvRCxFQUFPLEdBQUl1QyxNQUFLZixHQUVEZ0IsVUFBbkJ6RyxLQUFLdUYsVUFBMkJ2RixLQUFLdUYsVUFBWTFFLEVBQzlDYixLQUFLdUYsVUFBVUMsSUFBSTNFLEVBQUU2RixZQUU1QjFHLEtBQUsyRSxXQUFXb0IsS0FBSy9GLEtBQUt1RixXQUN0QjFFLEVBQUU2RSxVQUNKMUYsS0FBSzJHLElBQUkzQixLQUFPaEYsS0FBS3VGLFVBRXJCdkYsS0FBSzJHLElBQUkzQixLQUFPZixJQUVsQmpFLEtBQUs0RyxVQUNMNUcsS0FBS2dHLGdCQUFnQlAsR0FDckJ6RixLQUFLNkcsbUJBSUZ4RCxvQkFBQXBDLFVBQUE2RixpQkFBUCxTQUF3QmpDLEdBRXRCLE9BREE3RSxLQUFLNkUsS0FBT0EsRUFDSjdFLEtBQUs2RSxNQUNYLElBQUtSLEdBQWUwQyxRQUNsQi9HLEtBQUttRixXQUFXakIsRUFBQVEsYUFBYVUsVUFDN0JqQixFQUFFbkUsS0FBS3VFLFVBQVVxQixlQUFlb0IsU0FBUyxlQUN6QyxNQUNGLEtBQUszQyxHQUFlUyxPQUNsQlgsRUFBRW5FLEtBQUt1RSxVQUFVcUIsZUFBZXFCLFlBQVksa0JBSTFDNUQsb0JBQUFwQyxVQUFBMkYsUUFBUixXQUNFNUcsS0FBS2tILGlCQUFpQmxILEtBQUtnRixPQUd0QjNCLG9CQUFBcEMsVUFBQWtFLFdBQVAsU0FBa0JOLEdBRWhCLE9BREE3RSxLQUFLMkcsSUFBSXhCLFdBQVdOLEdBQ1pBLEdBQ04sSUFBS1gsR0FBQVEsYUFBYVUsU0FDaEJwRixLQUFLNkcsbUJBS0p4RCxvQkFBQXBDLFVBQUFrRyxPQUFQLFdBQ01uSCxLQUFLMkcsSUFBSTlCLE1BQVFYLEVBQUFRLGFBQWFVLFVBQ2hDcEYsS0FBSzJHLElBQUkzQixLQUFLb0MsTUFBTXBILEtBQUsyRyxJQUFJM0IsS0FBS29DLFFBQVUsR0FDNUNwSCxLQUFLNkcsa0JBRUw3RyxLQUFLMkcsSUFBSVEsVUFJTjlELG9CQUFBcEMsVUFBQW9HLE9BQVAsV0FDTXJILEtBQUsyRyxJQUFJOUIsTUFBUVgsRUFBQVEsYUFBYVUsVUFDaENwRixLQUFLMkcsSUFBSTNCLEtBQUtvQyxNQUFNcEgsS0FBSzJHLElBQUkzQixLQUFLb0MsUUFBVSxHQUM1Q3BILEtBQUs2RyxrQkFFTDdHLEtBQUsyRyxJQUFJVSxVQUlMaEUsb0JBQUFwQyxVQUFBcUcsWUFBUixTQUFvQkMsR0FDQyxJQUFoQkEsRUFBTUMsT0FDUHhILEtBQUs4RyxpQkFBaUJ6QyxFQUFlUyxTQUl6Q3pCLG9CQUFBcEMsVUFBQXdHLFNBQUEsV0FDTXpILEtBQUtnRixlQUFnQmYsSUFBVWpFLEtBQUtnRixLQUFLVSxVQUMzQzFGLEtBQUsyRyxJQUFJM0IsS0FBT2YsRUFBT2pFLEtBQUtnRixNQUU1QmhGLEtBQUsyRyxJQUFJM0IsS0FBT2YsSUFHbEJqRSxLQUFLMkcsSUFBSWUsdUJBQXVCMUgsS0FBS2tGLHFCQUNyQ2xGLEtBQUsyRyxJQUFJZ0Isc0JBQXNCM0gsS0FBS3FGLHFCQUd0Q2hDLG9CQUFBcEMsVUFBQTJHLFlBQUEsU0FBWUMsS0FJWnhFLG9CQUFBcEMsVUFBQTZHLGdCQUFBLGNBQUFyRCxHQUFBekUsSUFDRUEsTUFBSzZHLGlCQUNMN0csS0FBSzJGLE1BQU1DLGNBQWNtQyxNQUFNLFdBQWEvSCxLQUFLZ0ksVUFDakRoSSxLQUFLMkYsTUFBTUMsY0FBY3FDLGlCQUFpQixRQUFTLFdBQVF4RCxFQUFLcUMsaUJBQWlCekMsRUFBZTBDLFdBQ2hHL0csS0FBSzJGLE1BQU1DLGNBQWNxQyxpQkFBaUIsUUFBUyxTQUFDVixHQUFZOUMsRUFBSzRCLG1CQUFtQjVCLEVBQUtrQixNQUFNQyxjQUFjQyxTQUNqSDdGLEtBQUsyRixNQUFNQyxjQUFjcUMsaUJBQWlCLFVBQVcsU0FBQ1YsR0FBWTlDLEVBQUs2QyxZQUFZQyxNQWtCckZsRSxvQkFBQXBDLFVBQUFnRSxRQUFBLFNBQVFELEdBQ04sT0FBUWhGLEtBQUs2RSxNQUNYLElBQUtSLEdBQWUwQyxRQUNsQi9HLEtBQUs0RyxVQUNMNUcsS0FBS2dGLEtBQU9BLEVBQ1poRixLQUFLOEcsaUJBQWlCekMsRUFBZVMsUUFHekM5RSxLQUFLNkcsa0JBR1B4RCxvQkFBQXBDLFVBQUFpSCxZQUFBLGFBSUE3RSxvQkFBQXBDLFVBQUE0RixlQUFBLFdBQ0U3RyxLQUFLMkcsSUFBSUUsZUFBZTdHLEtBQUsrRSxrQkFBbUIvRSxLQUFLZ0YsS0FBTWhGLEtBQUtnRixLQUFNaEYsS0FBS21JLFdBQVluSSxLQUFLb0ksYUFHOUYvRSxvQkFBQXBDLFVBQUFvSCxXQUFBLFNBQVd4QyxHQUNMQSxJQUNGN0YsS0FBS2dGLEtBQU9hLElBSWhCeEMsb0JBQUFwQyxVQUFBcUgsU0FBQSxTQUFTeEgsR0FDUCxNQUFNQSxHQUFFK0UsZ0JBQWlCNUIsSUFBWW5ELEVBQUUrRSxNQUFNSCxVQUd6QzFGLEtBQUttSSxZQUFjbkksS0FBS21JLFdBQVdJLFFBQVF6SCxFQUFFK0UsT0FDeEMseUJBQTJCN0YsS0FBS21JLFdBQVdyQyxPQUFPLGNBRXZEOUYsS0FBS29JLFlBQWNwSSxLQUFLb0ksV0FBV0ksU0FBUzFILEVBQUUrRSxPQUN6Qyx3QkFBMEI3RixLQUFLb0ksV0FBV3RDLE9BQU8sY0FFbkQsS0FSRSxnQkFyS1hsRSxHQUFDaUIsRUFBQTRGLFNQNlRNaEcsRUFBVyxjQUFlekIsU0FDM0JxQyxvQkFBb0JwQyxVQUFXLGFBQWMsUU81VG5EVyxHQUFDaUIsRUFBQTZGLFFQK1RNakcsRUFBVyxjQUFlekIsU0FDM0JxQyxvQkFBb0JwQyxVQUFXLE9BQVEsTU9uVDdDVyxHQUFDaUIsRUFBQTZGLFFQc1RNakcsRUFBVyxjQUFlekIsU0FDM0JxQyxvQkFBb0JwQyxVQUFXLFFBQVMsTU8vUzlDVyxHQUFDaUIsRUFBQThGLGFBQWEsUVBrVFBsRyxFQUFXLGNBQWdHLG1CQUF4RW1HLEVBQWtDLG1CQUF0Qi9GLEdBQU9nRyxZQUE4QmhHLEVBQU9nRyxhQUE4QkQsR0FBTzVILFNBQ2pJcUMsb0JBQW9CcEMsVUFBVyxRQUFTLFFPalQ5Q1csR0FBQ2lCLEVBQUFpRyxVQUFVNUYsRUFBQU0sbUJQb1RKZixFQUFXLGNBQTBJLG1CQUFsSHNHLEVBQXVELG1CQUEzQzdGLEdBQXFCTSxtQkFBcUNOLEVBQXFCTSxvQkFBcUN1RixHQUFPL0gsU0FDM0txQyxvQkFBb0JwQyxVQUFXLE1BQU8sUU83VjlDb0Msb0JBQUF6QixHQUFDaUIsRUFBQW1HLFdBQ0NDLFNBQVUsaUJBQ1ZDLFNBQVUzSSxFQUFRLElBQ2xCNEksUUFBUzVJLEVBQVEsSUFBZ0NBLEVBQVEsS0FDekQ2SSxjQUFldkcsRUFBQXdHLGtCQUFrQkMsS0FDakNDLFlBQ0lDLFFBQVN6RyxFQUFBMEcsa0JBQW1CQyxZQUFhN0csRUFBQThHLFdBQVcsV0FBTSxNQUFBdEcsdUJBQXNCdUcsT0FBTyxJQUN2RkosUUFBU3pHLEVBQUE4RyxjQUFlSCxZQUFhN0csRUFBQThHLFdBQVcsV0FBTSxNQUFBdEcsdUJBQXNCdUcsT0FBTyxNUGtXaEZuSCxFQUFXLHFCQUF1RyxtQkFBeEVxSCxFQUFrQyxtQkFBdEJqSCxHQUFPZ0csWUFBOEJoRyxFQUFPZ0csYUFBOEJpQixHQUFPOUksT0FBcUYsbUJBQXBFK0ksRUFBZ0MsbUJBQXBCbEgsR0FBT21ILFVBQTRCbkgsRUFBT21ILFdBQTRCRCxHQUFPL0ksVUFDbFBxQyxvQkFFSCxJQUFJdUYsR0FBSUcsRUFBSWUsRUFBSUMsR09sV29CM0YsRUFBQTZGLGVBQTVCeEssR0FBQTRELG9CQUFtQkEsR1B5VzFCLFNBQVMzRCxFQUFRRCxHUW5ZdkJDLEVBQUFELFFBQUFXLEdSeVlNLFNBQVNWLEVBQVFELEVBQVNjLEdBRS9CLFlBQ0EsSUFBSXFCLEdBQWM1QixNQUFRQSxLQUFLNEIsWUFBZSxTQUFVQyxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhuQixFQUFJb0IsVUFBVUMsT0FBUUMsRUFBSXRCLEVBQUksRUFBSWdCLEVBQWtCLE9BQVRFLEVBQWdCQSxFQUFPaEIsT0FBT3FCLHlCQUF5QlAsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpNLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJILEVBQUlFLFFBQVFDLFNBQVNWLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSWpDLEdBQUk4QixFQUFXTSxPQUFTLEVBQUdwQyxHQUFLLEVBQUdBLEtBQVNrQyxFQUFJSixFQUFXOUIsTUFBSXFDLEdBQUt0QixFQUFJLEVBQUltQixFQUFFRyxHQUFLdEIsRUFBSSxFQUFJbUIsRUFBRUgsRUFBUUMsRUFBS0ssR0FBS0gsRUFBRUgsRUFBUUMsS0FBU0ssRUFDaEosT0FBT3RCLEdBQUksR0FBS3NCLEdBQUtwQixPQUFPd0IsZUFBZVYsRUFBUUMsRUFBS0ssR0FBSUEsR0FFNURLLEVBQWN6QyxNQUFRQSxLQUFLeUMsWUFBZSxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixnQkFBWkwsVUFBb0Qsa0JBQXJCQSxTQUFRTSxTQUF5QixNQUFPTixTQUFRTSxTQUFTRixFQUFHQyxJU25aM0dFLEVBQUF0QyxFQUF3RyxHQUM1RjBELEVBQU0xRCxFQUFNLEdBQ3hCMkQsRUFBQTNELEVBQTZCLEdBQzdCNEMsRUFBQTVDLEVBQXNDLEdBUXRDaUQsRUFBQSxXQXdCSSxRQUFBQSxxQkFsQk94RCxLQUFBMEUsYUFBZVIsRUFBQVEsYUFDZjFFLEtBQUE2RSxLQUFxQlgsRUFBQVEsYUFBYVUsU0FNakNwRixLQUFBa0ssVUFFQWxLLEtBQUFtSyxTQUdBbkssS0FBQW9LLGtCQUVBcEssS0FBQXFLLGlCQUtKckssS0FBS3NLLG9CQWlGYixNQTFGSXRKLFFBQUF3QixlQUFJZ0Isa0JBQUF2QyxVQUFBLFlUOFlDcUUsSVM5WUwsV0FBMEIsTUFBT3RGLE1BQUttSyxPVCtZakNsRSxZQUFZLEVBQ1pDLGNBQWMsSVNwWW5CMUMsa0JBQUF2QyxVQUFBd0csU0FBQSxhQUNBakUsa0JBQUF2QyxVQUFBaUgsWUFBQSxhQUVBMUUsa0JBQUF2QyxVQUFBeUcsdUJBQUEsU0FBdUI2QyxHQUNuQnZLLEtBQUtvSyxlQUFlSSxLQUFLRCxJQUc3Qi9HLGtCQUFBdkMsVUFBQTBHLHNCQUFBLFNBQXNCNEMsR0FDbEJ2SyxLQUFLcUssY0FBY0csS0FBS0QsSUFHNUIvRyxrQkFBQXZDLFVBQUFrRSxXQUFBLFNBQVdOLEdBRVAsT0FEQTdFLEtBQUs2RSxLQUFPQSxFQUNKQSxHQUNKLElBQUtYLEdBQUFRLGFBQWErRixLQUNkekssS0FBSzBLLGlCQUFpQjFLLEtBQUtnRixLQUFLMkYsVUFLcENuSCxrQkFBQXZDLFVBQUFxSixrQkFBUixXQUNJLEdBQUl0RixHQUFPZixFQUFPLEdBQUl1QyxNQUN0QnhCLEdBQUtvQyxNQUFNLEVBQ1gsSUFBSW5GLEdBQUlnQyxFQUFPLEdBQUl1QyxNQUVuQixLQURBdkUsRUFBRW1GLE1BQU0sR0FDRHBDLEVBQUsyRixTQUFXMUksRUFBRTBJLFFBQ3JCM0ssS0FBS2tLLE9BQU9NLEtBQUt2SSxFQUFFNkQsT0FBTyxRQUMxQjdELEVBQUVtRixNQUFNbkYsRUFBRW1GLFFBQVUsSUFJcEI1RCxrQkFBQXZDLFVBQUF5SixpQkFBUixTQUF5QkMsR0FDckIzSyxLQUFLbUssUUFFTCxLQUFLLEdBRERTLEdBQUlELEVBQU9uSCxrQkFBa0JxSCxrQkFDeEI5SyxFQUFJLEVBQUdBLEVBQUl5RCxrQkFBa0JzSCxjQUFlL0ssSUFDakRDLEtBQUttSyxNQUFNSyxLQUFLSSxFQUFJN0ssSUFJNUJ5RCxrQkFBQXZDLFVBQUFrRyxPQUFBLFdBQ0ksT0FBUW5ILEtBQUs2RSxNQUNULElBQUtYLEdBQUFRLGFBQWFVLFNBQ2QsS0FDSixLQUFLbEIsR0FBQVEsYUFBYXFHLE1BQ2QsS0FDSixLQUFLN0csR0FBQVEsYUFBYStGLEtBQ2R6SyxLQUFLMEssaUJBQWlCMUssS0FBS21LLE1BQU0zRyxrQkFBa0JxSCxtQkFBcUJySCxrQkFBa0JzSCxpQkFJdEd0SCxrQkFBQXZDLFVBQUFvRyxPQUFBLFdBQ0ksT0FBUXJILEtBQUs2RSxNQUNULElBQUtYLEdBQUFRLGFBQWFVLFNBQ2QsS0FDSixLQUFLbEIsR0FBQVEsYUFBYXFHLE1BQ2QsS0FDSixLQUFLN0csR0FBQVEsYUFBYStGLEtBQ2R6SyxLQUFLMEssaUJBQWlCMUssS0FBS21LLE1BQU0zRyxrQkFBa0JxSCxtQkFBcUJySCxrQkFBa0JzSCxpQkFJdEd0SCxrQkFBQXZDLFVBQUE0RixlQUFBLFNBQWVtRSxFQUF5QkMsRUFBdUJDLEVBQXlCQyxFQUF3QkMsR0FDNUdwTCxLQUFLcUwsS0FBS3hFLGVBQWU3RyxLQUFLZ0YsS0FBTWdHLEVBQWVDLEVBQVFDLEVBQVVDLEVBQVNDLElBR2xGNUgsa0JBQUF2QyxVQUFBcUssU0FBQSxTQUFTQyxHQUNMdkwsS0FBS2dGLEtBQUtvQyxNQUFNbUUsRUFDaEIsS0FBZSxHQUFBQyxHQUFBLEVBQUE1QyxFQUFBNUksS0FBS29LLGVBQUxvQixFQUFBNUMsRUFBQXpHLE9BQUFxSixJQUFvQixDQUE5QixHQUFJbEssR0FBRXNILEVBQUE0QyxFQUNQbEssT0FJUmtDLGtCQUFBdkMsVUFBQXdLLFFBQUEsU0FBUWQsR0FDSjNLLEtBQUtnRixLQUFLMkYsS0FBS0EsRUFDZixLQUFlLEdBQUFhLEdBQUEsRUFBQTVDLEVBQUE1SSxLQUFLcUssY0FBTG1CLEVBQUE1QyxFQUFBekcsT0FBQXFKLElBQW1CLENBQTdCLEdBQUlsSyxHQUFFc0gsRUFBQTRDLEVBQ1BsSyxPQXJHT2tDLGtCQUFBc0gsY0FBZ0IsR0FFaEJ0SCxrQkFBQXFILGtCQUFvQmEsS0FBS0MsTUFBTW5JLGtCQUFrQnNILGNBQWdCLEdBa0JoRmxKLEdBQUNpQixFQUFBaUcsVUFBVTNGLEVBQUFNLHVCVHlkTmhCLEVBQVcsY0FBNEosbUJBQXBJbUcsRUFBZ0UsbUJBQXBEekYsR0FBMEJNLHVCQUF5Q04sRUFBMEJNLHdCQUF5Q21GLEdBQU81SCxTQUM3THdDLGtCQUFrQnZDLFVBQVcsT0FBUSxRU3RmN0N1QyxrQkFBQTVCLEdBQUNpQixFQUFBbUcsV0FDR0MsU0FBVSxjQUNWQyxTQUFVM0ksRUFBUSxJQUNsQjRJLFFBQVM1SSxFQUFRLEtBQ2pCNkksY0FBZXZHLEVBQUF3RyxrQkFBa0JDLE9UMGY1QjdHLEVBQVcseUJBQ1plLGtCQUVILElBQUlvRixLUzNmSW5KLEdBQUErRCxrQkFBaUJBLEdUa2dCeEIsU0FBUzlELEVBQVFELEdBRXRCLGNVL2dCRCxTQUFZaUYsR0FDUkEsSUFBQSx1QkFBVUEsSUFBQSxpQkFBT0EsSUFBQSxnQkFEVGpGLEVBQUFpRixlQUFBakYsRUFBQWlGLGlCQUFBakYsR0FBQWlGLGNWMGhCTixTQUFTaEYsRUFBUUQsRUFBU2MsR0FFL0IsWUFDQSxJQUFJcUIsR0FBYzVCLE1BQVFBLEtBQUs0QixZQUFlLFNBQVVDLEVBQVlDLEVBQVFDLEVBQUtDLEdBQzdFLEdBQTJIQyxHQUF2SG5CLEVBQUlvQixVQUFVQyxPQUFRQyxFQUFJdEIsRUFBSSxFQUFJZ0IsRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9oQixPQUFPcUIseUJBQXlCUCxFQUFRQyxHQUFPQyxDQUNySCxJQUF1QixnQkFBWk0sVUFBb0Qsa0JBQXJCQSxTQUFRQyxTQUF5QkgsRUFBSUUsUUFBUUMsU0FBU1YsRUFBWUMsRUFBUUMsRUFBS0MsT0FDcEgsS0FBSyxHQUFJakMsR0FBSThCLEVBQVdNLE9BQVMsRUFBR3BDLEdBQUssRUFBR0EsS0FBU2tDLEVBQUlKLEVBQVc5QixNQUFJcUMsR0FBS3RCLEVBQUksRUFBSW1CLEVBQUVHLEdBQUt0QixFQUFJLEVBQUltQixFQUFFSCxFQUFRQyxFQUFLSyxHQUFLSCxFQUFFSCxFQUFRQyxLQUFTSyxFQUNoSixPQUFPdEIsR0FBSSxHQUFLc0IsR0FBS3BCLE9BQU93QixlQUFlVixFQUFRQyxFQUFLSyxHQUFJQSxHQUU1REssRUFBY3pDLE1BQVFBLEtBQUt5QyxZQUFlLFNBQVVDLEVBQUdDLEdBQ3ZELEdBQXVCLGdCQUFaTCxVQUFvRCxrQkFBckJBLFNBQVFNLFNBQXlCLE1BQU9OLFNBQVFNLFNBQVNGLEVBQUdDLElXcGlCM0dFLEVBQUF0QyxFQUE2RixHQUNqRjBELEVBQU0xRCxFQUFNLEdBRVo0RCxFQUFDNUQsRUFBTSxJQVFuQmtELEVBQUEsV0FJSSxRQUFBQSx1QkFBb0JjLEVBQStCQyxHQUEvQnhFLEtBQUF1RSxZQUErQnZFLEtBQUF3RSxXQUYzQ3hFLEtBQUE0TCxNQUF1QjNILElBeUhuQyxNQXBISVIsdUJBQUF4QyxVQUFBd0csU0FBQSxhQUdBaEUsc0JBQUF4QyxVQUFBaUgsWUFBQSxhQVFBekUsc0JBQUF4QyxVQUFBNEYsZUFBQSxTQUFlN0IsRUFBcUJnRyxFQUF5QkMsRUFBdUJDLEVBQXlCQyxFQUF3QkMsR0FDakksR0FBSW5KLEdBQUlnQyxFQUFPZSxFQUNmL0MsR0FBRStDLEtBQUssRUFHUCxLQUFLLEdBREQ2RyxHQUFTMUgsRUFBRSx3Q0FDTnBFLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUFLLENBQ3hCa0MsRUFBRTZKLElBQUkvTCxFQUVOLElBQUlnTSxHQUFLNUgsRUFBRSxjQUNYNEgsR0FBR0MsS0FBSy9KLEVBQUU2RCxPQUFPLE9BQ2pCaUcsRUFBR0UsS0FBSyxnQkFBaUJsTSxFQUFFbU0sWUFDM0JILEVBQUcvRSxTQUFTLGlCQUVaNkUsRUFBT00sT0FBT0osR0FHbEI5SixFQUFFK0MsS0FBSyxFQUdQLEtBQUssR0FERG9ILEdBQU9qSSxFQUFFLHNDQUNKcEUsRUFBSSxFQUFHQSxFQUFJa0MsRUFBRTZKLE1BQU8vTCxJQUFLLENBQzlCLEdBQUlnTSxHQUFLNUgsRUFBRSxjQUVYNEgsR0FBR0UsS0FBSyxnQkFBaUJsTSxFQUFFbU0sWUFDM0JILEVBQUcvRSxTQUFTLGlCQUNab0YsRUFBS0QsT0FBT0osR0FHaEIsS0FBTzlKLEVBQUVtRixVQUFZcEMsRUFBS29DLFNBQVMsQ0FDL0IsR0FBSTJFLEdBQUs1SCxFQUFFLG9CQUNYNEgsR0FBR0MsS0FBTS9KLEVBQUUrQyxPQUFRa0gsWUFDbkJILEVBQUdFLEtBQUssZ0JBQWlCaEssRUFBRStDLE9BQU9rSCxZQUNsQ0gsRUFBR0UsS0FBSyxXQUFZLE1BQ3BCRixFQUFHL0UsU0FBUyxpQkFFUmhILEtBQUs0TCxNQUFNNUcsU0FBVy9DLEVBQUUrQyxRQUFVaEYsS0FBSzRMLE1BQU14RSxVQUFZbkYsRUFBRW1GLFNBQVcyRSxFQUFHL0UsU0FBUyxVQUVqRmlFLEdBQVVoSixFQUFFb0ssT0FBT3BCLEVBQVEsUUFBWUMsR0FBWWpKLEVBQUVvSyxPQUFPbkIsRUFBVSxTQUN2RWEsRUFBRy9FLFNBQVMsVUFFWmtFLEdBQVlELEdBQVVoSixFQUFFcUssVUFBVXBCLEVBQVVELElBQzVDYyxFQUFHL0UsU0FBUyxZQUVab0UsR0FBV0QsR0FBV2xKLEVBQUV1RyxTQUFTMkMsSUFBWWxKLEVBQUVzRyxRQUFRNkMsS0FDdkRXLEVBQUdFLEtBQUssV0FBWSxZQUV4QkYsRUFBR1EsTUFBTXZCLEVBQWMvSSxJQUN2QkEsRUFBRStDLEtBQUsvQyxFQUFFK0MsT0FBUyxHQUVsQm9ILEVBQUtELE9BQU9KLEdBRWhCNUgsRUFBRW5FLEtBQUt1RSxVQUFVcUIsZUFBZTRHLFFBQ2hDWCxFQUFPWSxTQUFTek0sS0FBS3VFLFVBQVVxQixlQUMvQndHLEVBQUtLLFNBQVN6TSxLQUFLdUUsVUFBVXFCLGdCQU1qQ25DLHNCQUFBeEMsVUFBQXlMLHVCQUFBLFNBQXVCL0YsRUFBd0JxRSxFQUF5QkMsRUFBdUJDLEdBQzNGLEdBQUlqSixHQUFJZ0MsRUFBTzBDLEVBQUkzQixLQUNuQi9DLEdBQUUrQyxLQUFLLEdBRVBoRixLQUFLd0UsU0FBU21JLGtCQUFrQjNNLEtBQUt1RSxVQUFVcUIsY0FFL0MsSUFBTWdILEdBQWdCNU0sS0FBS3dFLFNBQVNxSSxjQUFjN00sS0FBS3VFLFVBQVVxQixjQUFlLE1BQ2hGNUYsTUFBS3dFLFNBQVNzSSxnQkFBZ0JGLEVBQWUscUJBQXFCLEVBQ2xFLElBQU1HLEdBQWEvTSxLQUFLd0UsU0FBU3FJLGNBQWM3TSxLQUFLdUUsVUFBVXFCLGNBQWUsTUFDN0U1RixNQUFLd0UsU0FBU3NJLGdCQUFnQkYsRUFBZSxtQkFBbUIsRUFHaEUsS0FBSyxHQUFJN00sR0FBSSxFQUFHQSxFQUFJLEVBQUdBLElBQUssQ0FDeEJrQyxFQUFFNkosSUFBSS9MLEVBQ04sSUFBSWdNLEdBQWlCL0wsS0FBS3dFLFNBQVNxSSxjQUFjRCxFQUFlLE1BQ2hFNU0sTUFBS3dFLFNBQVN3SSxRQUFRakIsRUFBSTlKLEVBQUU2RCxPQUFPLE9BQ25DOUYsS0FBS3dFLFNBQVN5SSxvQkFBb0JsQixFQUFJLGdCQUFpQmhNLEVBQUVtTSxZQUN6RGxNLEtBQUt3RSxTQUFTc0ksZ0JBQWdCZixFQUFJLGlCQUFpQixHQUd2RDlKLEVBQUUrQyxLQUFLLEVBR1AsS0FBSyxHQUFJakYsR0FBSSxFQUFHQSxFQUFJa0MsRUFBRTZKLE1BQU8vTCxJQUFLLENBQzlCLEdBQUlnTSxHQUFpQi9MLEtBQUt3RSxTQUFTcUksY0FBY0UsRUFBWSxNQUM3RC9NLE1BQUt3RSxTQUFTeUksb0JBQW9CbEIsRUFBSSxnQkFBaUJoTSxFQUFFbU0sWUFDekRsTSxLQUFLd0UsU0FBU3NJLGdCQUFnQmYsRUFBSSxpQkFBaUIsR0FJdkQsS0FBTzlKLEVBQUVtRixVQUFZVCxFQUFJM0IsS0FBS29DLFNBQVMsQ0FDbkMsR0FDSTJFLEdBQWlCL0wsS0FBS3dFLFNBQVNxSSxjQUFjRSxFQUFZLFNBQzdEL00sTUFBS3dFLFNBQVN3SSxRQUFRakIsRUFBSzlKLEVBQUUrQyxPQUFRa0gsWUFDckNsTSxLQUFLd0UsU0FBU3lJLG9CQUFvQmxCLEVBQUksZ0JBQWlCOUosRUFBRStDLE9BQU9rSCxZQUNoRWxNLEtBQUt3RSxTQUFTeUksb0JBQW9CbEIsRUFBSSxXQUFZLE1BQ2xEL0wsS0FBS3dFLFNBQVNzSSxnQkFBZ0JmLEVBQUksaUJBQWlCLElBQzlDZCxHQUFVaEosRUFBRW9LLE9BQU9wQixFQUFRLFFBQVlDLEdBQVlqSixFQUFFb0ssT0FBT25CLEVBQVUsU0FDdkVsTCxLQUFLd0UsU0FBU3NJLGdCQUFnQmYsRUFBSSxVQUFVLEdBRTVDYixHQUFZRCxHQUFVaEosRUFBRXFLLFVBQVVwQixFQUFVRCxJQUM1Q2pMLEtBQUt3RSxTQUFTc0ksZ0JBQWdCZixFQUFJLFdBQVcsR0FFakQvTCxLQUFLd0UsU0FBUzBJLE9BQU9uQixFQUFJLFFBQVNmLEVBQWMvSSxJQUNoREEsRUFBRStDLEtBQUsvQyxFQUFFK0MsT0FBUyxLQTlIOUJ2QixzQkFBQTdCLEdBQUNpQixFQUFBbUcsV0FDR0MsU0FBVSxtQkFDVkMsU0FBVSxHQUNWQyxRQUFTNUksRUFBUSxLQUNqQjZJLGNBQWV2RyxFQUFBd0csa0JBQWtCQyxPWDhvQjVCN0csRUFBVyxxQkFBdUcsbUJBQXhFbUcsRUFBa0MsbUJBQXRCL0YsR0FBT2dHLFlBQThCaEcsRUFBT2dHLGFBQThCRCxHQUFPNUgsT0FBcUYsbUJBQXBFK0gsRUFBZ0MsbUJBQXBCbEcsR0FBT21ILFVBQTRCbkgsRUFBT21ILFdBQTRCakIsR0FBTy9ILFVBQ2xQeUMsc0JBRUgsSUFBSW1GLEdBQUlHLElXL29CQXRKLEdBQUFnRSxzQkFBcUJBLEdYc3BCNUIsU0FBUy9ELEVBQVFELEdZanFCdkJDLEVBQUFELFFBQUFZLEdadXFCTSxTQUFTWCxFQUFRRCxHYXZxQnZCQyxFQUFBRCxRQUFBLDJCYjZxQk0sU0FBU0MsRUFBUUQsR2M3cUJ2QkMsRUFBQUQsUUFBQSw4dkJkbXJCTSxTQUFTQyxFQUFRRCxHZW5yQnZCQyxFQUFBRCxRQUFBLElmeXJCTSxTQUFTQyxFQUFRRCxFQUFTYyxHQUUvQixZQUNBLElBQUlxQixHQUFjNUIsTUFBUUEsS0FBSzRCLFlBQWUsU0FBVUMsRUFBWUMsRUFBUUMsRUFBS0MsR0FDN0UsR0FBMkhDLEdBQXZIbkIsRUFBSW9CLFVBQVVDLE9BQVFDLEVBQUl0QixFQUFJLEVBQUlnQixFQUFrQixPQUFURSxFQUFnQkEsRUFBT2hCLE9BQU9xQix5QkFBeUJQLEVBQVFDLEdBQU9DLENBQ3JILElBQXVCLGdCQUFaTSxVQUFvRCxrQkFBckJBLFNBQVFDLFNBQXlCSCxFQUFJRSxRQUFRQyxTQUFTVixFQUFZQyxFQUFRQyxFQUFLQyxPQUNwSCxLQUFLLEdBQUlqQyxHQUFJOEIsRUFBV00sT0FBUyxFQUFHcEMsR0FBSyxFQUFHQSxLQUFTa0MsRUFBSUosRUFBVzlCLE1BQUlxQyxHQUFLdEIsRUFBSSxFQUFJbUIsRUFBRUcsR0FBS3RCLEVBQUksRUFBSW1CLEVBQUVILEVBQVFDLEVBQUtLLEdBQUtILEVBQUVILEVBQVFDLEtBQVNLLEVBQ2hKLE9BQU90QixHQUFJLEdBQUtzQixHQUFLcEIsT0FBT3dCLGVBQWVWLEVBQVFDLEVBQUtLLEdBQUlBLEdBRTVESyxFQUFjekMsTUFBUUEsS0FBS3lDLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpMLFVBQW9ELGtCQUFyQkEsU0FBUU0sU0FBeUIsTUFBT04sU0FBUU0sU0FBU0YsRUFBR0MsSWdCbnNCM0dFLEVBQUF0QyxFQUlPLEdBQ0swRCxFQUFNMUQsRUFBTSxHQUV4QjJELEVBQUEzRCxFQUE2QixHQUk3QjBKLEVBQUEsbUJBQUFBLGtCQUVTakssS0FBQTBFLGFBQWVSLEVBQUFRLGFBR3RCMUUsS0FBQWdHLGdCQUF1QixhQUN2QmhHLEtBQUFrSCxpQkFBd0IsYUFDeEJsSCxLQUFBbU4sV0FBa0IsYUFFbEJuTixLQUFBb04sYUFBdUIsSUFDdkJwTixLQUFBZ0ksVUFBb0IsSUFNcEJoSSxLQUFBbUksV0FBNEIsS0FDNUJuSSxLQUFBb0ksV0FBNEIsS0E2QjlCLE1BbkNtQnBILFFBQUF3QixlQUFJeUgsZUFBQWhKLFVBQUEsVWhCZ3NCZHVFLElnQmhzQlUsU0FBV0MsR0FDMUJ6RixLQUFLb04sYUFBZTNILEVBQ3BCekYsS0FBS2dJLFVBQVl2QyxFQUFNLEdoQmtzQmxCUSxZQUFZLEVBQ1pDLGNBQWMsSWdCOXJCSGxGLE9BQUF3QixlQUFJeUgsZUFBQWhKLFVBQUEsV2hCaXNCZnVFLElnQmpzQlcsU0FBWUMsR0FDNUIsR0FBSXhELEdBQUlnQyxFQUFPd0IsRUFDWHhELEdBQUV5RCxVQUNKMUYsS0FBS21JLFdBQWFsRSxFQUFPd0IsR0FHekJ6RixLQUFLbUksV0FBYSxNaEJvc0JmbEMsWUFBWSxFQUNaQyxjQUFjLElnQmxzQkhsRixPQUFBd0IsZUFBSXlILGVBQUFoSixVQUFBLFdoQnFzQmZ1RSxJZ0Jyc0JXLFNBQVlDLEdBQzVCLEdBQUl4RCxHQUFJZ0MsRUFBT3dCLEVBQ1h4RCxHQUFFeUQsVUFDSjFGLEtBQUtvSSxXQUFhbkUsRUFBT3dCLEdBR3pCekYsS0FBS29JLFdBQWEsTWhCd3NCZm5DLFlBQVksRUFDWkMsY0FBYyxJZ0Jyc0JkK0QsZUFBQWhKLFVBQUFvTSxpQkFBUCxTQUF3Qi9MLEdBQ3RCdEIsS0FBS2dHLGdCQUFrQjFFLEdBR2xCMkksZUFBQWhKLFVBQUFxTSxrQkFBUCxTQUF5QmhNLEdBQ3ZCdEIsS0FBS2tILGlCQUFtQjVGLEdBL0IxQk0sR0FBQ2lCLEVBQUE2RixNQUFNLFVoQnl1QkFqRyxFQUFXLGNBQWU4SyxRQUMxQjlLLEVBQVcscUJBQXNCOEssVUFDbEN0RCxlQUFlaEosVUFBVyxTQUFVLE1nQnB1QjFDVyxHQUFDaUIsRUFBQTZGLE1BQU0sV2hCdXVCQWpHLEVBQVcsY0FBZXpCLFFBQzFCeUIsRUFBVyxxQkFBc0J6QixVQUNsQ2lKLGVBQWVoSixVQUFXLFVBQVcsTWdCaHVCM0NXLEdBQUNpQixFQUFBNkYsTUFBTSxXaEJtdUJBakcsRUFBVyxjQUFlekIsUUFDMUJ5QixFQUFXLHFCQUFzQnpCLFVBQ2xDaUosZUFBZWhKLFVBQVcsVUFBVyxNZ0JsdEI3Q2dKLGlCQTlDc0J4SyxHQUFBd0ssZUFBY0EsR2hCd3dCOUIsU0FBU3ZLLEVBQVFELEdpQm54QnZCQyxFQUFBRCxRQUFBLHFqQ2pCeXhCQSxHQUVNLFNBQVNDLEVBQVFELEdrQjN4QnZCQyxFQUFBRCxRQUFBLG9pRWxCaXlCTSxTQUFTQyxFQUFRRCxFQUFTYyxHQUUvQixZQUNBLElBQUlzRCxHQUFhN0QsTUFBUUEsS0FBSzZELFdBQWMsU0FBVTVCLEVBQUdWLEdBRXJELFFBQVN1QyxNQUFPOUQsS0FBSytELFlBQWM5QixFQURuQyxJQUFLLEdBQUlsQixLQUFLUSxHQUFPQSxFQUFFTCxlQUFlSCxLQUFJa0IsRUFBRWxCLEdBQUtRLEVBQUVSLEdBRW5Ea0IsR0FBRWhCLFVBQWtCLE9BQU5NLEVBQWFQLE9BQU9nRCxPQUFPekMsSUFBTXVDLEdBQUc3QyxVQUFZTSxFQUFFTixVQUFXLEdBQUk2QyxNQUUvRWxDLEVBQWM1QixNQUFRQSxLQUFLNEIsWUFBZSxTQUFVQyxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhuQixFQUFJb0IsVUFBVUMsT0FBUUMsRUFBSXRCLEVBQUksRUFBSWdCLEVBQWtCLE9BQVRFLEVBQWdCQSxFQUFPaEIsT0FBT3FCLHlCQUF5QlAsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpNLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJILEVBQUlFLFFBQVFDLFNBQVNWLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSWpDLEdBQUk4QixFQUFXTSxPQUFTLEVBQUdwQyxHQUFLLEVBQUdBLEtBQVNrQyxFQUFJSixFQUFXOUIsTUFBSXFDLEdBQUt0QixFQUFJLEVBQUltQixFQUFFRyxHQUFLdEIsRUFBSSxFQUFJbUIsRUFBRUgsRUFBUUMsRUFBS0ssR0FBS0gsRUFBRUgsRUFBUUMsS0FBU0ssRUFDaEosT0FBT3RCLEdBQUksR0FBS3NCLEdBQUtwQixPQUFPd0IsZUFBZVYsRUFBUUMsRUFBS0ssR0FBSUEsR0FFNURLLEVBQWN6QyxNQUFRQSxLQUFLeUMsWUFBZSxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixnQkFBWkwsVUFBb0Qsa0JBQXJCQSxTQUFRTSxTQUF5QixNQUFPTixTQUFRTSxTQUFTRixFQUFHQyxJbUJoekIzR0UsRUFBQXRDLEVBSU8sR0FDSzBELEVBQU0xRCxFQUFNLEdBQ1o0RCxFQUFDNUQsRUFBTSxJQUNuQjJDLEVBQUEzQyxFQUFrQyxHQUNsQzJELEVBQUEzRCxFQUE2QixHQUM3QndDLEVBQUF4QyxFQUFvRixHQUNwRjZELEVBQUE3RCxFQUErQixLQUsvQixTQUFZaU4sR0FFUkEsSUFBQSxXQUVBQSxJQUFBLGVBRUFBLElBQUEsb0JBTlEvTixFQUFBK04saUJBQUEvTixFQUFBK04sbUJBQVosSUFBWUEsR0FBQS9OLEVBQUErTixlQW1CWmxLLEVBQUEsU0FBQWdCLEdBOERJLFFBQUFoQixxQkFBb0JpQixHQTlEeEIsR0FBQUUsR0FBQXpFLElBK0RRc0UsR0FBQTFELEtBQUFaLE1BRGdCQSxLQUFBdUUsWUE1RGJ2RSxLQUFBMEUsYUFBZVIsRUFBQVEsYUFDZjFFLEtBQUF3TixlQUFpQkEsRUFPaEJ4TixLQUFBNEwsTUFBdUIzSCxJQUVyQmpFLEtBQUF5TixlQUFpQixHQUFJNUssR0FBQStCLGFBRXJCNUUsS0FBQTBOLGFBQWUsR0FBSTdLLEdBQUErQixhQThDdEI1RSxLQUFBNkUsS0FBdUIySSxFQUFlMUksT0FTckM5RSxLQUFBMk4sUUFBVSxLQXdHVjNOLEtBQUE0TixxQkFBdUIsV0FDM0JuSixFQUFLb0osWUFDTHBKLEVBQUtVLFdBQVdqQixFQUFBUSxhQUFhVSxTQUFVWCxFQUFLcUosTUFDNUNySixFQUFLVSxXQUFXakIsRUFBQVEsYUFBYVUsU0FBVVgsRUFBS3NKLE9BR3hDL04sS0FBQWdPLHFCQUF1QixXQUMzQnZKLEVBQUt3SixZQUNMeEosRUFBS1UsV0FBV2pCLEVBQUFRLGFBQWFVLFNBQVVYLEVBQUtxSixNQUM1Q3JKLEVBQUtVLFdBQVdqQixFQUFBUSxhQUFhVSxTQUFVWCxFQUFLc0osT0FHeEMvTixLQUFBa08sb0JBQXNCLFdBQzFCekosRUFBS29KLFlBQ0xwSixFQUFLVSxXQUFXakIsRUFBQVEsYUFBYVUsU0FBVVgsRUFBS3FKLE1BQzVDckosRUFBS1UsV0FBV2pCLEVBQUFRLGFBQWFVLFNBQVVYLEVBQUtzSixPQUd4Qy9OLEtBQUFtTyxvQkFBc0IsV0FDMUIxSixFQUFLd0osWUFDTHhKLEVBQUtVLFdBQVdqQixFQUFBUSxhQUFhVSxTQUFVWCxFQUFLcUosTUFDNUNySixFQUFLVSxXQUFXakIsRUFBQVEsYUFBYVUsU0FBVVgsRUFBS3NKLE9BbUZoRC9OLEtBQUErRSxrQkFBb0IsU0FBQ0MsR0FDakIsR0FBSS9DLEdBQUlnQyxFQUFPZSxFQUNmLE9BQU8sWUFDSFAsRUFBS1EsUUFBUWhELEtBa0N6QixNQTFUeUM0QixHQUFBUCxvQkFBQWdCLEdBaUJyQ3RELE9BQUF3QixlQUFJYyxvQkFBQXJDLFVBQUEsWW5CbzBCQ3FFLEltQnAwQkwsV0FDSSxNQUFPdEYsTUFBS29PLGVuQnMwQlg1SSxJbUJwMEJMLFNBQWFDLEdBQ0xBLFlBQWV4QixJQUFVd0IsRUFBSUMsWUFDN0IxRixLQUFLcU8sVUFBVXpJLGNBQWNDLE1BQVFKLEVBQUlLLE9BQU8sY0FDaEQ5RixLQUFLb08sY0FBZ0IzSSxFQUNyQnpGLEtBQUt5TixlQUFlMUgsS0FBS04sSUFFN0J6RixLQUFLZ0csaUJBQWtCa0YsU0FBVWxMLEtBQUtrTCxTQUFVRCxPQUFRakwsS0FBS2lMLFVuQnMwQjVEaEYsWUFBWSxFQUNaQyxjQUFjLEltQm4wQm5CbEYsT0FBQXdCLGVBQUljLG9CQUFBckMsVUFBQSxVbkJ1MEJDcUUsSW1CdjBCTCxXQUNJLE1BQU90RixNQUFLc08sYW5CeTBCWDlJLEltQnYwQkwsU0FBV0MsR0FDSEEsWUFBZXhCLElBQVV3QixFQUFJQyxZQUM3QjFGLEtBQUt1TyxRQUFRM0ksY0FBY0MsTUFBUUosRUFBSUssT0FBTyxjQUM5QzlGLEtBQUtzTyxZQUFjN0ksRUFDbkJ6RixLQUFLME4sYUFBYTNILEtBQUtOLElBRTNCekYsS0FBS2dHLGlCQUFrQmtGLFNBQVVsTCxLQUFLa0wsU0FBVUQsT0FBUWpMLEtBQUtpTCxVbkJ5MEI1RGhGLFlBQVksRUFDWkMsY0FBYyxJbUJ0MEJuQmxGLE9BQUF3QixlQUFJYyxvQkFBQXJDLFVBQUEsU25CeTBCQ3FFLEltQnowQkwsV0FDSSxNQUFPdEYsTUFBS21HLHFCQUF1Qiw4UG5CMjBCbENYLEltQnowQkwsU0FBVUMsR0FDTnpGLEtBQUttRyxvQkFBc0JWLEduQjIwQjFCUSxZQUFZLEVBQ1pDLGNBQWMsSW1CcnpCWjVDLG9CQUFBckMsVUFBQTZGLGlCQUFQLFNBQXdCakMsRUFBc0IySixHQUE5QyxHQUFBL0osR0FBQXpFLElBQThDLFVBQUF3TyxPQUFBLEdBQ3RCLE1BQWhCeE8sS0FBSzJOLFNBQ0xjLGFBQWF6TyxLQUFLMk4sU0FFbEJhLEVBQ0F4TyxLQUFLMk4sUUFBVWUsV0FBVyxXQUFRakssRUFBS2tLLG1CQUFtQjlKLElBQVMsS0FFbkU3RSxLQUFLMk8sbUJBQW1COUosSUFJeEJ2QixvQkFBQXJDLFVBQUEwTixtQkFBUixTQUEyQjlKLEdBRXZCLE9BREE3RSxLQUFLNkUsS0FBT0EsRUFDSjdFLEtBQUs2RSxNQUNULElBQUsySSxHQUFlb0IsR0FDaEIsR0FBSUMsR0FBSTFLLEVBQUVuRSxLQUFLdU8sUUFBUTNJLGVBQWVrSixXQUFXQyxJQUNqRDVLLEdBQUVuRSxLQUFLdUUsVUFBVXFCLGVBQWVvSixLQUFLLGdCQUFnQkMsS0FBTUYsS0FBUUYsSUFDbkUxSyxFQUFFbkUsS0FBS3VFLFVBQVVxQixlQUFlb0IsU0FBUyxlQUN6QyxNQUNKLEtBQUt3RyxHQUFlMEIsS0FDaEIsR0FBSUMsR0FBUWhMLEVBQUVuRSxLQUFLcU8sVUFBVXpJLGVBQWVrSixXQUFXQyxJQUN2RDVLLEdBQUVuRSxLQUFLdUUsVUFBVXFCLGVBQWVvSixLQUFLLGdCQUFnQkMsS0FBTUYsS0FBUUksSUFDbkVoTCxFQUFFbkUsS0FBS3VFLFVBQVVxQixlQUFlb0IsU0FBUyxlQUN6QyxNQUNKLEtBQUt3RyxHQUFlMUksT0FDaEJYLEVBQUVuRSxLQUFLdUUsVUFBVXFCLGVBQWVxQixZQUFZLGdCQUdwRGpILEtBQUttRixXQUFXakIsRUFBQVEsYUFBYVUsU0FBVXBGLEtBQUs4TixNQUM1QzlOLEtBQUttRixXQUFXakIsRUFBQVEsYUFBYVUsU0FBVXBGLEtBQUsrTixPQUd6Q3pLLG9CQUFBckMsVUFBQW1PLHVCQUFQLFNBQThCM0osR0FDMUIsR0FBR3pGLEtBQUtzRyxNQUFNQyxLQUFLZCxHQUFNLENBQ3JCLEdBQUk1RSxHQUFJb0QsRUFBTyxHQUFJdUMsTUFBS2YsR0FDcEI1RSxHQUFFNkUsWUFDeUJlLFNBQXZCekcsS0FBS29PLGNBQStCcE8sS0FBS29PLGNBQWdCdk4sRUFDdERiLEtBQUtvTyxjQUFjNUksSUFBSTNFLEVBQUU2RixZQUNoQzFHLEtBQUtxUCxnQkFDTHJQLEtBQUs4TixLQUFLOUksS0FBT2hGLEtBQUtvTyxjQUN0QnBPLEtBQUs2TixZQUNMN04sS0FBS3lOLGVBQWUxSCxLQUFLL0YsS0FBS29PLGVBQzlCcE8sS0FBSzZHLG9CQUtWdkQsb0JBQUFyQyxVQUFBcU8scUJBQVAsU0FBNEI3SixHQUN4QixHQUFHekYsS0FBS3NHLE1BQU1DLEtBQUtkLEdBQU0sQ0FDckIsR0FBSTVFLEdBQUlvRCxFQUFPLEdBQUl1QyxNQUFLZixHQUNwQjVFLEdBQUU2RSxZQUN1QmUsU0FBckJ6RyxLQUFLc08sWUFBNkJ0TyxLQUFLc08sWUFBY3pOLEVBQ2xEYixLQUFLc08sWUFBWTlJLElBQUkzRSxFQUFFNkYsWUFDOUIxRyxLQUFLdVAsa0JBQ0x2UCxLQUFLK04sS0FBSy9JLEtBQU9oRixLQUFLc08sWUFDdEJ0TyxLQUFLaU8sWUFDTGpPLEtBQUswTixhQUFhM0gsS0FBSy9GLEtBQUtzTyxhQUM1QnRPLEtBQUs2RyxvQkFLVHZELG9CQUFBckMsVUFBQWdOLFVBQVIsV0FDSWpPLEtBQUs4TixLQUFLOUksS0FBT2YsRUFBT2pFLEtBQUsrTixLQUFLL0ksTUFDbENoRixLQUFLOE4sS0FBSzlJLEtBQUt3SyxVQUFXcEksTUFBUyxLQUcvQjlELG9CQUFBckMsVUFBQTRNLFVBQVIsV0FDSTdOLEtBQUsrTixLQUFLL0ksS0FBT2YsRUFBT2pFLEtBQUs4TixLQUFLOUksTUFDbENoRixLQUFLK04sS0FBSy9JLEtBQUt5SyxLQUFNckksTUFBUyxLQUczQjlELG9CQUFBckMsVUFBQWtFLFdBQVAsU0FBa0JOLEVBQW9COEIsR0FFbEMsT0FEQUEsRUFBSXhCLFdBQVdOLEdBQ1BBLEdBQ0osSUFBS1gsR0FBQVEsYUFBYVUsU0FDZHBGLEtBQUs2RyxtQkFLVnZELG9CQUFBckMsVUFBQWtHLE9BQVAsV0FDUW5ILEtBQUs4TixLQUFLakosTUFBUVgsRUFBQVEsYUFBYVUsVUFBWXBGLEtBQUsrTixLQUFLbEosTUFBUVgsRUFBQVEsYUFBYVUsVUFDMUVwRixLQUFLOE4sS0FBSzlJLEtBQUtvQyxNQUFNcEgsS0FBSzhOLEtBQUs5SSxLQUFLb0MsUUFBVSxHQUM5Q3BILEtBQUs2TixZQUNMN04sS0FBSzZHLG1CQUVMN0csS0FBSzhOLEtBQUszRyxTQUNWbkgsS0FBSytOLEtBQUs1RyxXQUlYN0Qsb0JBQUFyQyxVQUFBb0csT0FBUCxXQUNRckgsS0FBSzhOLEtBQUtqSixNQUFRWCxFQUFBUSxhQUFhVSxVQUFZcEYsS0FBSytOLEtBQUtsSixNQUFRWCxFQUFBUSxhQUFhVSxVQUMxRXBGLEtBQUs4TixLQUFLOUksS0FBS29DLE1BQU1wSCxLQUFLOE4sS0FBSzlJLEtBQUtvQyxRQUFVLEdBQzlDcEgsS0FBSzZOLFlBQ0w3TixLQUFLNkcsbUJBRUw3RyxLQUFLOE4sS0FBS3pHLFNBQ1ZySCxLQUFLK04sS0FBSzFHLFdBNEJWL0Qsb0JBQUFyQyxVQUFBMkYsUUFBUixXQUNJNUcsS0FBS2tILGtCQUFtQmdFLFNBQVVsTCxLQUFLa0wsU0FBVUQsT0FBUWpMLEtBQUtpTCxVQUUxRDNILG9CQUFBckMsVUFBQXFHLFlBQVIsU0FBb0JDLEdBQ0csSUFBaEJBLEVBQU1DLFFBQ0x4SCxLQUFLMk8sbUJBQW1CbkIsRUFBZTFJLFFBQ3ZDOUUsS0FBSzRHLFlBSWJ0RCxvQkFBQXJDLFVBQUF3RyxTQUFBLFdBQ0l6SCxLQUFLOE4sS0FBSzlJLEtBQU9mLEVBQU9qRSxLQUFLa0wsVUFFN0JsTCxLQUFLNk4sWUFFTDdOLEtBQUs4TixLQUFLcEcsdUJBQXVCMUgsS0FBSzROLHNCQUN0QzVOLEtBQUsrTixLQUFLckcsdUJBQXVCMUgsS0FBS2dPLHNCQUN0Q2hPLEtBQUs4TixLQUFLbkcsc0JBQXNCM0gsS0FBS2tPLHFCQUNyQ2xPLEtBQUsrTixLQUFLcEcsc0JBQXNCM0gsS0FBS21PLHNCQUd6QzdLLG9CQUFBckMsVUFBQTZHLGdCQUFBLGNBQUFyRCxHQUFBekUsSUFDSUEsTUFBSzZHLGlCQUVMN0csS0FBS3VPLFFBQVEzSSxjQUFjbUMsTUFBTSxXQUFhL0gsS0FBS2dJLFVBQ25EaEksS0FBS3FPLFVBQVV6SSxjQUFjbUMsTUFBTSxXQUFhL0gsS0FBS2dJLFVBRXJEaEksS0FBS3FPLFVBQVV6SSxjQUFjcUMsaUJBQWlCLFFBQVMsV0FBUXhELEVBQUtxQyxpQkFBaUIwRyxFQUFlMEIsUUFDcEdsUCxLQUFLdU8sUUFBUTNJLGNBQWNxQyxpQkFBaUIsUUFBUyxXQUFReEQsRUFBS3FDLGlCQUFpQjBHLEVBQWVvQixNQUVsRzVPLEtBQUtxTyxVQUFVekksY0FBY3FDLGlCQUFpQixRQUFTLFNBQUNWLEdBQVk5QyxFQUFLMkssdUJBQXVCM0ssRUFBSzRKLFVBQVV6SSxjQUFjQyxTQUM3SDdGLEtBQUt1TyxRQUFRM0ksY0FBY3FDLGlCQUFpQixRQUFTLFNBQUNWLEdBQVk5QyxFQUFLNksscUJBQXFCN0ssRUFBSzhKLFFBQVEzSSxjQUFjQyxTQUV2SDdGLEtBQUt1TyxRQUFRM0ksY0FBY3FDLGlCQUFpQixVQUFXLFNBQUNWLEdBQVk5QyxFQUFLNkMsWUFBWUMsTUFHekZqRSxvQkFBQXJDLFVBQUEyRyxZQUFBLFNBQVlDLEtBR1p2RSxvQkFBQXJDLFVBQUFpSCxZQUFBLGFBSUE1RSxvQkFBQXJDLFVBQUFvSCxXQUFBLFNBQVd4QyxHQUNIQSxJQUNBN0YsS0FBS2lMLE9BQVNwRixFQUFNb0YsT0FDcEJqTCxLQUFLa0wsU0FBV3JGLEVBQU1xRixXQUk5QjVILG9CQUFBckMsVUFBQXFILFNBQUEsU0FBU3hILEdBQ0wsTUFBZSxPQUFYQSxFQUFFK0UsTUFDSyxnQkFFTC9FLEVBQUUrRSxNQUFNcUYsbUJBQW9CakgsSUFBWW5ELEVBQUUrRSxNQUFNcUYsU0FBU3hGLFVBRzNEMUYsS0FBS21JLFlBQWNuSSxLQUFLbUksV0FBV0ksUUFBUXpILEVBQUUrRSxNQUFNcUYsVUFDNUMseUJBQTJCbEwsS0FBS21JLFdBQVdyQyxPQUFPLGNBRXpEOUYsS0FBS29JLFlBQWNwSSxLQUFLb0ksV0FBV0ksU0FBUzFILEVBQUUrRSxNQUFNcUYsVUFDN0Msd0JBQTBCbEwsS0FBS29JLFdBQVd0QyxPQUFPLGNBRXREaEYsRUFBRStFLE1BQU1vRixpQkFBa0JoSCxJQUFZbkQsRUFBRStFLE1BQU1vRixPQUFPdkYsVUFHdkQxRixLQUFLbUksWUFBY25JLEtBQUttSSxXQUFXSSxRQUFRekgsRUFBRStFLE1BQU1vRixRQUM1Qyx5QkFBMkJqTCxLQUFLbUksV0FBV3JDLE9BQU8sY0FFekQ5RixLQUFLb0ksWUFBY3BJLEtBQUtvSSxXQUFXSSxTQUFTMUgsRUFBRStFLE1BQU1vRixRQUM3Qyx3QkFBMEJqTCxLQUFLb0ksV0FBV3RDLE9BQU8sY0FFckQsS0FSSSxlQVRBLGdCQW9CZnhDLG9CQUFBckMsVUFBQTRGLGVBQUEsV0FDSTdHLEtBQUs4TixLQUFLakgsZUFBZTdHLEtBQUsrRSxrQkFBbUIvRSxLQUFLaUwsT0FBUWpMLEtBQUtrTCxTQUFVbEwsS0FBS21JLFdBQVluSSxLQUFLb0ksWUFDbkdwSSxLQUFLK04sS0FBS2xILGVBQWU3RyxLQUFLK0Usa0JBQW1CL0UsS0FBS2lMLE9BQVFqTCxLQUFLa0wsU0FBVWxMLEtBQUttSSxXQUFZbkksS0FBS29JLGFBVXZHOUUsb0JBQUFyQyxVQUFBZ0UsUUFBQSxTQUFRRCxHQUNKLE9BQVFoRixLQUFLNkUsTUFDVCxJQUFLMkksR0FBZTBCLEtBQ2hCbFAsS0FBS2tMLFNBQVdsRyxFQUNoQmhGLEtBQUtxUCxnQkFDTHJQLEtBQUs4RyxpQkFBaUIwRyxFQUFlb0IsR0FDckMsTUFDSixLQUFLcEIsR0FBZW9CLEdBQ2hCNU8sS0FBS2lMLE9BQVNqRyxFQUNkaEYsS0FBS3VQLGtCQUNMdlAsS0FBSzhHLGlCQUFpQjBHLEVBQWUxSSxRQUFRLEdBR3JEOUUsS0FBSzRHLFVBQ0w1RyxLQUFLNkcsa0JBR0R2RCxvQkFBQXJDLFVBQUFvTyxjQUFSLFdBQ1FyUCxLQUFLaUwsUUFBVWpMLEtBQUtrTCxTQUFTM0MsUUFBUXZJLEtBQUtpTCxVQUMxQ2pMLEtBQUtpTCxPQUFTaEgsRUFBT2pFLEtBQUtrTCxVQUMxQmxMLEtBQUtpTCxPQUFPd0UsS0FBTTNELElBQU8sTUFJekJ4SSxvQkFBQXJDLFVBQUFzTyxnQkFBUixXQUNRdlAsS0FBS2tMLFVBQVlsTCxLQUFLa0wsU0FBU3hGLFdBQWExRixLQUFLaUwsT0FBT3pDLFNBQVN4SSxLQUFLa0wsWUFDdEVsTCxLQUFLa0wsU0FBV2pILEVBQU9qRSxLQUFLaUwsUUFDNUJqTCxLQUFLa0wsU0FBU3NFLFVBQVcxRCxJQUFPLE1BM1N4Q2xLLEdBQUNpQixFQUFBNEYsU25CNmpDSWhHLEVBQVcsY0FBZXpCLFNBQzNCc0Msb0JBQW9CckMsVUFBVyxpQkFBa0IsUW1CNWpDckRXLEdBQUNpQixFQUFBNEYsU25CK2pDSWhHLEVBQVcsY0FBZXpCLFNBQzNCc0Msb0JBQW9CckMsVUFBVyxlQUFnQixRbUI5akNuRFcsR0FBQ2lCLEVBQUE2RixRbkJpa0NJakcsRUFBVyxjQUFlekIsU0FDM0JzQyxvQkFBb0JyQyxVQUFXLFdBQVksTW1CcmpDL0NXLEdBQUNpQixFQUFBNkYsUW5Cd2pDSWpHLEVBQVcsY0FBZXpCLFNBQzNCc0Msb0JBQW9CckMsVUFBVyxTQUFVLE1tQjVpQzdDVyxHQUFDaUIsRUFBQTZGLFFuQitpQ0lqRyxFQUFXLGNBQWV6QixTQUMzQnNDLG9CQUFvQnJDLFVBQVcsUUFBUyxNbUJ2aUM1Q1csR0FBQ2lCLEVBQUE4RixhQUFhLFNBQVV6RixFQUFBTSxtQm5CMGlDbkJmLEVBQVcsY0FBZ0csbUJBQXhFbUcsRUFBa0MsbUJBQXRCL0YsR0FBT2dHLFlBQThCaEcsRUFBT2dHLGFBQThCRCxHQUFPNUgsU0FDaklzQyxvQkFBb0JyQyxVQUFXLFVBQVcsUW1CemlDOUNXLEdBQUNpQixFQUFBOEYsYUFBYSxXQUFZekYsRUFBQU0sbUJuQjRpQ3JCZixFQUFXLGNBQWdHLG1CQUF4RXNHLEVBQWtDLG1CQUF0QmxHLEdBQU9nRyxZQUE4QmhHLEVBQU9nRyxhQUE4QkUsR0FBTy9ILFNBQ2pJc0Msb0JBQW9CckMsVUFBVyxZQUFhLFFtQjFpQ2hEVyxHQUFDaUIsRUFBQWlHLFVBQVUsT0FBUTVGLEVBQUFNLG1CbkI2aUNkZixFQUFXLGNBQTBJLG1CQUFsSHFILEVBQXVELG1CQUEzQzVHLEdBQXFCTSxtQkFBcUNOLEVBQXFCTSxvQkFBcUNzRyxHQUFPOUksU0FDM0tzQyxvQkFBb0JyQyxVQUFXLE9BQVEsUW1CNWlDM0NXLEdBQUNpQixFQUFBaUcsVUFBVSxPQUFRNUYsRUFBQU0sbUJuQitpQ2RmLEVBQVcsY0FBMEksbUJBQWxIc0gsRUFBdUQsbUJBQTNDN0csR0FBcUJNLG1CQUFxQ04sRUFBcUJNLG9CQUFxQ3VHLEdBQU8vSSxTQUMzS3NDLG9CQUFvQnJDLFVBQVcsT0FBUSxRbUJwbkMvQ3FDLG9CQUFBMUIsR0FBQ2lCLEVBQUFtRyxXQUNHQyxTQUFVLGlCQUNWQyxTQUFVM0ksRUFBUSxJQUNsQjRJLFFBQVM1SSxFQUFRLElBQWdDQSxFQUFRLEtBQ3pENkksY0FBZXZHLEVBQUF3RyxrQkFBa0JDLEtBQ2pDQyxZQUNNQyxRQUFTekcsRUFBQTBHLGtCQUFtQkMsWUFBYTdHLEVBQUE4RyxXQUFXLFdBQU0sTUFBQXJHLHVCQUFzQnNHLE9BQU8sSUFDdkZKLFFBQVN6RyxFQUFBOEcsY0FBZUgsWUFBYTdHLEVBQUE4RyxXQUFXLFdBQU0sTUFBQXJHLHVCQUFzQnNHLE9BQU8sTW5CeW5DcEZuSCxFQUFXLHFCQUF1RyxtQkFBeEVpTixFQUFrQyxtQkFBdEI3TSxHQUFPZ0csWUFBOEJoRyxFQUFPZ0csYUFBOEI2RyxHQUFPMU8sVUFDeElzQyxvQkFFSCxJQUFJc0YsR0FBSUcsRUFBSWUsRUFBSUMsRUFBSTJGLEdtQnpuQ2dCdEwsRUFBQTZGLGVBQTVCeEssR0FBQTZELG9CQUFtQkEsR25CZ29DMUIsU0FBUzVELEVBQVFELEdvQmxxQ3ZCQyxFQUFBRCxRQUFBO0VwQndxQ0EiLCJmaWxlIjoiY3RuZy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvZm9ybXNcIiksIHJlcXVpcmUoXCJtb21lbnRcIiksIHJlcXVpcmUoXCJqcXVlcnlcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQGFuZ3VsYXIvY29yZVwiLCBcIkBhbmd1bGFyL2NvbW1vblwiLCBcIkBhbmd1bGFyL2Zvcm1zXCIsIFwibW9tZW50XCIsIFwianF1ZXJ5XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvZm9ybXNcIiksIHJlcXVpcmUoXCJtb21lbnRcIiksIHJlcXVpcmUoXCJqcXVlcnlcIikpIDogZmFjdG9yeShyb290W1wiQGFuZ3VsYXIvY29yZVwiXSwgcm9vdFtcIkBhbmd1bGFyL2NvbW1vblwiXSwgcm9vdFtcIkBhbmd1bGFyL2Zvcm1zXCJdLCByb290W1wibW9tZW50XCJdLCByb290W1wianF1ZXJ5XCJdKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzEwX18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2Zvcm1zXCIpLCByZXF1aXJlKFwibW9tZW50XCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBhbmd1bGFyL2NvcmVcIiwgXCJAYW5ndWxhci9jb21tb25cIiwgXCJAYW5ndWxhci9mb3Jtc1wiLCBcIm1vbWVudFwiLCBcImpxdWVyeVwiXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2Zvcm1zXCIpLCByZXF1aXJlKFwibW9tZW50XCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBhbmd1bGFyL2NvcmVcIl0sIHJvb3RbXCJAYW5ndWxhci9jb21tb25cIl0sIHJvb3RbXCJAYW5ndWxhci9mb3Jtc1wiXSwgcm9vdFtcIm1vbWVudFwiXSwgcm9vdFtcImpxdWVyeVwiXSk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzJfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMF9fKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoKGZ1bmN0aW9uKG1vZHVsZXMpIHtcblx0Ly8gQ2hlY2sgYWxsIG1vZHVsZXMgZm9yIGRlZHVwbGljYXRlZCBtb2R1bGVzXG5cdGZvcih2YXIgaSBpbiBtb2R1bGVzKSB7XG5cdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZHVsZXMsIGkpKSB7XG5cdFx0XHRzd2l0Y2godHlwZW9mIG1vZHVsZXNbaV0pIHtcblx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOiBicmVhaztcblx0XHRcdGNhc2UgXCJvYmplY3RcIjpcblx0XHRcdFx0Ly8gTW9kdWxlIGNhbiBiZSBjcmVhdGVkIGZyb20gYSB0ZW1wbGF0ZVxuXHRcdFx0XHRtb2R1bGVzW2ldID0gKGZ1bmN0aW9uKF9tKSB7XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBfbS5zbGljZSgxKSwgZm4gPSBtb2R1bGVzW19tWzBdXTtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGEsYixjKSB7XG5cdFx0XHRcdFx0XHRmbi5hcHBseSh0aGlzLCBbYSxiLGNdLmNvbmNhdChhcmdzKSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fShtb2R1bGVzW2ldKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0Ly8gTW9kdWxlIGlzIGEgY29weSBvZiBhbm90aGVyIG1vZHVsZVxuXHRcdFx0XHRtb2R1bGVzW2ldID0gbW9kdWxlc1ttb2R1bGVzW2ldXTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtb2R1bGVzO1xufShbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgZGF0ZXBpY2tlcl9tb2R1bGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0ZXhwb3J0cy5EYXRlUGlja2VyTW9kdWxlID0gZGF0ZXBpY2tlcl9tb2R1bGVfMS5EYXRlUGlja2VyTW9kdWxlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgY29tbW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xyXG5cdHZhciBmb3Jtc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgZGF0ZXBpY2tlcl9jb21wb25lbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XHJcblx0dmFyIGR1YWxwaWNrZXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcclxuXHR2YXIgY2FsZW5kYXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBjYWxlbmRhcl9ncmlkX2NvbXBvbmVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxuXHR2YXIgRGF0ZVBpY2tlck1vZHVsZSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIERhdGVQaWNrZXJNb2R1bGUoKSB7XHJcblx0ICAgIH1cclxuXHQgICAgRGF0ZVBpY2tlck1vZHVsZSA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLk5nTW9kdWxlKHtcclxuXHQgICAgICAgICAgICBleHBvcnRzOiBbXHJcblx0ICAgICAgICAgICAgICAgIGRhdGVwaWNrZXJfY29tcG9uZW50XzEuRGF0ZVBpY2tlckNvbXBvbmVudCxcclxuXHQgICAgICAgICAgICAgICAgZHVhbHBpY2tlcl9jb21wb25lbnRfMS5EdWFsUGlja2VyQ29tcG9uZW50LFxyXG5cdCAgICAgICAgICAgIF0sXHJcblx0ICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXHJcblx0ICAgICAgICAgICAgICAgIGRhdGVwaWNrZXJfY29tcG9uZW50XzEuRGF0ZVBpY2tlckNvbXBvbmVudCxcclxuXHQgICAgICAgICAgICAgICAgZHVhbHBpY2tlcl9jb21wb25lbnRfMS5EdWFsUGlja2VyQ29tcG9uZW50LFxyXG5cdCAgICAgICAgICAgICAgICBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCxcclxuXHQgICAgICAgICAgICAgICAgY2FsZW5kYXJfZ3JpZF9jb21wb25lbnRfMS5DYWxlbmRhckdyaWRDb21wb25lbnRdLFxyXG5cdCAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb25fMS5Db21tb25Nb2R1bGUsIGZvcm1zXzEuRm9ybXNNb2R1bGVdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtdKVxyXG5cdCAgICBdLCBEYXRlUGlja2VyTW9kdWxlKTtcclxuXHQgICAgcmV0dXJuIERhdGVQaWNrZXJNb2R1bGU7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkRhdGVQaWNrZXJNb2R1bGUgPSBEYXRlUGlja2VyTW9kdWxlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yX187XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0fTtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcblx0dmFyIGNhbGVuZGFyX2NvbXBvbmVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgY2FsZW5kYXJfbW9kZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcclxuXHR2YXIgJCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xyXG5cdHZhciBmb3Jtc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgZGF0ZXBpY2tlcl9iYXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcclxuXHQoZnVuY3Rpb24gKERhdGVQaWNrZXJNb2RlKSB7XHJcblx0ICAgIERhdGVQaWNrZXJNb2RlW0RhdGVQaWNrZXJNb2RlW1wiVmlzaWJsZVwiXSA9IDBdID0gXCJWaXNpYmxlXCI7XHJcblx0ICAgIERhdGVQaWNrZXJNb2RlW0RhdGVQaWNrZXJNb2RlW1wiSGlkZGVuXCJdID0gMV0gPSBcIkhpZGRlblwiO1xyXG5cdH0pKGV4cG9ydHMuRGF0ZVBpY2tlck1vZGUgfHwgKGV4cG9ydHMuRGF0ZVBpY2tlck1vZGUgPSB7fSkpO1xyXG5cdHZhciBEYXRlUGlja2VyTW9kZSA9IGV4cG9ydHMuRGF0ZVBpY2tlck1vZGU7XHJcblx0dmFyIERhdGVQaWNrZXJDb21wb25lbnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoRGF0ZVBpY2tlckNvbXBvbmVudCwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gRGF0ZVBpY2tlckNvbXBvbmVudChteUVsZW1lbnQsIHJlbmRlcmVyKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XHJcblx0ICAgICAgICB0aGlzLm15RWxlbWVudCA9IG15RWxlbWVudDtcclxuXHQgICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHQgICAgICAgIC8qKiBFbnVtIEFjY2Vzc29ycyBmb3IgSFRNTCAqL1xyXG5cdCAgICAgICAgdGhpcy5DYWxlbmRhck1vZGUgPSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlO1xyXG5cdCAgICAgICAgdGhpcy5EYXRlUGlja2VyTW9kZSA9IERhdGVQaWNrZXJNb2RlO1xyXG5cdCAgICAgICAgdGhpcy5kYXRlQ2hhbmdlID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuXHQgICAgICAgIHRoaXMubW9kZSA9IERhdGVQaWNrZXJNb2RlLkhpZGRlbjtcclxuXHQgICAgICAgIHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG5cdCAgICAgICAgICAgIHZhciBkID0gbW9tZW50KGRhdGUpO1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLnNldERhdGUoZCk7XHJcblx0ICAgICAgICAgICAgfTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLm1vbnRoQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLnllYXJDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgfVxyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB7XHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlVmFsdWU7XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIG1vbWVudCAmJiB2YWwuaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9IHZhbC5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVWYWx1ZSA9IHZhbDtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodmFsKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UodmFsKTtcclxuXHQgICAgICAgIH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWF0Y2hcIiwge1xyXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWREYXRlRXhwcmVzc2lvbiB8fCAvXigoMD9bMTM1NzhdfDEwfDEyKSgtfFxcLykoKFsxLTldKXwoMFsxLTldKXwoWzEyXSkoWzAtOV0/KXwoM1swMV0/KSkoLXxcXC8pKCgxOSkoWzItOV0pKFxcZHsxfSl8KDIwKShbMDFdKShcXGR7MX0pfChbODkwMV0pKFxcZHsxfSkpfCgwP1syNDY5XXwxMSkoLXxcXC8pKChbMS05XSl8KDBbMS05XSl8KFsxMl0pKFswLTldPyl8KDNbMF0/KSkoLXxcXC8pKCgxOSkoWzItOV0pKFxcZHsxfSl8KDIwKShbMDFdKShcXGR7MX0pfChbODkwMV0pKFxcZHsxfSkpKSQvO1xyXG5cdCAgICAgICAgfSxcclxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgICAgIHRoaXMudmFsaWREYXRlRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAodmFsKTtcclxuXHQgICAgICAgIH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5vbkRhdGVTdHJpbmdDaGFuZ2UgPSBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICBpZiAodGhpcy5tYXRjaC50ZXN0KHZhbCkpIHtcclxuXHQgICAgICAgICAgICB2YXIgbSA9IG1vbWVudChuZXcgRGF0ZSh2YWwpKTtcclxuXHQgICAgICAgICAgICBpZiAodGhpcy5kYXRlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVWYWx1ZSA9IG07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVWYWx1ZS5zZXQobS50b09iamVjdCgpKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodGhpcy5kYXRlVmFsdWUpO1xyXG5cdCAgICAgICAgICAgIGlmIChtLmlzVmFsaWQoKSkge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNhbC5kYXRlID0gdGhpcy5kYXRlVmFsdWU7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNhbC5kYXRlID0gbW9tZW50KCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHRoaXMudG91Y2hlZCgpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHZhbCk7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jaGFuZ2VHbG9iYWxNb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuXHQgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcblx0ICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgRGF0ZVBpY2tlck1vZGUuVmlzaWJsZTpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpO1xyXG5cdCAgICAgICAgICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmFkZENsYXNzKFwiY3QtZHAtYWN0aXZlXCIpO1xyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgICAgICBjYXNlIERhdGVQaWNrZXJNb2RlLkhpZGRlbjpcclxuXHQgICAgICAgICAgICAgICAgJCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhcImN0LWRwLWFjdGl2ZVwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUudG91Y2hlZCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMucHJvcGFnYXRlVG91Y2hlZCh0aGlzLmRhdGUpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jaGFuZ2VNb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsLmNoYW5nZU1vZGUobW9kZSk7XHJcblx0ICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXI6XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmdvUHJldiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLmNhbC5tb2RlID09IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5kYXRlLm1vbnRoKHRoaXMuY2FsLmRhdGUubW9udGgoKSAtIDEpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsLmdvUHJldigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5nb05leHQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICBpZiAodGhpcy5jYWwubW9kZSA9PSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5jYWwuZGF0ZS5tb250aCh0aGlzLmNhbC5kYXRlLm1vbnRoKCkgKyAxKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5nb05leHQoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY2xvc2VQaWNrZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHQgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gOSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLmRhdGUgaW5zdGFuY2VvZiBtb21lbnQgJiYgdGhpcy5kYXRlLmlzVmFsaWQoKSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsLmRhdGUgPSBtb21lbnQodGhpcy5kYXRlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsLmRhdGUgPSBtb21lbnQoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRoaXMuY2FsLnN1YnNjcmliZVRvQ2hhbmdlTW9udGgodGhpcy5tb250aENoYW5nZUxpc3RlbmVyKTtcclxuXHQgICAgICAgIHRoaXMuY2FsLnN1YnNjcmliZVRvQ2hhbmdlWWVhcih0aGlzLnllYXJDaGFuZ2VMaXN0ZW5lcik7XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKGlucHV0cykge1xyXG5cdCAgICAgICAgLy8gY29uc29sZS5sb2coJ25nT25DaGFuZ2VzJyk7XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc3R5bGVbJ3otaW5kZXgnXSA9IHRoaXMuekluZGV4VmFsO1xyXG5cdCAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKCkgeyBfdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLlZpc2libGUpOyB9KTtcclxuXHQgICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5vbkRhdGVTdHJpbmdDaGFuZ2UoX3RoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSk7IH0pO1xyXG5cdCAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHsgX3RoaXMuY2xvc2VQaWNrZXIoZXZlbnQpOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuc2V0RGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcblx0ICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgRGF0ZVBpY2tlck1vZGUuVmlzaWJsZTpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy50b3VjaGVkKCk7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pO1xyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckNhbGVuZGFyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5jYWwucmVuZGVyQ2FsZW5kYXIodGhpcy5kYXRlQ2xpY2tMaXN0ZW5lciwgdGhpcy5kYXRlLCB0aGlzLmRhdGUsIHRoaXMubWluRGF0ZVZhbCwgdGhpcy5tYXhEYXRlVmFsKTtcclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cdCAgICAgICAgaWYgKHZhbHVlKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlID0gdmFsdWU7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gKGMpIHtcclxuXHQgICAgICAgIGlmICghKGMudmFsdWUgaW5zdGFuY2VvZiBtb21lbnQpIHx8ICFjLnZhbHVlLmlzVmFsaWQoKSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBcIkludmFsaWQgRGF0ZVwiO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgaWYgKHRoaXMubWluRGF0ZVZhbCAmJiB0aGlzLm1pbkRhdGVWYWwuaXNBZnRlcihjLnZhbHVlKSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBcIkRhdGUgY2Fubm90IGJlIGJlZm9yZSBcIiArIHRoaXMubWluRGF0ZVZhbC5mb3JtYXQoXCJtbS9ERC95eXl5XCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgaWYgKHRoaXMubWF4RGF0ZVZhbCAmJiB0aGlzLm1heERhdGVWYWwuaXNCZWZvcmUoYy52YWx1ZSkpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gXCJEYXRlIGNhbm5vdCBiZSBhZnRlciBcIiArIHRoaXMubWF4RGF0ZVZhbC5mb3JtYXQoXCJtbS9ERC95eXl5XCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIG51bGw7XHJcblx0ICAgIH07XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLk91dHB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlQ2hhbmdlXCIsIHZvaWQgMCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLklucHV0KCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVcIiwgbnVsbCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLklucHV0KCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1hdGNoXCIsIG51bGwpO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db250ZW50Q2hpbGQoJ2RhdGUnKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsICh0eXBlb2YgKF9hID0gdHlwZW9mIGNvcmVfMS5FbGVtZW50UmVmICE9PSAndW5kZWZpbmVkJyAmJiBjb3JlXzEuRWxlbWVudFJlZikgPT09ICdmdW5jdGlvbicgJiYgX2EpIHx8IE9iamVjdClcclxuXHQgICAgXSwgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5wdXRcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuVmlld0NoaWxkKGNhbGVuZGFyX2NvbXBvbmVudF8xLkNhbGVuZGFyQ29tcG9uZW50KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsICh0eXBlb2YgKF9iID0gdHlwZW9mIGNhbGVuZGFyX2NvbXBvbmVudF8xLkNhbGVuZGFyQ29tcG9uZW50ICE9PSAndW5kZWZpbmVkJyAmJiBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCkgPT09ICdmdW5jdGlvbicgJiYgX2IpIHx8IE9iamVjdClcclxuXHQgICAgXSwgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2FsXCIsIHZvaWQgMCk7XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnY3QtZGF0ZS1waWNrZXInLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSxcclxuXHQgICAgICAgICAgICBzdHlsZXM6IFtfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KSwgX193ZWJwYWNrX3JlcXVpcmVfXygxNyldLFxyXG5cdCAgICAgICAgICAgIGVuY2Fwc3VsYXRpb246IGNvcmVfMS5WaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG5cdCAgICAgICAgICAgIHByb3ZpZGVyczogW1xyXG5cdCAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IGZvcm1zXzEuTkdfVkFMVUVfQUNDRVNTT1IsIHVzZUV4aXN0aW5nOiBjb3JlXzEuZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBEYXRlUGlja2VyQ29tcG9uZW50OyB9KSwgbXVsdGk6IHRydWUgfSxcclxuXHQgICAgICAgICAgICAgICAgeyBwcm92aWRlOiBmb3Jtc18xLk5HX1ZBTElEQVRPUlMsIHVzZUV4aXN0aW5nOiBjb3JlXzEuZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBEYXRlUGlja2VyQ29tcG9uZW50OyB9KSwgbXVsdGk6IHRydWUgfVxyXG5cdCAgICAgICAgICAgIF1cclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgWyh0eXBlb2YgKF9jID0gdHlwZW9mIGNvcmVfMS5FbGVtZW50UmVmICE9PSAndW5kZWZpbmVkJyAmJiBjb3JlXzEuRWxlbWVudFJlZikgPT09ICdmdW5jdGlvbicgJiYgX2MpIHx8IE9iamVjdCwgKHR5cGVvZiAoX2QgPSB0eXBlb2YgY29yZV8xLlJlbmRlcmVyICE9PSAndW5kZWZpbmVkJyAmJiBjb3JlXzEuUmVuZGVyZXIpID09PSAnZnVuY3Rpb24nICYmIF9kKSB8fCBPYmplY3RdKVxyXG5cdCAgICBdLCBEYXRlUGlja2VyQ29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIERhdGVQaWNrZXJDb21wb25lbnQ7XHJcblx0ICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuXHR9KGRhdGVwaWNrZXJfYmFzZV8xLkRhdGVQaWNrZXJCYXNlKSk7XHJcblx0ZXhwb3J0cy5EYXRlUGlja2VyQ29tcG9uZW50ID0gRGF0ZVBpY2tlckNvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fO1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciBtb21lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xyXG5cdHZhciBjYWxlbmRhcl9tb2RlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG5cdHZhciBjYWxlbmRhcl9ncmlkX2NvbXBvbmVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxuXHR2YXIgQ2FsZW5kYXJDb21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBDYWxlbmRhckNvbXBvbmVudCgpIHtcclxuXHQgICAgICAgIC8qKiBBY2Nlc3NvciB0byB0aGUgbW9kZSBmb3IgaHRtbCAqL1xyXG5cdCAgICAgICAgdGhpcy5DYWxlbmRhck1vZGUgPSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlO1xyXG5cdCAgICAgICAgdGhpcy5tb2RlID0gY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhcjtcclxuXHQgICAgICAgIC8qKiBBcnJheSBvZiBtb250aHMgdG8gc2hvdyB3aGVuIHNlbGVjdGluZyBhIG5ldyBtb250aCAqL1xyXG5cdCAgICAgICAgdGhpcy5tb250aHMgPSBbXTtcclxuXHQgICAgICAgIC8qKiBBcnJheSBvZiB5ZWFycyB0byBzaG93IHdoZW4gc2VsZWN0aW5nIGEgbmV3IHllYXIgKi9cclxuXHQgICAgICAgIHRoaXMueWVhcnMgPSBbXTtcclxuXHQgICAgICAgIC8qKiBMaXN0ZW5lcnMgZm9yIG1vbnRoIGNoYW5nZSAqL1xyXG5cdCAgICAgICAgdGhpcy5tb250aExpc3RlbmVycyA9IFtdO1xyXG5cdCAgICAgICAgLyoqIExpc3RlbmVycyBmb3IgeWVhciBjaGFuZ2UgKi9cclxuXHQgICAgICAgIHRoaXMueWVhckxpc3RlbmVycyA9IFtdO1xyXG5cdCAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRoRGF0YSgpO1xyXG5cdCAgICB9XHJcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwieWVhckRhdGFcIiwge1xyXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnllYXJzOyB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgO1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7IH07XHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHsgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLnN1YnNjcmliZVRvQ2hhbmdlTW9udGggPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuXHQgICAgICAgIHRoaXMubW9udGhMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcblx0ICAgIH07XHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5zdWJzY3JpYmVUb0NoYW5nZVllYXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuXHQgICAgICAgIHRoaXMueWVhckxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZU1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xyXG5cdCAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuXHQgICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5ZZWFyOlxyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhckRhdGEodGhpcy5kYXRlLnllYXIoKSk7XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuZ2VuZXJhdGVNb250aERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgZGF0ZSA9IG1vbWVudChuZXcgRGF0ZSgpKTsgLy9kb2Vzbid0IGNoYW5nZVxyXG5cdCAgICAgICAgZGF0ZS5tb250aCgwKTtcclxuXHQgICAgICAgIHZhciBkID0gbW9tZW50KG5ldyBEYXRlKCkpO1xyXG5cdCAgICAgICAgZC5tb250aCgwKTtcclxuXHQgICAgICAgIHdoaWxlIChkYXRlLnllYXIoKSA9PT0gZC55ZWFyKCkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLm1vbnRocy5wdXNoKGQuZm9ybWF0KFwiTU1NXCIpKTtcclxuXHQgICAgICAgICAgICBkLm1vbnRoKGQubW9udGgoKSArIDEpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuZ2VuZXJhdGVZZWFyRGF0YSA9IGZ1bmN0aW9uICh5ZWFyKSB7XHJcblx0ICAgICAgICB0aGlzLnllYXJzID0gW107XHJcblx0ICAgICAgICB2YXIgeSA9IHllYXIgLSBDYWxlbmRhckNvbXBvbmVudC5oYWxmTnVtWWVhcnNTaG93bjtcclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2FsZW5kYXJDb21wb25lbnQubnVtWWVhcnNTaG93bjsgaSsrKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy55ZWFycy5wdXNoKHkgKyBpKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLmdvUHJldiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcblx0ICAgICAgICAgICAgY2FzZSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyOlxyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgICAgICBjYXNlIGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuTW9udGg6XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5ZZWFyOlxyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhckRhdGEodGhpcy55ZWFyc1tDYWxlbmRhckNvbXBvbmVudC5oYWxmTnVtWWVhcnNTaG93bl0gLSBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLmdvTmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcblx0ICAgICAgICAgICAgY2FzZSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyOlxyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgICAgICBjYXNlIGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuTW9udGg6XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5ZZWFyOlxyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhckRhdGEodGhpcy55ZWFyc1tDYWxlbmRhckNvbXBvbmVudC5oYWxmTnVtWWVhcnNTaG93bl0gKyBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckNhbGVuZGFyID0gZnVuY3Rpb24gKGNsaWNrQ2FsbGJhY2ssIGRhdGVUbywgZGF0ZUZyb20sIG1pbkRhdGUsIG1heERhdGUpIHtcclxuXHQgICAgICAgIHRoaXMuZ3JpZC5yZW5kZXJDYWxlbmRhcih0aGlzLmRhdGUsIGNsaWNrQ2FsbGJhY2ssIGRhdGVUbywgZGF0ZUZyb20sIG1pbkRhdGUsIG1heERhdGUpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuc2V0TW9udGggPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuXHQgICAgICAgIHRoaXMuZGF0ZS5tb250aChpbmRleCk7XHJcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5tb250aExpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuXHQgICAgICAgICAgICB2YXIgZm4gPSBfYVtfaV07XHJcblx0ICAgICAgICAgICAgZm4oKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLnNldFllYXIgPSBmdW5jdGlvbiAoeWVhcikge1xyXG5cdCAgICAgICAgdGhpcy5kYXRlLnllYXIoeWVhcik7XHJcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy55ZWFyTGlzdGVuZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG5cdCAgICAgICAgICAgIHZhciBmbiA9IF9hW19pXTtcclxuXHQgICAgICAgICAgICBmbigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICAvKiogRGV0ZXJtaW5lcyBob3cgbWFueSB5ZWFyIGJ1dHRvbnMgYXJlIHNob3duLiAqL1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duID0gMTU7XHJcblx0ICAgIC8qKiBjb252ZW5pZW5jZSB2YXJpYWJsZSBmb3IgZ2VuZXJhdGluZyB5ZWFycyAqL1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5oYWxmTnVtWWVhcnNTaG93biA9IE1hdGguZmxvb3IoQ2FsZW5kYXJDb21wb25lbnQubnVtWWVhcnNTaG93biAvIDIpO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5WaWV3Q2hpbGQoY2FsZW5kYXJfZ3JpZF9jb21wb25lbnRfMS5DYWxlbmRhckdyaWRDb21wb25lbnQpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgKHR5cGVvZiAoX2EgPSB0eXBlb2YgY2FsZW5kYXJfZ3JpZF9jb21wb25lbnRfMS5DYWxlbmRhckdyaWRDb21wb25lbnQgIT09ICd1bmRlZmluZWQnICYmIGNhbGVuZGFyX2dyaWRfY29tcG9uZW50XzEuQ2FsZW5kYXJHcmlkQ29tcG9uZW50KSA9PT0gJ2Z1bmN0aW9uJyAmJiBfYSkgfHwgT2JqZWN0KVxyXG5cdCAgICBdLCBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JpZFwiLCB2b2lkIDApO1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdjdC1jYWxlbmRhcicsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxyXG5cdCAgICAgICAgICAgIHN0eWxlczogW19fd2VicGFja19yZXF1aXJlX18oMTMpXSxcclxuXHQgICAgICAgICAgICBlbmNhcHN1bGF0aW9uOiBjb3JlXzEuVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbXSlcclxuXHQgICAgXSwgQ2FsZW5kYXJDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gQ2FsZW5kYXJDb21wb25lbnQ7XHJcblx0ICAgIHZhciBfYTtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuQ2FsZW5kYXJDb21wb25lbnQgPSBDYWxlbmRhckNvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHQoZnVuY3Rpb24gKENhbGVuZGFyTW9kZSkge1xyXG5cdCAgICBDYWxlbmRhck1vZGVbQ2FsZW5kYXJNb2RlW1wiQ2FsZW5kYXJcIl0gPSAwXSA9IFwiQ2FsZW5kYXJcIjtcclxuXHQgICAgQ2FsZW5kYXJNb2RlW0NhbGVuZGFyTW9kZVtcIk1vbnRoXCJdID0gMV0gPSBcIk1vbnRoXCI7XHJcblx0ICAgIENhbGVuZGFyTW9kZVtDYWxlbmRhck1vZGVbXCJZZWFyXCJdID0gMl0gPSBcIlllYXJcIjtcclxuXHR9KShleHBvcnRzLkNhbGVuZGFyTW9kZSB8fCAoZXhwb3J0cy5DYWxlbmRhck1vZGUgPSB7fSkpO1xyXG5cdHZhciBDYWxlbmRhck1vZGUgPSBleHBvcnRzLkNhbGVuZGFyTW9kZTtcclxuXG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcblx0dmFyICQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcclxuXHR2YXIgQ2FsZW5kYXJHcmlkQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQ2FsZW5kYXJHcmlkQ29tcG9uZW50KG15RWxlbWVudCwgcmVuZGVyZXIpIHtcclxuXHQgICAgICAgIHRoaXMubXlFbGVtZW50ID0gbXlFbGVtZW50O1xyXG5cdCAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cdCAgICAgICAgdGhpcy50b2RheSA9IG1vbWVudCgpO1xyXG5cdCAgICB9XHJcblx0ICAgIENhbGVuZGFyR3JpZENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIENhbGVuZGFyR3JpZENvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZW5kZXJzIGEgY2FsZW5kYXIgYmFzZWQgb24gdGhlIGRhdGUsIHNlbGVjdGluZyB0aGUgcHJvcGVyIGZyb20vdG8gaWYgdmlzaWJsZS5cclxuXHQgICAgICovXHJcblx0ICAgIENhbGVuZGFyR3JpZENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyQ2FsZW5kYXIgPSBmdW5jdGlvbiAoZGF0ZSwgY2xpY2tDYWxsYmFjaywgZGF0ZVRvLCBkYXRlRnJvbSwgbWluRGF0ZSwgbWF4RGF0ZSkge1xyXG5cdCAgICAgICAgdmFyIGQgPSBtb21lbnQoZGF0ZSk7XHJcblx0ICAgICAgICBkLmRhdGUoMSk7IC8vcmVzZXQgZGF0ZS5cclxuXHQgICAgICAgIHZhciBoZWFkZXIgPSAkKFwiPGRpdiBjbGFzcz0nY3QtZHAtY2FsLWhlYWRlcic+PC9kaXY+XCIpO1xyXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuXHQgICAgICAgICAgICBkLmRheShpKTtcclxuXHQgICAgICAgICAgICB2YXIgZWwgPSAkKFwiPGRpdj48L2Rpdj5cIik7XHJcblx0ICAgICAgICAgICAgZWwudGV4dChkLmZvcm1hdChcImRkXCIpKTtcclxuXHQgICAgICAgICAgICBlbC5hdHRyKFwiY3QtY2FsLWRwLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG5cdCAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiY3QtZHAtY2FsLWRheVwiKTtcclxuXHQgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGVsKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGQuZGF0ZSgxKTsgLy9yZXNldCBkYXRlLlxyXG5cdCAgICAgICAgdmFyIGJvZHkgPSAkKFwiPGRpdiBjbGFzcz0nY3QtZHAtY2FsLWJvZHknPjwvZGl2PlwiKTtcclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5kYXkoKTsgaSsrKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGVsID0gJChcIjxkaXY+PC9kaXY+XCIpO1xyXG5cdCAgICAgICAgICAgIGVsLmF0dHIoXCJjdC1kcC1jYWwtZGF5XCIsIGkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJjdC1kcC1jYWwtZGF5XCIpO1xyXG5cdCAgICAgICAgICAgIGJvZHkuYXBwZW5kKGVsKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHdoaWxlIChkLm1vbnRoKCkgPT09IGRhdGUubW9udGgoKSkge1xyXG5cdCAgICAgICAgICAgIHZhciBlbCA9ICQoXCI8YnV0dG9uPjwvYnV0dG9uPlwiKTtcclxuXHQgICAgICAgICAgICBlbC50ZXh0KChkLmRhdGUoKSkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgZWwuYXR0cihcImN0LWRwLWNhbC1kYXlcIiwgZC5kYXRlKCkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgZWwuYXR0cihcInRhYkluZGV4XCIsIFwiLTFcIik7XHJcblx0ICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJjdC1kcC1jYWwtZGF5XCIpO1xyXG5cdCAgICAgICAgICAgIGlmICh0aGlzLnRvZGF5LmRhdGUoKSA9PT0gZC5kYXRlKCkgJiYgdGhpcy50b2RheS5tb250aCgpID09PSBkLm1vbnRoKCkpIHtcclxuXHQgICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJ0b2RheVwiKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKChkYXRlVG8gJiYgZC5pc1NhbWUoZGF0ZVRvLCBcImRheVwiKSkgfHwgKGRhdGVGcm9tICYmIGQuaXNTYW1lKGRhdGVGcm9tLCBcImRheVwiKSkpIHtcclxuXHQgICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGlmIChkYXRlRnJvbSAmJiBkYXRlVG8gJiYgZC5pc0JldHdlZW4oZGF0ZUZyb20sIGRhdGVUbykpIHtcclxuXHQgICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJiZXR3ZWVuXCIpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBpZiAobWF4RGF0ZSAmJiBtaW5EYXRlICYmIGQuaXNCZWZvcmUobWluRGF0ZSkgfHwgZC5pc0FmdGVyKG1heERhdGUpKSB7XHJcblx0ICAgICAgICAgICAgICAgIGVsLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbC5jbGljayhjbGlja0NhbGxiYWNrKGQpKTtcclxuXHQgICAgICAgICAgICBkLmRhdGUoZC5kYXRlKCkgKyAxKTtcclxuXHQgICAgICAgICAgICBib2R5LmFwcGVuZChlbCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmVtcHR5KCk7XHJcblx0ICAgICAgICBoZWFkZXIuYXBwZW5kVG8odGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcblx0ICAgICAgICBib2R5LmFwcGVuZFRvKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRGVwcmVjYXRlZCB1bnRpbCBzdXBwb3J0IG9mIHJlbmRlcmVyIGlzIG1vcmUgc3RhYmxlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgQ2FsZW5kYXJHcmlkQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJDYWxlbmRhclJlbmRlcmVyID0gZnVuY3Rpb24gKGNhbCwgY2xpY2tDYWxsYmFjaywgZGF0ZVRvLCBkYXRlRnJvbSkge1xyXG5cdCAgICAgICAgdmFyIGQgPSBtb21lbnQoY2FsLmRhdGUpO1xyXG5cdCAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblx0ICAgICAgICB0aGlzLnJlbmRlcmVyLnNlbGVjdFJvb3RFbGVtZW50KHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG5cdCAgICAgICAgdmFyIGhlYWRlckVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJkaXZcIik7XHJcblx0ICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhoZWFkZXJFbGVtZW50LCBcIi5jdC1kcC1jYWwtaGVhZGVyXCIsIHRydWUpO1xyXG5cdCAgICAgICAgdmFyIGNhbEVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJkaXZcIik7XHJcblx0ICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhoZWFkZXJFbGVtZW50LCBcIi5jdC1kcC1jYWwtYm9keVwiLCB0cnVlKTtcclxuXHQgICAgICAgIC8vQWRkIG5hbWUgZm9yIGRheSBvZiB3ZWVrXHJcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDc7IGkrKykge1xyXG5cdCAgICAgICAgICAgIGQuZGF5KGkpO1xyXG5cdCAgICAgICAgICAgIHZhciBlbCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudChoZWFkZXJFbGVtZW50LCBcImRpdlwiKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFRleHQoZWwsIGQuZm9ybWF0KFwiZGRcIikpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgXCJjdC1jYWwtZHAtZGF5XCIsIGkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCB0cnVlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGQuZGF0ZSgxKTsgLy9yZXNldCBkYXRlLlxyXG5cdCAgICAgICAgLy9BZGQgYmxhbmsgZmlsbGVyIGRheXMuXHJcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQuZGF5KCk7IGkrKykge1xyXG5cdCAgICAgICAgICAgIHZhciBlbCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudChjYWxFbGVtZW50LCBcImRpdlwiKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGVsLCBcImN0LWRwLWNhbC1kYXlcIiwgdHJ1ZSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICAvL0FkZCBjYWxlbmRhclxyXG5cdCAgICAgICAgd2hpbGUgKGQubW9udGgoKSA9PT0gY2FsLmRhdGUubW9udGgoKSkge1xyXG5cdCAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG5cdCAgICAgICAgICAgIHZhciBlbCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudChjYWxFbGVtZW50LCBcImJ1dHRvblwiKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFRleHQoZWwsIChkLmRhdGUoKSkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50QXR0cmlidXRlKGVsLCBcImN0LWRwLWNhbC1kYXlcIiwgZC5kYXRlKCkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50QXR0cmlidXRlKGVsLCBcInRhYmluZGV4XCIsIFwiLTFcIik7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCB0cnVlKTtcclxuXHQgICAgICAgICAgICBpZiAoKGRhdGVUbyAmJiBkLmlzU2FtZShkYXRlVG8sIFwiZGF5XCIpKSB8fCAoZGF0ZUZyb20gJiYgZC5pc1NhbWUoZGF0ZUZyb20sIFwiZGF5XCIpKSkge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJhY3RpdmVcIiwgdHJ1ZSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGlmIChkYXRlRnJvbSAmJiBkYXRlVG8gJiYgZC5pc0JldHdlZW4oZGF0ZUZyb20sIGRhdGVUbykpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiYmV0d2VlblwiLCB0cnVlKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oZWwsIFwiY2xpY2tcIiwgY2xpY2tDYWxsYmFjayhkKSk7XHJcblx0ICAgICAgICAgICAgZC5kYXRlKGQuZGF0ZSgpICsgMSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIENhbGVuZGFyR3JpZENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdjdC1jYWxlbmRhci1ncmlkJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogJycsXHJcblx0ICAgICAgICAgICAgc3R5bGVzOiBbX193ZWJwYWNrX3JlcXVpcmVfXygxMSldLFxyXG5cdCAgICAgICAgICAgIGVuY2Fwc3VsYXRpb246IGNvcmVfMS5WaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFsodHlwZW9mIChfYSA9IHR5cGVvZiBjb3JlXzEuRWxlbWVudFJlZiAhPT0gJ3VuZGVmaW5lZCcgJiYgY29yZV8xLkVsZW1lbnRSZWYpID09PSAnZnVuY3Rpb24nICYmIF9hKSB8fCBPYmplY3QsICh0eXBlb2YgKF9iID0gdHlwZW9mIGNvcmVfMS5SZW5kZXJlciAhPT0gJ3VuZGVmaW5lZCcgJiYgY29yZV8xLlJlbmRlcmVyKSA9PT0gJ2Z1bmN0aW9uJyAmJiBfYikgfHwgT2JqZWN0XSlcclxuXHQgICAgXSwgQ2FsZW5kYXJHcmlkQ29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIENhbGVuZGFyR3JpZENvbXBvbmVudDtcclxuXHQgICAgdmFyIF9hLCBfYjtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuQ2FsZW5kYXJHcmlkQ29tcG9uZW50ID0gQ2FsZW5kYXJHcmlkQ29tcG9uZW50O1xyXG5cblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTBfXztcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiLnRvZGF5e2ZvbnQtd2VpZ2h0OjcwMH1cIlxuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjdC1kcC1jYWxcXFwiIFtuZ0NsYXNzXT1cXFwieydoaWRkZW4nOiBtb2RlICE9IENhbGVuZGFyTW9kZS5DYWxlbmRhcn1cXFwiPlxcclxcbiAgICA8Y3QtY2FsZW5kYXItZ3JpZD48L2N0LWNhbGVuZGFyLWdyaWQ+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBjbGFzcz1cXFwiY3QtZHAtbW9udGhzXFxcIiBbbmdDbGFzc109XFxcInsnaGlkZGVuJzogbW9kZSAhPSBDYWxlbmRhck1vZGUuTW9udGh9XFxcIj5cXHJcXG4gICAgPHRlbXBsYXRlIG5nRm9yIGxldC1pdGVtIFtuZ0Zvck9mXT1cXFwibW9udGhzXFxcIiBbbmdGb3JUcmFja0J5XT1cXFwibXlUcmFja0J5XFxcIiBsZXQtaT1cXFwiaW5kZXhcXFwiPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuIGN0LWRwLW1vbnRoXFxcIiAoY2xpY2spPVxcXCJzZXRNb250aChpKVxcXCI+e3tpdGVtfX08L2J1dHRvbj5cXHJcXG4gICAgPC90ZW1wbGF0ZT5cXHJcXG48L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjdC1kcC15ZWFyc1xcXCIgW25nQ2xhc3NdPVxcXCJ7J2hpZGRlbic6IG1vZGUgIT0gQ2FsZW5kYXJNb2RlLlllYXJ9XFxcIj5cXHJcXG4gICAgPHRlbXBsYXRlIG5nRm9yIGxldC1pdGVtIFtuZ0Zvck9mXT1cXFwieWVhcnNcXFwiIFtuZ0ZvclRyYWNrQnldPVxcXCJteVRyYWNrQnlcXFwiIGxldC1pPVxcXCJpbmRleFxcXCI+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4gY3QtZHAteWVhclxcXCIgKGNsaWNrKT1cXFwic2V0WWVhcihpdGVtKVxcXCI+e3tpdGVtfX08L2J1dHRvbj5cXHJcXG4gICAgPC90ZW1wbGF0ZT5cXHJcXG48L2Rpdj5cIjtcblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiXCJcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcblx0dmFyIGNhbGVuZGFyX21vZGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XHJcblx0dmFyIERhdGVQaWNrZXJCYXNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gRGF0ZVBpY2tlckJhc2UoKSB7XHJcblx0ICAgICAgICAvKiogRW51bSBBY2Nlc3NvcnMgZm9yIEhUTUwgKi9cclxuXHQgICAgICAgIHRoaXMuQ2FsZW5kYXJNb2RlID0gY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZTtcclxuXHQgICAgICAgIC8qKiBWYWxpZGF0aW9uIEZ1bmN0aW9ucyAqL1xyXG5cdCAgICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7IH07XHJcblx0ICAgICAgICB0aGlzLnByb3BhZ2F0ZVRvdWNoZWQgPSBmdW5jdGlvbiAoKSB7IH07XHJcblx0ICAgICAgICB0aGlzLnZhbGlkYXRlRm4gPSBmdW5jdGlvbiAoKSB7IH07XHJcblx0ICAgICAgICB0aGlzLnNoYWRvd1pJbmRleCA9IDEwMDtcclxuXHQgICAgICAgIHRoaXMuekluZGV4VmFsID0gMTAxO1xyXG5cdCAgICAgICAgdGhpcy5taW5EYXRlVmFsID0gbnVsbDtcclxuXHQgICAgICAgIHRoaXMubWF4RGF0ZVZhbCA9IG51bGw7XHJcblx0ICAgIH1cclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERhdGVQaWNrZXJCYXNlLnByb3RvdHlwZSwgXCJ6SW5kZXhcIiwge1xyXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5zaGFkb3daSW5kZXggPSB2YWw7XHJcblx0ICAgICAgICAgICAgdGhpcy56SW5kZXhWYWwgPSB2YWwgKyAxLjA7XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERhdGVQaWNrZXJCYXNlLnByb3RvdHlwZSwgXCJtaW5EYXRlXCIsIHtcclxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgICAgIHZhciBkID0gbW9tZW50KHZhbCk7XHJcblx0ICAgICAgICAgICAgaWYgKGQuaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMubWluRGF0ZVZhbCA9IG1vbWVudCh2YWwpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5taW5EYXRlVmFsID0gbnVsbDtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERhdGVQaWNrZXJCYXNlLnByb3RvdHlwZSwgXCJtYXhEYXRlXCIsIHtcclxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgICAgIHZhciBkID0gbW9tZW50KHZhbCk7XHJcblx0ICAgICAgICAgICAgaWYgKGQuaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMubWF4RGF0ZVZhbCA9IG1vbWVudCh2YWwpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5tYXhEYXRlVmFsID0gbnVsbDtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgRGF0ZVBpY2tlckJhc2UucHJvdG90eXBlLnJlZ2lzdGVyT25DaGFuZ2UgPSBmdW5jdGlvbiAoZm4pIHtcclxuXHQgICAgICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlID0gZm47XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJCYXNlLnByb3RvdHlwZS5yZWdpc3Rlck9uVG91Y2hlZCA9IGZ1bmN0aW9uIChmbikge1xyXG5cdCAgICAgICAgdGhpcy5wcm9wYWdhdGVUb3VjaGVkID0gZm47XHJcblx0ICAgIH07XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLklucHV0KCd6SW5kZXgnKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE51bWJlciksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbTnVtYmVyXSlcclxuXHQgICAgXSwgRGF0ZVBpY2tlckJhc2UucHJvdG90eXBlLCBcInpJbmRleFwiLCBudWxsKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5wdXQoJ21pbkRhdGUnKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbT2JqZWN0XSlcclxuXHQgICAgXSwgRGF0ZVBpY2tlckJhc2UucHJvdG90eXBlLCBcIm1pbkRhdGVcIiwgbnVsbCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLklucHV0KCdtYXhEYXRlJyksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW09iamVjdF0pXHJcblx0ICAgIF0sIERhdGVQaWNrZXJCYXNlLnByb3RvdHlwZSwgXCJtYXhEYXRlXCIsIG51bGwpO1xyXG5cdCAgICByZXR1cm4gRGF0ZVBpY2tlckJhc2U7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkRhdGVQaWNrZXJCYXNlID0gRGF0ZVBpY2tlckJhc2U7XHJcblxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxyXFxuPGRpdiBjbGFzcz1cXFwiY3QtZHAtc2hhZG93LWJveFxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pXFxcIiAqbmdJZj1cXFwibW9kZSAhPSBEYXRlUGlja2VyTW9kZS5IaWRkZW5cXFwiIFtzdHlsZS56LWluZGV4XT1cXFwic2hhZG93WkluZGV4XFxcIj5cXHJcXG48L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjdC1kcC1waWNrZXJcXFwiIFtjbGFzcy5oaWRkZW5dPVxcXCJtb2RlID09IERhdGVQaWNrZXJNb2RlLkhpZGRlblxcXCIgW3N0eWxlLnotaW5kZXhdPVxcXCJ6SW5kZXhWYWxcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1jYXJldC0xXFxcIj48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtY2FyZXQtMlxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImN0LWRwLWhlYWRlclxcXCI+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tcHJldiAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJnb1ByZXYoKVxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mbHQ7PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbW9udGggY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5Nb250aClcXFwiPnt7Y2FsLmRhdGUuZm9ybWF0KFxcXCJNTU1NXFxcIil9fTwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXllYXIgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuWWVhcilcXFwiPnt7Y2FsLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW5leHQgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiZ29OZXh0KClcXFwiIFtkaXNhYmxlZF09XFxcImNhbC5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmd0OzwvYnV0dG9uPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGN0LWNhbGVuZGFyPjwvY3QtY2FsZW5kYXI+XFxyXFxuPC9kaXY+XCI7XG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuMTMsXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIi5jdC1kcC1hY3RpdmUgaW5wdXR7cG9zaXRpb246cmVsYXRpdmV9LmN0LWRwLXNoYWRvdy1ib3h7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uY3QtZHAtcGlja2Vye3dpZHRoOjIyMHB4O2JvcmRlcjoxcHggc29saWQgIzgwODA4MDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6d2hpdGU7bWFyZ2luLXRvcDoxNHB4O3RyYW5zaXRpb246LjVzfS5jdC1kcC1waWNrZXIuY3QtZHAtZHVhbHBpY2tlcnt3aWR0aDo0NDBweH0uY3QtZHAtcGlja2VyLmN0LWRwLXBpY2tlci10b3ttYXJnaW4tbGVmdDoxNXB4fS5jdC1kcC1jYXJldC0yLC5jdC1kcC1jYXJldC0xe2JvdHRvbToxMDAlO2xlZnQ6MTAlO2JvcmRlcjpzb2xpZCB0cmFuc3BhcmVudDtoZWlnaHQ6MDt3aWR0aDowO3Bvc2l0aW9uOmFic29sdXRlO3BvaW50ZXItZXZlbnRzOm5vbmU7dHJhbnNpdGlvbjouNXN9LmN0LWRwLWNhcmV0LTJ7Ym9yZGVyLWNvbG9yOnJnYmEoMTM2LDE4MywyMTMsMCk7Ym9yZGVyLWJvdHRvbS1jb2xvcjp3aGl0ZTtib3JkZXItd2lkdGg6MTRweDttYXJnaW4tbGVmdDotMTRweH0uY3QtZHAtY2FyZXQtMXtib3JkZXItY29sb3I6cmdiYSgxOTQsMjI1LDI0NSwwKTtib3JkZXItYm90dG9tLWNvbG9yOiM4MDgwODA7Ym9yZGVyLXdpZHRoOjE2cHg7bWFyZ2luLWxlZnQ6LTE2cHh9LmN0LWRwLWhlYWRlcntib3JkZXItYm90dG9tOjFweCBzb2xpZCAjODA4MDgwfS5jdC1kcC1jYWx7cGFkZGluZzo1cHg7d2lkdGg6MjIwcHg7ZmxvYXQ6bGVmdH0uY3QtZHAtY2FsLWluYWN0aXZle3Zpc2liaWxpdHk6aGlkZGVufS5jdC1kcC1jYWwtaGVhZGVye2NvbG9yOiM4MDgwODB9LmN0LWRwLWNhbC1kYXl7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtmbG9hdDpsZWZ0O3RleHQtYWxpZ246Y2VudGVyfS5jdC1kcC1jYWwtZGF5OmRpc2FibGVke2NvbG9yOiNiZmJmYmZ9LmN0LWRwLWNhbC1kYXkuYWN0aXZle2JhY2tncm91bmQtY29sb3I6bGlnaHRibHVlfS5jdC1kcC1jYWwtZGF5LmJldHdlZW57YmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXl9LmN0LWRwLW1vbnRocywuY3QtZHAteWVhcnN7d2lkdGg6MjIwcHg7ZmxvYXQ6bGVmdDtwYWRkaW5nOjVweH0uY3QtZHAtbW9udGgsLmN0LWRwLXllYXJ7d2lkdGg6MzMuMzMlO2Zsb2F0OmxlZnQ7dGV4dC1hbGlnbjpjZW50ZXJ9LmN0LWRwLWJ0bntwYWRkaW5nOjRweDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO2JvcmRlcjpub25lfS5jdC1kcC1idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojOTk5fS5jdC1kcC1idG5bZGlzYWJsZWRdOmhvdmVye2JhY2tncm91bmQtY29sb3I6d2hpdGV9LmN0LWRwLWJ0bltkaXNhYmxlZF17Y29sb3I6d2hpdGV9LmN0LWRwLXBpY2tlciAuY3QtZHAtYnRuLXByZXYsLmN0LWRwLXBpY2tlciAuY3QtZHAtYnRuLW5leHR7d2lkdGg6MTAlfS5jdC1kcC1waWNrZXIgLmN0LWRwLWJ0bi1tb250aHt3aWR0aDo1MCU7Zm9udC13ZWlnaHQ6NTAwfS5jdC1kcC1waWNrZXIgLmN0LWRwLWJ0bi15ZWFye3dpZHRoOjMwJTtmb250LXdlaWdodDo1MDB9LmN0LWRwLXBpY2tlci5jdC1kcC1kdWFscGlja2VyIC5jdC1kcC1idG4tcHJldiwuY3QtZHAtcGlja2VyLmN0LWRwLWR1YWxwaWNrZXIgLmN0LWRwLWJ0bi1uZXh0e3dpZHRoOjUlfS5jdC1kcC1waWNrZXIuY3QtZHAtZHVhbHBpY2tlciAuY3QtZHAtYnRuLW1vbnRoe3dpZHRoOjI1JX0uY3QtZHAtcGlja2VyLmN0LWRwLWR1YWxwaWNrZXIgLmN0LWRwLWJ0bi15ZWFye3dpZHRoOjE1JX0uY2xlYXJmaXgsLmN0LWRwLWNhbDphZnRlciwuY3QtZHAtbW9udGhzOmFmdGVyLC5jdC1kcC15ZWFyczphZnRlcnt2aXNpYmlsaXR5OmhpZGRlbjtkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTowO2NvbnRlbnQ6XFxcIiBcXFwiO2NsZWFyOmJvdGg7aGVpZ2h0OjB9Lm5vLWJ1dHRvbiwuY3QtZHAtY2FsLWRheXtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjpub25lICFpbXBvcnRhbnR9LnB1bGwtcmlnaHR7ZmxvYXQ6cmlnaHR9LmhpZGRlbntkaXNwbGF5Om5vbmUgIWltcG9ydGFudH1cIlxuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0fTtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcblx0dmFyICQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcclxuXHR2YXIgY2FsZW5kYXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBjYWxlbmRhcl9tb2RlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG5cdHZhciBmb3Jtc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgZGF0ZXBpY2tlcl9iYXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcclxuXHQvKipcclxuXHQgKiBEZWZpbmVzIHRoZSBtb2RlIG9mIHRoZSBwaWNrZXJcclxuXHQgKi9cclxuXHQoZnVuY3Rpb24gKER1YWxQaWNrZXJNb2RlKSB7XHJcblx0ICAgIC8qKiBBbGxvd3Mgc2VsZWN0aW9uIG9mIHRoZSB0byBkYXRlLiAqL1xyXG5cdCAgICBEdWFsUGlja2VyTW9kZVtEdWFsUGlja2VyTW9kZVtcIlRvXCJdID0gMF0gPSBcIlRvXCI7XHJcblx0ICAgIC8qKiBBbGxvd3Mgc2VsZWN0aW9uIG9mIHRoZSBmcm9tIGRhdGUuICovXHJcblx0ICAgIER1YWxQaWNrZXJNb2RlW0R1YWxQaWNrZXJNb2RlW1wiRnJvbVwiXSA9IDFdID0gXCJGcm9tXCI7XHJcblx0ICAgIC8qKiBNYWtlcyB0aGUgcGlja2VyIGhpZGRlbiwgZGVmYXVsdCBzdGF0ZS4gKi9cclxuXHQgICAgRHVhbFBpY2tlck1vZGVbRHVhbFBpY2tlck1vZGVbXCJIaWRkZW5cIl0gPSAyXSA9IFwiSGlkZGVuXCI7XHJcblx0fSkoZXhwb3J0cy5EdWFsUGlja2VyTW9kZSB8fCAoZXhwb3J0cy5EdWFsUGlja2VyTW9kZSA9IHt9KSk7XHJcblx0dmFyIER1YWxQaWNrZXJNb2RlID0gZXhwb3J0cy5EdWFsUGlja2VyTW9kZTtcclxuXHR2YXIgRHVhbFBpY2tlckNvbXBvbmVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhEdWFsUGlja2VyQ29tcG9uZW50LCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBEdWFsUGlja2VyQ29tcG9uZW50KG15RWxlbWVudCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xyXG5cdCAgICAgICAgdGhpcy5teUVsZW1lbnQgPSBteUVsZW1lbnQ7XHJcblx0ICAgICAgICAvL0VudW0gZGVmaW5pdGlvbnMgZm9yIGFjY2VzcyBpbiB2aWV3XHJcblx0ICAgICAgICB0aGlzLkNhbGVuZGFyTW9kZSA9IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGU7XHJcblx0ICAgICAgICB0aGlzLkR1YWxQaWNrZXJNb2RlID0gRHVhbFBpY2tlck1vZGU7XHJcblx0ICAgICAgICAvKiogVG9kYXkncyBEYXRlIHRvIHBhc3MgaW50byB0aGUgc2Vjb25kIHBpY2tlciAqKi9cclxuXHQgICAgICAgIHRoaXMudG9kYXkgPSBtb21lbnQoKTtcclxuXHQgICAgICAgIC8qKiBFbWl0dGVyIGZvciBjaGFuZ2UgKGZyb20pKi9cclxuXHQgICAgICAgIHRoaXMuZGF0ZUZyb21DaGFuZ2UgPSBuZXcgY29yZV8xLkV2ZW50RW1pdHRlcigpO1xyXG5cdCAgICAgICAgLyoqIEVtaXR0ZXIgZm9yIGNoYW5nZSAodG8pICovXHJcblx0ICAgICAgICB0aGlzLmRhdGVUb0NoYW5nZSA9IG5ldyBjb3JlXzEuRXZlbnRFbWl0dGVyKCk7XHJcblx0ICAgICAgICAvKiogTW9kZSAqL1xyXG5cdCAgICAgICAgdGhpcy5tb2RlID0gRHVhbFBpY2tlck1vZGUuSGlkZGVuO1xyXG5cdCAgICAgICAgLyoqXHJcblx0ICAgICAgICAgKiBDaGFuZ2VzIHRoZSBnbG9iYWwgbW9kZSBvZiB0aGUgcGlja2VyIChub3QgdGhlIG1vZGUgb2YgdGhlIGNhbGVuZGFyKVxyXG5cdCAgICAgICAgICovXHJcblx0ICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG5cdCAgICAgICAgdGhpcy5tb250aDFDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBfdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIF90aGlzLmNhbDEpO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmNoYW5nZU1vZGUoY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhciwgX3RoaXMuY2FsMik7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgdGhpcy5tb250aDJDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBfdGhpcy5zaGlmdENhbDEoKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIF90aGlzLmNhbDEpO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmNoYW5nZU1vZGUoY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhciwgX3RoaXMuY2FsMik7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgdGhpcy55ZWFyMUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIF90aGlzLnNoaWZ0Q2FsMigpO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmNoYW5nZU1vZGUoY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhciwgX3RoaXMuY2FsMSk7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCBfdGhpcy5jYWwyKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLnllYXIyQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgX3RoaXMuc2hpZnRDYWwxKCk7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCBfdGhpcy5jYWwxKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIF90aGlzLmNhbDIpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG5cdCAgICAgICAgICAgIHZhciBkID0gbW9tZW50KGRhdGUpO1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLnNldERhdGUoZCk7XHJcblx0ICAgICAgICAgICAgfTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgIH1cclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVGcm9tXCIsIHtcclxuXHQgICAgICAgIC8qKiBJbnB1dCBkZWZpbml0aW9uIGZvciAoZnJvbSkgKi9cclxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVGcm9tVmFsdWU7XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIG1vbWVudCAmJiB2YWwuaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRGcm9tLm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB2YWwuZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlRnJvbVZhbHVlID0gdmFsO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVGcm9tQ2hhbmdlLmVtaXQodmFsKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UoeyBkYXRlRnJvbTogdGhpcy5kYXRlRnJvbSwgZGF0ZVRvOiB0aGlzLmRhdGVUbyB9KTtcclxuXHQgICAgICAgIH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVRvXCIsIHtcclxuXHQgICAgICAgIC8qKiBJbnB1dCBkZWZpbml0aW9uIGZvciAodG8pICovXHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlVG9WYWx1ZTtcclxuXHQgICAgICAgIH0sXHJcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuXHQgICAgICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgbW9tZW50ICYmIHZhbC5pc1ZhbGlkKCkpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRvLm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB2YWwuZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG9WYWx1ZSA9IHZhbDtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG9DaGFuZ2UuZW1pdCh2YWwpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh7IGRhdGVGcm9tOiB0aGlzLmRhdGVGcm9tLCBkYXRlVG86IHRoaXMuZGF0ZVRvIH0pO1xyXG5cdCAgICAgICAgfSxcclxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuXHQgICAgfSk7XHJcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXRjaFwiLCB7XHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy52YWxpZERhdGVFeHByZXNzaW9uIHx8IC9eKCgwP1sxMzU3OF18MTB8MTIpKC18XFwvKSgoWzEtOV0pfCgwWzEtOV0pfChbMTJdKShbMC05XT8pfCgzWzAxXT8pKSgtfFxcLykoKDE5KShbMi05XSkoXFxkezF9KXwoMjApKFswMV0pKFxcZHsxfSl8KFs4OTAxXSkoXFxkezF9KSl8KDA/WzI0NjldfDExKSgtfFxcLykoKFsxLTldKXwoMFsxLTldKXwoWzEyXSkoWzAtOV0/KXwoM1swXT8pKSgtfFxcLykoKDE5KShbMi05XSkoXFxkezF9KXwoMjApKFswMV0pKFxcZHsxfSl8KFs4OTAxXSkoXFxkezF9KSkpJC87XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy52YWxpZERhdGVFeHByZXNzaW9uID0gdmFsO1xyXG5cdCAgICAgICAgfSxcclxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuXHQgICAgfSk7XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZUdsb2JhbE1vZGUgPSBmdW5jdGlvbiAobW9kZSwgZGVsYXkpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IGZhbHNlOyB9XHJcblx0ICAgICAgICBpZiAodGhpcy50aW1lcklkICE9IG51bGwpIHtcclxuXHQgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmIChkZWxheSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBfdGhpcy5jaGFuZ2VHbG9iYWxNb2RlRm4obW9kZSk7IH0sIDQwMCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNoYW5nZUdsb2JhbE1vZGVGbihtb2RlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY2hhbmdlR2xvYmFsTW9kZUZuID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuXHQgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcblx0ICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgRHVhbFBpY2tlck1vZGUuVG86XHJcblx0ICAgICAgICAgICAgICAgIHZhciBsID0gJCh0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudCkucG9zaXRpb24oKS5sZWZ0O1xyXG5cdCAgICAgICAgICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmZpbmQoXCIuY3QtZHAtY2FyZXRcIikuY3NzKHsgXCJsZWZ0XCI6IGwgfSk7XHJcblx0ICAgICAgICAgICAgICAgICQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCkuYWRkQ2xhc3MoXCJjdC1kcC1hY3RpdmVcIik7XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgICAgIGNhc2UgRHVhbFBpY2tlck1vZGUuRnJvbTpcclxuXHQgICAgICAgICAgICAgICAgdmFyIGxmcm9tID0gJCh0aGlzLmlucHV0RnJvbS5uYXRpdmVFbGVtZW50KS5wb3NpdGlvbigpLmxlZnQ7XHJcblx0ICAgICAgICAgICAgICAgICQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCkuZmluZChcIi5jdC1kcC1jYXJldFwiKS5jc3MoeyBcImxlZnRcIjogbGZyb20gfSk7XHJcblx0ICAgICAgICAgICAgICAgICQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCkuYWRkQ2xhc3MoXCJjdC1kcC1hY3RpdmVcIik7XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgICAgIGNhc2UgRHVhbFBpY2tlck1vZGUuSGlkZGVuOlxyXG5cdCAgICAgICAgICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKFwiY3QtZHAtYWN0aXZlXCIpO1xyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG5cdCAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMik7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uRGF0ZUZyb21TdHJpbmdDaGFuZ2UgPSBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICBpZiAodGhpcy5tYXRjaC50ZXN0KHZhbCkpIHtcclxuXHQgICAgICAgICAgICB2YXIgbSA9IG1vbWVudChuZXcgRGF0ZSh2YWwpKTtcclxuXHQgICAgICAgICAgICBpZiAobS5pc1ZhbGlkKCkpIHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUZyb21WYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVGcm9tVmFsdWUgPSBtO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlRnJvbVZhbHVlLnNldChtLnRvT2JqZWN0KCkpO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdERhdGVUbygpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNhbDEuZGF0ZSA9IHRoaXMuZGF0ZUZyb21WYWx1ZTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlRnJvbUNoYW5nZS5lbWl0KHRoaXMuZGF0ZUZyb21WYWx1ZSk7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uRGF0ZVRvU3RyaW5nQ2hhbmdlID0gZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMubWF0Y2gudGVzdCh2YWwpKSB7XHJcblx0ICAgICAgICAgICAgdmFyIG0gPSBtb21lbnQobmV3IERhdGUodmFsKSk7XHJcblx0ICAgICAgICAgICAgaWYgKG0uaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVUb1ZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvVmFsdWUgPSBtO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG9WYWx1ZS5zZXQobS50b09iamVjdCgpKTtcclxuXHQgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlRnJvbSgpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNhbDIuZGF0ZSA9IHRoaXMuZGF0ZVRvVmFsdWU7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRDYWwxKCk7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvQ2hhbmdlLmVtaXQodGhpcy5kYXRlVG9WYWx1ZSk7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnNoaWZ0Q2FsMSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5kYXRlID0gbW9tZW50KHRoaXMuY2FsMi5kYXRlKTtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5kYXRlLnN1YnRyYWN0KHsgXCJtb250aFwiOiAxIH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5zaGlmdENhbDIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLmNhbDIuZGF0ZSA9IG1vbWVudCh0aGlzLmNhbDEuZGF0ZSk7XHJcblx0ICAgICAgICB0aGlzLmNhbDIuZGF0ZS5hZGQoeyBcIm1vbnRoXCI6IDEgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZU1vZGUgPSBmdW5jdGlvbiAobW9kZSwgY2FsKSB7XHJcblx0ICAgICAgICBjYWwuY2hhbmdlTW9kZShtb2RlKTtcclxuXHQgICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhcjpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuZ29QcmV2ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMuY2FsMS5tb2RlID09IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIgJiYgdGhpcy5jYWwyLm1vZGUgPT0gY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhcikge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsMS5kYXRlLm1vbnRoKHRoaXMuY2FsMS5kYXRlLm1vbnRoKCkgLSAxKTtcclxuXHQgICAgICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsMS5nb1ByZXYoKTtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDIuZ29QcmV2KCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmdvTmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLmNhbDEubW9kZSA9PSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyICYmIHRoaXMuY2FsMi5tb2RlID09IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDEuZGF0ZS5tb250aCh0aGlzLmNhbDEuZGF0ZS5tb250aCgpICsgMSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDEuZ29OZXh0KCk7XHJcblx0ICAgICAgICAgICAgdGhpcy5jYWwyLmdvTmV4dCgpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS50b3VjaGVkID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5wcm9wYWdhdGVUb3VjaGVkKHsgZGF0ZUZyb206IHRoaXMuZGF0ZUZyb20sIGRhdGVUbzogdGhpcy5kYXRlVG8gfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmNsb3NlUGlja2VyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0ICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNoYW5nZUdsb2JhbE1vZGVGbihEdWFsUGlja2VyTW9kZS5IaWRkZW4pO1xyXG5cdCAgICAgICAgICAgIHRoaXMudG91Y2hlZCgpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5kYXRlID0gbW9tZW50KHRoaXMuZGF0ZUZyb20pO1xyXG5cdCAgICAgICAgLy8gYnVpbGQgd2hhdCBkYXRlIHNob3VsZCBiZSBvbiB0aGUgc2Vjb25kIGNhbGVuZGFyXHJcblx0ICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG5cdCAgICAgICAgdGhpcy5jYWwxLnN1YnNjcmliZVRvQ2hhbmdlTW9udGgodGhpcy5tb250aDFDaGFuZ2VMaXN0ZW5lcik7XHJcblx0ICAgICAgICB0aGlzLmNhbDIuc3Vic2NyaWJlVG9DaGFuZ2VNb250aCh0aGlzLm1vbnRoMkNoYW5nZUxpc3RlbmVyKTtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5zdWJzY3JpYmVUb0NoYW5nZVllYXIodGhpcy55ZWFyMUNoYW5nZUxpc3RlbmVyKTtcclxuXHQgICAgICAgIHRoaXMuY2FsMi5zdWJzY3JpYmVUb0NoYW5nZVllYXIodGhpcy55ZWFyMkNoYW5nZUxpc3RlbmVyKTtcclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIHRoaXMuaW5wdXRUby5uYXRpdmVFbGVtZW50LnN0eWxlWyd6LWluZGV4J10gPSB0aGlzLnpJbmRleFZhbDtcclxuXHQgICAgICAgIHRoaXMuaW5wdXRGcm9tLm5hdGl2ZUVsZW1lbnQuc3R5bGVbJ3otaW5kZXgnXSA9IHRoaXMuekluZGV4VmFsO1xyXG5cdCAgICAgICAgdGhpcy5pbnB1dEZyb20ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHsgX3RoaXMuY2hhbmdlR2xvYmFsTW9kZShEdWFsUGlja2VyTW9kZS5Gcm9tKTsgfSk7XHJcblx0ICAgICAgICB0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHsgX3RoaXMuY2hhbmdlR2xvYmFsTW9kZShEdWFsUGlja2VyTW9kZS5Ubyk7IH0pO1xyXG5cdCAgICAgICAgdGhpcy5pbnB1dEZyb20ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5vbkRhdGVGcm9tU3RyaW5nQ2hhbmdlKF90aGlzLmlucHV0RnJvbS5uYXRpdmVFbGVtZW50LnZhbHVlKTsgfSk7XHJcblx0ICAgICAgICB0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5vbkRhdGVUb1N0cmluZ0NoYW5nZShfdGhpcy5pbnB1dFRvLm5hdGl2ZUVsZW1lbnQudmFsdWUpOyB9KTtcclxuXHQgICAgICAgIHRoaXMuaW5wdXRUby5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHsgX3RoaXMuY2xvc2VQaWNrZXIoZXZlbnQpOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoaW5wdXRzKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0ICAgICAgICBpZiAodmFsdWUpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVUbyA9IHZhbHVlLmRhdGVUbztcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tID0gdmFsdWUuZGF0ZUZyb207XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gKGMpIHtcclxuXHQgICAgICAgIGlmIChjLnZhbHVlID09IG51bGwpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gXCJJbnZhbGlkIFZhbHVlXCI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAoIShjLnZhbHVlLmRhdGVGcm9tIGluc3RhbmNlb2YgbW9tZW50KSB8fCAhYy52YWx1ZS5kYXRlRnJvbS5pc1ZhbGlkKCkpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gXCJJbnZhbGlkIERhdGVcIjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmICh0aGlzLm1pbkRhdGVWYWwgJiYgdGhpcy5taW5EYXRlVmFsLmlzQWZ0ZXIoYy52YWx1ZS5kYXRlRnJvbSkpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gXCJEYXRlIGNhbm5vdCBiZSBiZWZvcmUgXCIgKyB0aGlzLm1pbkRhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmICh0aGlzLm1heERhdGVWYWwgJiYgdGhpcy5tYXhEYXRlVmFsLmlzQmVmb3JlKGMudmFsdWUuZGF0ZUZyb20pKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRGF0ZSBjYW5ub3QgYmUgYWZ0ZXIgXCIgKyB0aGlzLm1heERhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmICghKGMudmFsdWUuZGF0ZVRvIGluc3RhbmNlb2YgbW9tZW50KSB8fCAhYy52YWx1ZS5kYXRlVG8uaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSW52YWxpZCBEYXRlXCI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAodGhpcy5taW5EYXRlVmFsICYmIHRoaXMubWluRGF0ZVZhbC5pc0FmdGVyKGMudmFsdWUuZGF0ZVRvKSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBcIkRhdGUgY2Fubm90IGJlIGJlZm9yZSBcIiArIHRoaXMubWluRGF0ZVZhbC5mb3JtYXQoXCJtbS9ERC95eXl5XCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgaWYgKHRoaXMubWF4RGF0ZVZhbCAmJiB0aGlzLm1heERhdGVWYWwuaXNCZWZvcmUoYy52YWx1ZS5kYXRlVG8pKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRGF0ZSBjYW5ub3QgYmUgYWZ0ZXIgXCIgKyB0aGlzLm1heERhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBudWxsO1xyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJDYWxlbmRhciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5yZW5kZXJDYWxlbmRhcih0aGlzLmRhdGVDbGlja0xpc3RlbmVyLCB0aGlzLmRhdGVUbywgdGhpcy5kYXRlRnJvbSwgdGhpcy5taW5EYXRlVmFsLCB0aGlzLm1heERhdGVWYWwpO1xyXG5cdCAgICAgICAgdGhpcy5jYWwyLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZVRvLCB0aGlzLmRhdGVGcm9tLCB0aGlzLm1pbkRhdGVWYWwsIHRoaXMubWF4RGF0ZVZhbCk7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnNldERhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG5cdCAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLkZyb206XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUZyb20gPSBkYXRlO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlVG8oKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLlRvKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5UbzpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG8gPSBkYXRlO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlRnJvbSgpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUdsb2JhbE1vZGUoRHVhbFBpY2tlck1vZGUuSGlkZGVuLCB0cnVlKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB0aGlzLnRvdWNoZWQoKTtcclxuXHQgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY29ycmVjdERhdGVUbyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLmRhdGVUbyAmJiB0aGlzLmRhdGVGcm9tLmlzQWZ0ZXIodGhpcy5kYXRlVG8pKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlVG8gPSBtb21lbnQodGhpcy5kYXRlRnJvbSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlVG8uYWRkKHsgXCJkYXlcIjogMSB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY29ycmVjdERhdGVGcm9tID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMuZGF0ZUZyb20gJiYgdGhpcy5kYXRlRnJvbS5pc1ZhbGlkKCkgJiYgdGhpcy5kYXRlVG8uaXNCZWZvcmUodGhpcy5kYXRlRnJvbSkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tID0gbW9tZW50KHRoaXMuZGF0ZVRvKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tLnN1YnRyYWN0KHsgXCJkYXlcIjogMSB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuT3V0cHV0KCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVGcm9tQ2hhbmdlXCIsIHZvaWQgMCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLk91dHB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlVG9DaGFuZ2VcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5wdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZUZyb21cIiwgbnVsbCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLklucHV0KCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVUb1wiLCBudWxsKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5wdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWF0Y2hcIiwgbnVsbCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbnRlbnRDaGlsZCgnZGF0ZVRvJywgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgKHR5cGVvZiAoX2EgPSB0eXBlb2YgY29yZV8xLkVsZW1lbnRSZWYgIT09ICd1bmRlZmluZWQnICYmIGNvcmVfMS5FbGVtZW50UmVmKSA9PT0gJ2Z1bmN0aW9uJyAmJiBfYSkgfHwgT2JqZWN0KVxyXG5cdCAgICBdLCBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnB1dFRvXCIsIHZvaWQgMCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbnRlbnRDaGlsZCgnZGF0ZUZyb20nLCBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCAodHlwZW9mIChfYiA9IHR5cGVvZiBjb3JlXzEuRWxlbWVudFJlZiAhPT0gJ3VuZGVmaW5lZCcgJiYgY29yZV8xLkVsZW1lbnRSZWYpID09PSAnZnVuY3Rpb24nICYmIF9iKSB8fCBPYmplY3QpXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImlucHV0RnJvbVwiLCB2b2lkIDApO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5WaWV3Q2hpbGQoJ2NhbDEnLCBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCAodHlwZW9mIChfYyA9IHR5cGVvZiBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQpID09PSAnZnVuY3Rpb24nICYmIF9jKSB8fCBPYmplY3QpXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNhbDFcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuVmlld0NoaWxkKCdjYWwyJywgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgKHR5cGVvZiAoX2QgPSB0eXBlb2YgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQgIT09ICd1bmRlZmluZWQnICYmIGNhbGVuZGFyX2NvbXBvbmVudF8xLkNhbGVuZGFyQ29tcG9uZW50KSA9PT0gJ2Z1bmN0aW9uJyAmJiBfZCkgfHwgT2JqZWN0KVxyXG5cdCAgICBdLCBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjYWwyXCIsIHZvaWQgMCk7XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnY3QtZHVhbC1waWNrZXInLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSxcclxuXHQgICAgICAgICAgICBzdHlsZXM6IFtfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxNyldLFxyXG5cdCAgICAgICAgICAgIGVuY2Fwc3VsYXRpb246IGNvcmVfMS5WaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG5cdCAgICAgICAgICAgIHByb3ZpZGVyczogW1xyXG5cdCAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IGZvcm1zXzEuTkdfVkFMVUVfQUNDRVNTT1IsIHVzZUV4aXN0aW5nOiBjb3JlXzEuZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBEdWFsUGlja2VyQ29tcG9uZW50OyB9KSwgbXVsdGk6IHRydWUgfSxcclxuXHQgICAgICAgICAgICAgICAgeyBwcm92aWRlOiBmb3Jtc18xLk5HX1ZBTElEQVRPUlMsIHVzZUV4aXN0aW5nOiBjb3JlXzEuZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBEdWFsUGlja2VyQ29tcG9uZW50OyB9KSwgbXVsdGk6IHRydWUgfVxyXG5cdCAgICAgICAgICAgIF1cclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgWyh0eXBlb2YgKF9lID0gdHlwZW9mIGNvcmVfMS5FbGVtZW50UmVmICE9PSAndW5kZWZpbmVkJyAmJiBjb3JlXzEuRWxlbWVudFJlZikgPT09ICdmdW5jdGlvbicgJiYgX2UpIHx8IE9iamVjdF0pXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gRHVhbFBpY2tlckNvbXBvbmVudDtcclxuXHQgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcclxuXHR9KGRhdGVwaWNrZXJfYmFzZV8xLkRhdGVQaWNrZXJCYXNlKSk7XHJcblx0ZXhwb3J0cy5EdWFsUGlja2VyQ29tcG9uZW50ID0gRHVhbFBpY2tlckNvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjdC1kcC1zaGFkb3ctYm94XFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkhpZGRlbilcXFwiICpuZ0lmPVxcXCJtb2RlICE9IER1YWxQaWNrZXJNb2RlLkhpZGRlblxcXCIgW3N0eWxlLnotaW5kZXhdPVxcXCJzaGFkb3daSW5kZXhcXFwiPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImN0LWRwLXBpY2tlciBjdC1kcC1kdWFscGlja2VyXFxcIiBbY2xhc3MuaGlkZGVuXT1cXFwibW9kZSA9PSBEdWFsUGlja2VyTW9kZS5IaWRkZW5cXFwiIFtjbGFzcy5jdC1kcC1waWNrZXItdG9dPVxcXCJtb2RlID09IER1YWxQaWNrZXJNb2RlLlRvXFxcIiBbc3R5bGUuei1pbmRleF09XFxcInpJbmRleFZhbFxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImN0LWRwLWNhcmV0IGN0LWRwLWNhcmV0LTFcXFwiPjwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1jYXJldCBjdC1kcC1jYXJldC0yXFxcIj48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtaGVhZGVyXFxcIj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1wcmV2ICBjdC1kcC1idG5cXFwiIChjbGljayk9XFxcImdvUHJldigpXFxcIiBbZGlzYWJsZWRdPVxcXCJjYWwxLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoIHx8IGNhbDIubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGhcXFwiPiZsdDs8L2J1dHRvbj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1tb250aCBjdC1kcC1idG5cXFwiIFtkaXNhYmxlZF09XFxcImNhbDIubW9kZSAhPSBDYWxlbmRhck1vZGUuQ2FsZW5kYXJcXFwiIChjbGljayk9XFxcImNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLk1vbnRoLCBjYWwxKVxcXCI+e3tjYWwxLmRhdGUuZm9ybWF0KFxcXCJNTU1NXFxcIil9fTwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXllYXIgIGN0LWRwLWJ0blxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsMi5tb2RlICE9IENhbGVuZGFyTW9kZS5DYWxlbmRhclxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuWWVhciwgY2FsMSlcXFwiPnt7Y2FsMS5kYXRlLmZvcm1hdChcXFwiWVlZWVxcXCIpfX08L2J1dHRvbj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1uZXh0ICBjdC1kcC1idG5cXFwiIFtkaXNhYmxlZF09XFxcInRydWVcXFwiPjwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXByZXYgIGN0LWRwLWJ0blxcXCIgW2Rpc2FibGVkXT1cXFwidHJ1ZVxcXCI+PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbW9udGggY3QtZHAtYnRuXFxcIiBbZGlzYWJsZWRdPVxcXCJjYWwxLm1vZGUgIT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5Nb250aCwgY2FsMilcXFwiPnt7Y2FsMi5kYXRlLmZvcm1hdChcXFwiTU1NTVxcXCIpfX08L2J1dHRvbj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi15ZWFyICBjdC1kcC1idG5cXFwiIFtkaXNhYmxlZF09XFxcImNhbDEubW9kZSAhPSBDYWxlbmRhck1vZGUuQ2FsZW5kYXJcXFwiIChjbGljayk9XFxcImNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLlllYXIsIGNhbDIpXFxcIj57e2NhbDIuZGF0ZS5mb3JtYXQoXFxcIllZWVlcXFwiKX19PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbmV4dCAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJnb05leHQoKVxcXCIgW2Rpc2FibGVkXT1cXFwidGhpcy5jYWwxLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoIHx8IHRoaXMuY2FsMi5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmd0OzwvYnV0dG9uPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGN0LWNhbGVuZGFyICNjYWwxIFtuZ0NsYXNzXT1cXFwieydjdC1kcC1jYWwtaW5hY3RpdmUnOiBjYWwyLm1vZGUgIT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyfVxcXCI+PC9jdC1jYWxlbmRhcj5cXHJcXG4gICAgPGN0LWNhbGVuZGFyICNjYWwyIFtuZ0NsYXNzXT1cXFwieydjdC1kcC1jYWwtaW5hY3RpdmUnOiBjYWwxLm1vZGUgIT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyfVxcXCI+PC9jdC1jYWxlbmRhcj5cXHJcXG48L2Rpdj5cIjtcblxuLyoqKi8gfSxcbi8qIDIwICovXG4xM1xuLyoqKioqKi8gXSkpKVxufSk7XG47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGN0bmcudW1kLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDI2OGM4YTk2NmVhNTc5NDdlOGQ2IiwiZXhwb3J0IHtEYXRlUGlja2VyTW9kdWxlfSBmcm9tICcuL2RhdGVwaWNrZXIubW9kdWxlJztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9saWIudHMiLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmltcG9ydCB7IERhdGVQaWNrZXJDb21wb25lbnQgfSBmcm9tICcuL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBEdWFsUGlja2VyQ29tcG9uZW50IH0gZnJvbSAnLi9kdWFscGlja2VyL2R1YWxwaWNrZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENhbGVuZGFyR3JpZENvbXBvbmVudCB9IGZyb20gJy4vY2FsZW5kYXItZ3JpZC9jYWxlbmRhci1ncmlkLmNvbXBvbmVudCc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGV4cG9ydHM6IFtcclxuICAgIERhdGVQaWNrZXJDb21wb25lbnQsXHJcbiAgICBEdWFsUGlja2VyQ29tcG9uZW50LFxyXG4gICAgXSxcclxuICBkZWNsYXJhdGlvbnM6IFtcclxuICAgIERhdGVQaWNrZXJDb21wb25lbnQsXHJcbiAgICBEdWFsUGlja2VyQ29tcG9uZW50LFxyXG4gICAgQ2FsZW5kYXJDb21wb25lbnQsXHJcbiAgICBDYWxlbmRhckdyaWRDb21wb25lbnRdLFxyXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEZvcm1zTW9kdWxlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0ZVBpY2tlck1vZHVsZSB7XHJcblxyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9hbmd1bGFyMi10ZW1wbGF0ZS1sb2FkZXIhLi9zcmMvZGF0ZXBpY2tlci5tb2R1bGUudHMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAYW5ndWxhci9jb21tb25cIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvZm9ybXNcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQge1xyXG4gIENvbXBvbmVudCwgZm9yd2FyZFJlZiwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0LFxyXG4gIE9uRGVzdHJveSwgQ29udGVudENoaWxkLCBFbGVtZW50UmVmLCBPbkluaXQsIFJlbmRlcmVyLCBWaWV3RW5jYXBzdWxhdGlvbixcclxuICBJbnB1dCwgVmlld0NoaWxkLCBRdWVyeUxpc3QsIE91dHB1dCwgRXZlbnRFbWl0dGVyXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBDYWxlbmRhckNvbXBvbmVudCB9IGZyb20gJy4uL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENhbGVuZGFyTW9kZSB9IGZyb20gJy4uL2NvbW1vbi9jYWxlbmRhci1tb2RlJztcclxuaW1wb3J0ICogYXMgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SLCBOR19WQUxJREFUT1JTIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBEYXRlUGlja2VyQmFzZSB9IGZyb20gJy4uL2NvbW1vbi9kYXRlcGlja2VyLWJhc2UnO1xyXG5cclxuZXhwb3J0IGVudW0gRGF0ZVBpY2tlck1vZGUge1xyXG4gIFZpc2libGUsIEhpZGRlblxyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2N0LWRhdGUtcGlja2VyJyxcclxuICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9kYXRlcGlja2VyLmNvbXBvbmVudC5odG1sJyksXHJcbiAgc3R5bGVzOiBbcmVxdWlyZSgnLi9kYXRlcGlja2VyLmNvbXBvbmVudC5sZXNzJyksIHJlcXVpcmUoJy4uL2NvbW1vbi9jb21tb24ubGVzcycpXSxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgeyBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUiwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRGF0ZVBpY2tlckNvbXBvbmVudCksIG11bHRpOiB0cnVlIH0sXHJcbiAgICB7IHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IERhdGVQaWNrZXJDb21wb25lbnQpLCBtdWx0aTogdHJ1ZSB9XHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0ZVBpY2tlckNvbXBvbmVudCBleHRlbmRzIERhdGVQaWNrZXJCYXNlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgLyoqIEVudW0gQWNjZXNzb3JzIGZvciBIVE1MICovXHJcbiAgcHVibGljIENhbGVuZGFyTW9kZSA9IENhbGVuZGFyTW9kZTtcclxuICBwdWJsaWMgRGF0ZVBpY2tlck1vZGUgPSBEYXRlUGlja2VyTW9kZTtcclxuXHJcbiAgQE91dHB1dCgpIGRhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgcHJpdmF0ZSBkYXRlVmFsdWU6IG1vbWVudC5Nb21lbnQ7XHJcbiAgQElucHV0KClcclxuICBnZXQgZGF0ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGVWYWx1ZTtcclxuICB9XHJcbiAgc2V0IGRhdGUodmFsKSB7XHJcbiAgICBpZiAodmFsIGluc3RhbmNlb2YgbW9tZW50ICYmIHZhbC5pc1ZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gdmFsLmZvcm1hdChcIk1NL0REL1lZWVlcIik7XHJcbiAgICAgIHRoaXMuZGF0ZVZhbHVlID0gdmFsO1xyXG4gICAgICB0aGlzLmRhdGVDaGFuZ2UuZW1pdCh2YWwpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UodmFsKTtcclxuICB9XHJcbiAgcHJpdmF0ZSB2YWxpZERhdGVFeHByZXNzaW9uOiBSZWdFeHA7XHJcbiAgQElucHV0KClcclxuICBnZXQgbWF0Y2goKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWxpZERhdGVFeHByZXNzaW9uIHx8IC9eKCgwP1sxMzU3OF18MTB8MTIpKC18XFwvKSgoWzEtOV0pfCgwWzEtOV0pfChbMTJdKShbMC05XT8pfCgzWzAxXT8pKSgtfFxcLykoKDE5KShbMi05XSkoXFxkezF9KXwoMjApKFswMV0pKFxcZHsxfSl8KFs4OTAxXSkoXFxkezF9KSl8KDA/WzI0NjldfDExKSgtfFxcLykoKFsxLTldKXwoMFsxLTldKXwoWzEyXSkoWzAtOV0/KXwoM1swXT8pKSgtfFxcLykoKDE5KShbMi05XSkoXFxkezF9KXwoMjApKFswMV0pKFxcZHsxfSl8KFs4OTAxXSkoXFxkezF9KSkpJC87XHJcbiAgfVxyXG4gIHNldCBtYXRjaCh2YWwpIHtcclxuICAgIHRoaXMudmFsaWREYXRlRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAodmFsKTtcclxuICB9XHJcblxyXG4gIEBDb250ZW50Q2hpbGQoJ2RhdGUnKSBpbnB1dDogRWxlbWVudFJlZjtcclxuXHJcbiAgQFZpZXdDaGlsZChDYWxlbmRhckNvbXBvbmVudCkgcHVibGljIGNhbDogQ2FsZW5kYXJDb21wb25lbnQ7XHJcbiAgcHVibGljIG1vZGU6IERhdGVQaWNrZXJNb2RlID0gRGF0ZVBpY2tlck1vZGUuSGlkZGVuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15RWxlbWVudDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25EYXRlU3RyaW5nQ2hhbmdlKHZhbCkge1xyXG4gICAgaWYgKHRoaXMubWF0Y2gudGVzdCh2YWwpKSB7XHJcbiAgICAgIGxldCBtID0gbW9tZW50KG5ldyBEYXRlKHZhbCkpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZGF0ZVZhbHVlID09PSB1bmRlZmluZWQpIHsgdGhpcy5kYXRlVmFsdWUgPSBtOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGVWYWx1ZS5zZXQobS50b09iamVjdCgpKTsgfVxyXG5cclxuICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodGhpcy5kYXRlVmFsdWUpO1xyXG4gICAgICBpZiAobS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICB0aGlzLmNhbC5kYXRlID0gdGhpcy5kYXRlVmFsdWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jYWwuZGF0ZSA9IG1vbWVudCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudG91Y2hlZCgpO1xyXG4gICAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh2YWwpO1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlR2xvYmFsTW9kZShtb2RlOiBEYXRlUGlja2VyTW9kZSkge1xyXG4gICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcbiAgICAgIGNhc2UgRGF0ZVBpY2tlck1vZGUuVmlzaWJsZTpcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmFkZENsYXNzKFwiY3QtZHAtYWN0aXZlXCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIERhdGVQaWNrZXJNb2RlLkhpZGRlbjpcclxuICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKFwiY3QtZHAtYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0b3VjaGVkKCkge1xyXG4gICAgdGhpcy5wcm9wYWdhdGVUb3VjaGVkKHRoaXMuZGF0ZSk7XHJcbiAgfVxyXG4gIFxyXG4gIHB1YmxpYyBjaGFuZ2VNb2RlKG1vZGU6IENhbGVuZGFyTW9kZSkge1xyXG4gICAgdGhpcy5jYWwuY2hhbmdlTW9kZShtb2RlKTtcclxuICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICBjYXNlIENhbGVuZGFyTW9kZS5DYWxlbmRhcjpcclxuICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ29QcmV2KCkge1xyXG4gICAgaWYgKHRoaXMuY2FsLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKSB7XHJcbiAgICAgIHRoaXMuY2FsLmRhdGUubW9udGgodGhpcy5jYWwuZGF0ZS5tb250aCgpIC0gMSk7XHJcbiAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2FsLmdvUHJldigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdvTmV4dCgpIHtcclxuICAgIGlmICh0aGlzLmNhbC5tb2RlID09IENhbGVuZGFyTW9kZS5DYWxlbmRhcikge1xyXG4gICAgICB0aGlzLmNhbC5kYXRlLm1vbnRoKHRoaXMuY2FsLmRhdGUubW9udGgoKSArIDEpO1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNhbC5nb05leHQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xvc2VQaWNrZXIoZXZlbnQpIHtcclxuICAgIGlmKGV2ZW50LndoaWNoID09PSA5KSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5kYXRlIGluc3RhbmNlb2YgbW9tZW50ICYmIHRoaXMuZGF0ZS5pc1ZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5jYWwuZGF0ZSA9IG1vbWVudCh0aGlzLmRhdGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jYWwuZGF0ZSA9IG1vbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsLnN1YnNjcmliZVRvQ2hhbmdlTW9udGgodGhpcy5tb250aENoYW5nZUxpc3RlbmVyKTtcclxuICAgIHRoaXMuY2FsLnN1YnNjcmliZVRvQ2hhbmdlWWVhcih0aGlzLnllYXJDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhpbnB1dHMpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCduZ09uQ2hhbmdlcycpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnN0eWxlWyd6LWluZGV4J10gPSB0aGlzLnpJbmRleFZhbDtcclxuICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHsgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLlZpc2libGUpIH0pO1xyXG4gICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7IHRoaXMub25EYXRlU3RyaW5nQ2hhbmdlKHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSkgfSk7XHJcbiAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4geyB0aGlzLmNsb3NlUGlja2VyKGV2ZW50KTsgfSk7XHJcbiAgfVxyXG5cclxuICBkYXRlQ2xpY2tMaXN0ZW5lciA9IChkYXRlOiBtb21lbnQuTW9tZW50KSA9PiB7XHJcbiAgICBsZXQgZCA9IG1vbWVudChkYXRlKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0RGF0ZShkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbW9udGhDaGFuZ2VMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB5ZWFyQ2hhbmdlTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuICB9XHJcblxyXG4gIHNldERhdGUoZGF0ZTogbW9tZW50Lk1vbWVudCkge1xyXG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuICAgICAgY2FzZSBEYXRlUGlja2VyTW9kZS5WaXNpYmxlOlxyXG4gICAgICAgIHRoaXMudG91Y2hlZCgpO1xyXG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLkhpZGRlbik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuXHJcbiAgfVxyXG5cclxuICByZW5kZXJDYWxlbmRhcigpIHtcclxuICAgIHRoaXMuY2FsLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZSwgdGhpcy5kYXRlLCB0aGlzLm1pbkRhdGVWYWwsIHRoaXMubWF4RGF0ZVZhbCk7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgdGhpcy5kYXRlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YWxpZGF0ZShjOiBGb3JtQ29udHJvbCkge1xyXG4gICAgaWYgKCEoYy52YWx1ZSBpbnN0YW5jZW9mIG1vbWVudCkgfHwgIWMudmFsdWUuaXNWYWxpZCgpKSB7XHJcbiAgICAgIHJldHVybiBcIkludmFsaWQgRGF0ZVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubWluRGF0ZVZhbCAmJiB0aGlzLm1pbkRhdGVWYWwuaXNBZnRlcihjLnZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gXCJEYXRlIGNhbm5vdCBiZSBiZWZvcmUgXCIgKyB0aGlzLm1pbkRhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm1heERhdGVWYWwgJiYgdGhpcy5tYXhEYXRlVmFsLmlzQmVmb3JlKGMudmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBcIkRhdGUgY2Fubm90IGJlIGFmdGVyIFwiICsgdGhpcy5tYXhEYXRlVmFsLmZvcm1hdChcIm1tL0REL3l5eXlcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9kYXRlcGlja2VyL2RhdGVwaWNrZXIuY29tcG9uZW50LnRzIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIm1vbWVudFwiXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkRlc3Ryb3ksIEVsZW1lbnRSZWYsIFJlbmRlcmVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJNb2RlIH0gZnJvbSAnLi4vY29tbW9uL2NhbGVuZGFyLW1vZGUnO1xyXG5pbXBvcnQgeyBDYWxlbmRhckdyaWRDb21wb25lbnQgfSBmcm9tICcuLi9jYWxlbmRhci1ncmlkL2NhbGVuZGFyLWdyaWQuY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdjdC1jYWxlbmRhcicsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9jYWxlbmRhci5jb21wb25lbnQuaHRtbCcpLFxyXG4gICAgc3R5bGVzOiBbcmVxdWlyZSgnLi9jYWxlbmRhci5jb21wb25lbnQubGVzcycpXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG4gICAgLyoqIERldGVybWluZXMgaG93IG1hbnkgeWVhciBidXR0b25zIGFyZSBzaG93bi4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIG51bVllYXJzU2hvd24gPSAxNTtcclxuICAgIC8qKiBjb252ZW5pZW5jZSB2YXJpYWJsZSBmb3IgZ2VuZXJhdGluZyB5ZWFycyAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaGFsZk51bVllYXJzU2hvd24gPSBNYXRoLmZsb29yKENhbGVuZGFyQ29tcG9uZW50Lm51bVllYXJzU2hvd24gLyAyKTtcclxuICAgIC8qKiBBY2Nlc3NvciB0byB0aGUgbW9kZSBmb3IgaHRtbCAqL1xyXG4gICAgcHVibGljIENhbGVuZGFyTW9kZSA9IENhbGVuZGFyTW9kZTtcclxuICAgIHB1YmxpYyBtb2RlOiBDYWxlbmRhck1vZGUgPSBDYWxlbmRhck1vZGUuQ2FsZW5kYXI7XHJcbiAgICAvKiogRGF0ZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBtb250aC95ZWFyIHNob3duIG9uIHRoaXMgY2FsZW5kYXIgKi9cclxuICAgIHB1YmxpYyBkYXRlOiBtb21lbnQuTW9tZW50O1xyXG4gICAgLyoqIERhdGUgb2JqZWN0IHJlcHJlc2VudGluZyB0b2RheS5UaGlzIGhzb3VsZCBuZXZlciBjaGFuZ2UgaW4gdGhlIHJlbmRlcmluZyBvZiB0aGUgY2FsZW5kYXIgZ3JpZCAqL1xyXG4gICAgcHVibGljIHRvZGF5OiBtb21lbnQuTW9tZW50O1xyXG4gICAgLyoqIEFycmF5IG9mIG1vbnRocyB0byBzaG93IHdoZW4gc2VsZWN0aW5nIGEgbmV3IG1vbnRoICovXHJcbiAgICBwcml2YXRlIG1vbnRoczogc3RyaW5nW10gPSBbXTtcclxuICAgIC8qKiBBcnJheSBvZiB5ZWFycyB0byBzaG93IHdoZW4gc2VsZWN0aW5nIGEgbmV3IHllYXIgKi9cclxuICAgIHByaXZhdGUgeWVhcnM6IG51bWJlcltdID0gW107XHJcbiAgICBnZXQgeWVhckRhdGEoKTogbnVtYmVyW10ge3JldHVybiB0aGlzLnllYXJzfTtcclxuICAgIC8qKiBMaXN0ZW5lcnMgZm9yIG1vbnRoIGNoYW5nZSAqL1xyXG4gICAgcHJpdmF0ZSBtb250aExpc3RlbmVyczogRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgLyoqIExpc3RlbmVycyBmb3IgeWVhciBjaGFuZ2UgKi9cclxuICAgIHByaXZhdGUgeWVhckxpc3RlbmVyczogRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgLyoqIEdyaWQgdmlldyBjaGlsZCBjb21wb25lbnQgKGFjdHVhbGx5IHNob3dzIHRoZSBudW1iZXIgZ3JpZCkgKi9cclxuICAgIEBWaWV3Q2hpbGQoQ2FsZW5kYXJHcmlkQ29tcG9uZW50KSBwdWJsaWMgZ3JpZDogQ2FsZW5kYXJHcmlkQ29tcG9uZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aERhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHsgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7IH1cclxuXHJcbiAgICBzdWJzY3JpYmVUb0NoYW5nZU1vbnRoKGxpc3RlbmVyOiBGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMubW9udGhMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlVG9DaGFuZ2VZZWFyKGxpc3RlbmVyOiBGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMueWVhckxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VNb2RlKG1vZGU6IENhbGVuZGFyTW9kZSkge1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLlllYXI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhckRhdGEodGhpcy5kYXRlLnllYXIoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZU1vbnRoRGF0YSgpIHtcclxuICAgICAgICBsZXQgZGF0ZSA9IG1vbWVudChuZXcgRGF0ZSgpKTsgLy9kb2Vzbid0IGNoYW5nZVxyXG4gICAgICAgIGRhdGUubW9udGgoMCk7XHJcbiAgICAgICAgbGV0IGQgPSBtb21lbnQobmV3IERhdGUoKSk7XHJcbiAgICAgICAgZC5tb250aCgwKTtcclxuICAgICAgICB3aGlsZSAoZGF0ZS55ZWFyKCkgPT09IGQueWVhcigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzLnB1c2goZC5mb3JtYXQoXCJNTU1cIikpO1xyXG4gICAgICAgICAgICBkLm1vbnRoKGQubW9udGgoKSArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlWWVhckRhdGEoeWVhcjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy55ZWFycyA9IFtdO1xyXG4gICAgICAgIGxldCB5ID0geWVhciAtIENhbGVuZGFyQ29tcG9uZW50LmhhbGZOdW1ZZWFyc1Nob3duO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2FsZW5kYXJDb21wb25lbnQubnVtWWVhcnNTaG93bjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMueWVhcnMucHVzaCh5ICsgaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdvUHJldigpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5DYWxlbmRhcjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5Nb250aDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5ZZWFyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJEYXRhKHRoaXMueWVhcnNbQ2FsZW5kYXJDb21wb25lbnQuaGFsZk51bVllYXJzU2hvd25dIC0gQ2FsZW5kYXJDb21wb25lbnQubnVtWWVhcnNTaG93bik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdvTmV4dCgpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5DYWxlbmRhcjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5Nb250aDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5ZZWFyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJEYXRhKHRoaXMueWVhcnNbQ2FsZW5kYXJDb21wb25lbnQuaGFsZk51bVllYXJzU2hvd25dICsgQ2FsZW5kYXJDb21wb25lbnQubnVtWWVhcnNTaG93bik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckNhbGVuZGFyKGNsaWNrQ2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRlVG86IG1vbWVudC5Nb21lbnQsIGRhdGVGcm9tOiBtb21lbnQuTW9tZW50LCBtaW5EYXRlOiBtb21lbnQuTW9tZW50LCBtYXhEYXRlOiBtb21lbnQuTW9tZW50KSB7XHJcbiAgICAgICAgdGhpcy5ncmlkLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZSwgY2xpY2tDYWxsYmFjaywgZGF0ZVRvLCBkYXRlRnJvbSwgbWluRGF0ZSwgbWF4RGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9udGgoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZGF0ZS5tb250aChpbmRleCk7XHJcbiAgICAgICAgZm9yIChsZXQgZm4gb2YgdGhpcy5tb250aExpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRZZWFyKHllYXI6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZGF0ZS55ZWFyKHllYXIpO1xyXG4gICAgICAgIGZvciAobGV0IGZuIG9mIHRoaXMueWVhckxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQudHMiLCJleHBvcnQgZW51bSBDYWxlbmRhck1vZGUge1xyXG4gICAgQ2FsZW5kYXIsIE1vbnRoLCBZZWFyXHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9jb21tb24vY2FsZW5kYXItbW9kZS50cyIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkRlc3Ryb3ksIEVsZW1lbnRSZWYsIFJlbmRlcmVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IENhbGVuZGFyQ29tcG9uZW50IH0gZnJvbSAnLi4vY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50JztcclxuaW1wb3J0ICogYXMgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2N0LWNhbGVuZGFyLWdyaWQnLFxyXG4gICAgdGVtcGxhdGU6ICcnLFxyXG4gICAgc3R5bGVzOiBbcmVxdWlyZSgnLi9jYWxlbmRhci1ncmlkLmNvbXBvbmVudC5sZXNzJyldLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXJHcmlkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIHByaXZhdGUgdG9kYXk6IG1vbWVudC5Nb21lbnQgPSBtb21lbnQoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15RWxlbWVudDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyBhIGNhbGVuZGFyIGJhc2VkIG9uIHRoZSBkYXRlLCBzZWxlY3RpbmcgdGhlIHByb3BlciBmcm9tL3RvIGlmIHZpc2libGUuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckNhbGVuZGFyKGRhdGU6IG1vbWVudC5Nb21lbnQsIGNsaWNrQ2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRlVG86IG1vbWVudC5Nb21lbnQsIGRhdGVGcm9tOiBtb21lbnQuTW9tZW50LCBtaW5EYXRlOiBtb21lbnQuTW9tZW50LCBtYXhEYXRlOiBtb21lbnQuTW9tZW50KSB7XHJcbiAgICAgICAgbGV0IGQgPSBtb21lbnQoZGF0ZSk7XHJcbiAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXIgPSAkKFwiPGRpdiBjbGFzcz0nY3QtZHAtY2FsLWhlYWRlcic+PC9kaXY+XCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGQuZGF5KGkpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGVsID0gJChcIjxkaXY+PC9kaXY+XCIpO1xyXG4gICAgICAgICAgICBlbC50ZXh0KGQuZm9ybWF0KFwiZGRcIikpO1xyXG4gICAgICAgICAgICBlbC5hdHRyKFwiY3QtY2FsLWRwLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImN0LWRwLWNhbC1kYXlcIik7IFxyXG5cclxuICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkLmRhdGUoMSk7IC8vcmVzZXQgZGF0ZS5cclxuICAgICAgICBcclxuICAgICAgICBsZXQgYm9keSA9ICQoXCI8ZGl2IGNsYXNzPSdjdC1kcC1jYWwtYm9keSc+PC9kaXY+XCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5kYXkoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBlbCA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcclxuXHJcbiAgICAgICAgICAgIGVsLmF0dHIoXCJjdC1kcC1jYWwtZGF5XCIsIGkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiY3QtZHAtY2FsLWRheVwiKTtcclxuICAgICAgICAgICAgYm9keS5hcHBlbmQoZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2hpbGUgKGQubW9udGgoKSA9PT0gZGF0ZS5tb250aCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBlbCA9ICQoXCI8YnV0dG9uPjwvYnV0dG9uPlwiKTtcclxuICAgICAgICAgICAgZWwudGV4dCgoZC5kYXRlKCkpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIGVsLmF0dHIoXCJjdC1kcC1jYWwtZGF5XCIsIGQuZGF0ZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBlbC5hdHRyKFwidGFiSW5kZXhcIiwgXCItMVwiKTtcclxuICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJjdC1kcC1jYWwtZGF5XCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudG9kYXkuZGF0ZSgpID09PSBkLmRhdGUoKSAmJiB0aGlzLnRvZGF5Lm1vbnRoKCkgPT09IGQubW9udGgoKSkgeyBlbC5hZGRDbGFzcyhcInRvZGF5XCIpOyB9XHJcblxyXG4gICAgICAgICAgICBpZiAoKGRhdGVUbyAmJiBkLmlzU2FtZShkYXRlVG8sIFwiZGF5XCIpKSB8fCAoZGF0ZUZyb20gJiYgZC5pc1NhbWUoZGF0ZUZyb20sIFwiZGF5XCIpKSkge1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGVGcm9tICYmIGRhdGVUbyAmJiBkLmlzQmV0d2VlbihkYXRlRnJvbSwgZGF0ZVRvKSkge1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJiZXR3ZWVuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYXhEYXRlICYmIG1pbkRhdGUgJiYgZC5pc0JlZm9yZShtaW5EYXRlKSB8fCBkLmlzQWZ0ZXIobWF4RGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGVsLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsLmNsaWNrKGNsaWNrQ2FsbGJhY2soZCkpO1xyXG4gICAgICAgICAgICBkLmRhdGUoZC5kYXRlKCkgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIGJvZHkuYXBwZW5kKGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KS5lbXB0eSgpO1xyXG4gICAgICAgIGhlYWRlci5hcHBlbmRUbyh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICBib2R5LmFwcGVuZFRvKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVwcmVjYXRlZCB1bnRpbCBzdXBwb3J0IG9mIHJlbmRlcmVyIGlzIG1vcmUgc3RhYmxlLlxyXG4gICAgICovXHJcbiAgICByZW5kZXJDYWxlbmRhclJlbmRlcmVyKGNhbDogQ2FsZW5kYXJDb21wb25lbnQsIGNsaWNrQ2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRlVG86IG1vbWVudC5Nb21lbnQsIGRhdGVGcm9tOiBtb21lbnQuTW9tZW50KSB7XHJcbiAgICAgICAgbGV0IGQgPSBtb21lbnQoY2FsLmRhdGUpO1xyXG4gICAgICAgIGQuZGF0ZSgxKTsgLy9yZXNldCBkYXRlLlxyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNlbGVjdFJvb3RFbGVtZW50KHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGhlYWRlckVsZW1lbnQsIFwiLmN0LWRwLWNhbC1oZWFkZXJcIiwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgY2FsRWxlbWVudCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhoZWFkZXJFbGVtZW50LCBcIi5jdC1kcC1jYWwtYm9keVwiLCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy9BZGQgbmFtZSBmb3IgZGF5IG9mIHdlZWtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDc7IGkrKykge1xyXG4gICAgICAgICAgICBkLmRheShpKTtcclxuICAgICAgICAgICAgbGV0IGVsOiBFbGVtZW50UmVmID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KGhlYWRlckVsZW1lbnQsIFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFRleHQoZWwsIGQuZm9ybWF0KFwiZGRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIFwiY3QtY2FsLWRwLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblxyXG4gICAgICAgIC8vQWRkIGJsYW5rIGZpbGxlciBkYXlzLlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5kYXkoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBlbDogRWxlbWVudFJlZiA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudChjYWxFbGVtZW50LCBcImRpdlwiKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50QXR0cmlidXRlKGVsLCBcImN0LWRwLWNhbC1kYXlcIiwgaS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vQWRkIGNhbGVuZGFyXHJcbiAgICAgICAgd2hpbGUgKGQubW9udGgoKSA9PT0gY2FsLmRhdGUubW9udGgoKSkge1xyXG4gICAgICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcztcclxuICAgICAgICAgICAgbGV0IGVsOiBFbGVtZW50UmVmID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KGNhbEVsZW1lbnQsIFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFRleHQoZWwsIChkLmRhdGUoKSkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIGQuZGF0ZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIFwidGFiaW5kZXhcIiwgXCItMVwiKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKChkYXRlVG8gJiYgZC5pc1NhbWUoZGF0ZVRvLCBcImRheVwiKSkgfHwgKGRhdGVGcm9tICYmIGQuaXNTYW1lKGRhdGVGcm9tLCBcImRheVwiKSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGVsLCBcImFjdGl2ZVwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0ZUZyb20gJiYgZGF0ZVRvICYmIGQuaXNCZXR3ZWVuKGRhdGVGcm9tLCBkYXRlVG8pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJiZXR3ZWVuXCIsIHRydWUpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihlbCwgXCJjbGlja1wiLCBjbGlja0NhbGxiYWNrKGQpKTtcclxuICAgICAgICAgICAgZC5kYXRlKGQuZGF0ZSgpICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vYW5ndWxhcjItdGVtcGxhdGUtbG9hZGVyIS4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQudHMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTBfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImpxdWVyeVwiXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiLnRvZGF5e2ZvbnQtd2VpZ2h0OjcwMH1cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQubGVzc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImN0LWRwLWNhbFxcXCIgW25nQ2xhc3NdPVxcXCJ7J2hpZGRlbic6IG1vZGUgIT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyfVxcXCI+XFxyXFxuICAgIDxjdC1jYWxlbmRhci1ncmlkPjwvY3QtY2FsZW5kYXItZ3JpZD5cXHJcXG48L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjdC1kcC1tb250aHNcXFwiIFtuZ0NsYXNzXT1cXFwieydoaWRkZW4nOiBtb2RlICE9IENhbGVuZGFyTW9kZS5Nb250aH1cXFwiPlxcclxcbiAgICA8dGVtcGxhdGUgbmdGb3IgbGV0LWl0ZW0gW25nRm9yT2ZdPVxcXCJtb250aHNcXFwiIFtuZ0ZvclRyYWNrQnldPVxcXCJteVRyYWNrQnlcXFwiIGxldC1pPVxcXCJpbmRleFxcXCI+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4gY3QtZHAtbW9udGhcXFwiIChjbGljayk9XFxcInNldE1vbnRoKGkpXFxcIj57e2l0ZW19fTwvYnV0dG9uPlxcclxcbiAgICA8L3RlbXBsYXRlPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImN0LWRwLXllYXJzXFxcIiBbbmdDbGFzc109XFxcInsnaGlkZGVuJzogbW9kZSAhPSBDYWxlbmRhck1vZGUuWWVhcn1cXFwiPlxcclxcbiAgICA8dGVtcGxhdGUgbmdGb3IgbGV0LWl0ZW0gW25nRm9yT2ZdPVxcXCJ5ZWFyc1xcXCIgW25nRm9yVHJhY2tCeV09XFxcIm15VHJhY2tCeVxcXCIgbGV0LWk9XFxcImluZGV4XFxcIj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0biBjdC1kcC15ZWFyXFxcIiAoY2xpY2spPVxcXCJzZXRZZWFyKGl0ZW0pXFxcIj57e2l0ZW19fTwvYnV0dG9uPlxcclxcbiAgICA8L3RlbXBsYXRlPlxcclxcbjwvZGl2PlwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudC5odG1sXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiXCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQubGVzc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHtcclxuICBDb21wb25lbnQsIGZvcndhcmRSZWYsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCxcclxuICBPbkRlc3Ryb3ksIENvbnRlbnRDaGlsZCwgRWxlbWVudFJlZiwgT25Jbml0LCBSZW5kZXJlciwgVmlld0VuY2Fwc3VsYXRpb24sXHJcbiAgSW5wdXQsIFZpZXdDaGlsZCwgUXVlcnlMaXN0LCBPdXRwdXQsIEV2ZW50RW1pdHRlclxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuLi9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDYWxlbmRhck1vZGUgfSBmcm9tICcuLi9jb21tb24vY2FsZW5kYXItbW9kZSc7XHJcbmltcG9ydCAqIGFzICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgRm9ybUNvbnRyb2wsIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiwgTkdfVkFMSURBVE9SUyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEYXRlUGlja2VyQmFzZSBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuICAvKiogRW51bSBBY2Nlc3NvcnMgZm9yIEhUTUwgKi9cclxuICBwdWJsaWMgQ2FsZW5kYXJNb2RlID0gQ2FsZW5kYXJNb2RlO1xyXG5cclxuICAvKiogVmFsaWRhdGlvbiBGdW5jdGlvbnMgKi9cclxuICBwcm9wYWdhdGVDaGFuZ2U6IGFueSA9ICgpID0+IHsgfTtcclxuICBwcm9wYWdhdGVUb3VjaGVkOiBhbnkgPSAoKSA9PiB7IH07XHJcbiAgdmFsaWRhdGVGbjogYW55ID0gKCkgPT4geyB9O1xyXG5cclxuICBzaGFkb3daSW5kZXg6IG51bWJlciA9IDEwMDtcclxuICB6SW5kZXhWYWw6IG51bWJlciA9IDEwMTtcclxuICBASW5wdXQoJ3pJbmRleCcpIHNldCB6SW5kZXgodmFsOiBudW1iZXIpIHtcclxuICAgIHRoaXMuc2hhZG93WkluZGV4ID0gdmFsO1xyXG4gICAgdGhpcy56SW5kZXhWYWwgPSB2YWwgKyAxLjA7XHJcbiAgfVxyXG5cclxuICBtaW5EYXRlVmFsOiBtb21lbnQuTW9tZW50ID0gbnVsbDtcclxuICBtYXhEYXRlVmFsOiBtb21lbnQuTW9tZW50ID0gbnVsbDtcclxuICBASW5wdXQoJ21pbkRhdGUnKSBzZXQgbWluRGF0ZSh2YWw6IGFueSkge1xyXG4gICAgbGV0IGQgPSBtb21lbnQodmFsKTtcclxuICAgIGlmIChkLmlzVmFsaWQoKSkge1xyXG4gICAgICB0aGlzLm1pbkRhdGVWYWwgPSBtb21lbnQodmFsKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLm1pbkRhdGVWYWwgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBASW5wdXQoJ21heERhdGUnKSBzZXQgbWF4RGF0ZSh2YWw6IGFueSkge1xyXG4gICAgbGV0IGQgPSBtb21lbnQodmFsKTtcclxuICAgIGlmIChkLmlzVmFsaWQoKSkge1xyXG4gICAgICB0aGlzLm1heERhdGVWYWwgPSBtb21lbnQodmFsKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLm1heERhdGVWYWwgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcclxuICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlID0gZm47XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcclxuICAgIHRoaXMucHJvcGFnYXRlVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFic3RyYWN0IHdyaXRlVmFsdWUodmFsdWU6IGFueSk7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9jb21tb24vZGF0ZXBpY2tlci1iYXNlLnRzIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjdC1kcC1zaGFkb3ctYm94XFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLkhpZGRlbilcXFwiICpuZ0lmPVxcXCJtb2RlICE9IERhdGVQaWNrZXJNb2RlLkhpZGRlblxcXCIgW3N0eWxlLnotaW5kZXhdPVxcXCJzaGFkb3daSW5kZXhcXFwiPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImN0LWRwLXBpY2tlclxcXCIgW2NsYXNzLmhpZGRlbl09XFxcIm1vZGUgPT0gRGF0ZVBpY2tlck1vZGUuSGlkZGVuXFxcIiBbc3R5bGUuei1pbmRleF09XFxcInpJbmRleFZhbFxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImN0LWRwLWNhcmV0LTFcXFwiPjwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1jYXJldC0yXFxcIj48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtaGVhZGVyXFxcIj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1wcmV2ICBjdC1kcC1idG5cXFwiIChjbGljayk9XFxcImdvUHJldigpXFxcIiBbZGlzYWJsZWRdPVxcXCJjYWwubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGhcXFwiPiZsdDs8L2J1dHRvbj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1tb250aCBjdC1kcC1idG5cXFwiIChjbGljayk9XFxcImNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLk1vbnRoKVxcXCI+e3tjYWwuZGF0ZS5mb3JtYXQoXFxcIk1NTU1cXFwiKX19PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4teWVhciAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5ZZWFyKVxcXCI+e3tjYWwuZGF0ZS5mb3JtYXQoXFxcIllZWVlcXFwiKX19PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbmV4dCAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJnb05leHQoKVxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mZ3Q7PC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8Y3QtY2FsZW5kYXI+PC9jdC1jYWxlbmRhcj5cXHJcXG48L2Rpdj5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kYXRlcGlja2VyL2RhdGVwaWNrZXIuY29tcG9uZW50Lmh0bWxcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCIuY3QtZHAtYWN0aXZlIGlucHV0e3Bvc2l0aW9uOnJlbGF0aXZlfS5jdC1kcC1zaGFkb3ctYm94e3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LmN0LWRwLXBpY2tlcnt3aWR0aDoyMjBweDtib3JkZXI6MXB4IHNvbGlkICM4MDgwODA7Ym94LXNpemluZzpjb250ZW50LWJveDtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO21hcmdpbi10b3A6MTRweDt0cmFuc2l0aW9uOi41c30uY3QtZHAtcGlja2VyLmN0LWRwLWR1YWxwaWNrZXJ7d2lkdGg6NDQwcHh9LmN0LWRwLXBpY2tlci5jdC1kcC1waWNrZXItdG97bWFyZ2luLWxlZnQ6MTVweH0uY3QtZHAtY2FyZXQtMiwuY3QtZHAtY2FyZXQtMXtib3R0b206MTAwJTtsZWZ0OjEwJTtib3JkZXI6c29saWQgdHJhbnNwYXJlbnQ7aGVpZ2h0OjA7d2lkdGg6MDtwb3NpdGlvbjphYnNvbHV0ZTtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246LjVzfS5jdC1kcC1jYXJldC0ye2JvcmRlci1jb2xvcjpyZ2JhKDEzNiwxODMsMjEzLDApO2JvcmRlci1ib3R0b20tY29sb3I6d2hpdGU7Ym9yZGVyLXdpZHRoOjE0cHg7bWFyZ2luLWxlZnQ6LTE0cHh9LmN0LWRwLWNhcmV0LTF7Ym9yZGVyLWNvbG9yOnJnYmEoMTk0LDIyNSwyNDUsMCk7Ym9yZGVyLWJvdHRvbS1jb2xvcjojODA4MDgwO2JvcmRlci13aWR0aDoxNnB4O21hcmdpbi1sZWZ0Oi0xNnB4fS5jdC1kcC1oZWFkZXJ7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzgwODA4MH0uY3QtZHAtY2Fse3BhZGRpbmc6NXB4O3dpZHRoOjIyMHB4O2Zsb2F0OmxlZnR9LmN0LWRwLWNhbC1pbmFjdGl2ZXt2aXNpYmlsaXR5OmhpZGRlbn0uY3QtZHAtY2FsLWhlYWRlcntjb2xvcjojODA4MDgwfS5jdC1kcC1jYWwtZGF5e3dpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7ZmxvYXQ6bGVmdDt0ZXh0LWFsaWduOmNlbnRlcn0uY3QtZHAtY2FsLWRheTpkaXNhYmxlZHtjb2xvcjojYmZiZmJmfS5jdC1kcC1jYWwtZGF5LmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZX0uY3QtZHAtY2FsLWRheS5iZXR3ZWVue2JhY2tncm91bmQtY29sb3I6bGlnaHRncmF5fS5jdC1kcC1tb250aHMsLmN0LWRwLXllYXJze3dpZHRoOjIyMHB4O2Zsb2F0OmxlZnQ7cGFkZGluZzo1cHh9LmN0LWRwLW1vbnRoLC5jdC1kcC15ZWFye3dpZHRoOjMzLjMzJTtmbG9hdDpsZWZ0O3RleHQtYWxpZ246Y2VudGVyfS5jdC1kcC1idG57cGFkZGluZzo0cHg7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTtib3JkZXI6bm9uZX0uY3QtZHAtYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6Izk5OX0uY3QtZHAtYnRuW2Rpc2FibGVkXTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOndoaXRlfS5jdC1kcC1idG5bZGlzYWJsZWRde2NvbG9yOndoaXRlfS5jdC1kcC1waWNrZXIgLmN0LWRwLWJ0bi1wcmV2LC5jdC1kcC1waWNrZXIgLmN0LWRwLWJ0bi1uZXh0e3dpZHRoOjEwJX0uY3QtZHAtcGlja2VyIC5jdC1kcC1idG4tbW9udGh7d2lkdGg6NTAlO2ZvbnQtd2VpZ2h0OjUwMH0uY3QtZHAtcGlja2VyIC5jdC1kcC1idG4teWVhcnt3aWR0aDozMCU7Zm9udC13ZWlnaHQ6NTAwfS5jdC1kcC1waWNrZXIuY3QtZHAtZHVhbHBpY2tlciAuY3QtZHAtYnRuLXByZXYsLmN0LWRwLXBpY2tlci5jdC1kcC1kdWFscGlja2VyIC5jdC1kcC1idG4tbmV4dHt3aWR0aDo1JX0uY3QtZHAtcGlja2VyLmN0LWRwLWR1YWxwaWNrZXIgLmN0LWRwLWJ0bi1tb250aHt3aWR0aDoyNSV9LmN0LWRwLXBpY2tlci5jdC1kcC1kdWFscGlja2VyIC5jdC1kcC1idG4teWVhcnt3aWR0aDoxNSV9LmNsZWFyZml4LC5jdC1kcC1jYWw6YWZ0ZXIsLmN0LWRwLW1vbnRoczphZnRlciwuY3QtZHAteWVhcnM6YWZ0ZXJ7dmlzaWJpbGl0eTpoaWRkZW47ZGlzcGxheTpibG9jaztmb250LXNpemU6MDtjb250ZW50OlxcXCIgXFxcIjtjbGVhcjpib3RoO2hlaWdodDowfS5uby1idXR0b24sLmN0LWRwLWNhbC1kYXl7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6bm9uZSAhaW1wb3J0YW50fS5wdWxsLXJpZ2h0e2Zsb2F0OnJpZ2h0fS5oaWRkZW57ZGlzcGxheTpub25lICFpbXBvcnRhbnR9XCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vY29tbW9uLmxlc3Ncbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIGZvcndhcmRSZWYsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIE9uRGVzdHJveSwgQ29udGVudENoaWxkLCBFbGVtZW50UmVmLCBPbkluaXQsIFJlbmRlcmVyLCBWaWV3RW5jYXBzdWxhdGlvbixcclxuICAgIElucHV0LCBWaWV3Q2hpbGQsIFF1ZXJ5TGlzdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCAqIGFzICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuLi9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDYWxlbmRhck1vZGUgfSBmcm9tICcuLi9jb21tb24vY2FsZW5kYXItbW9kZSc7XHJcbmltcG9ydCB7IEZvcm1Db250cm9sLCBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IsIE5HX1ZBTElEQVRPUlMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IERhdGVQaWNrZXJCYXNlIH0gZnJvbSAnLi4vY29tbW9uL2RhdGVwaWNrZXItYmFzZSc7XHJcblxyXG4vKiogXHJcbiAqIERlZmluZXMgdGhlIG1vZGUgb2YgdGhlIHBpY2tlclxyXG4gKi9cclxuZXhwb3J0IGVudW0gRHVhbFBpY2tlck1vZGUge1xyXG4gICAgLyoqIEFsbG93cyBzZWxlY3Rpb24gb2YgdGhlIHRvIGRhdGUuICovXHJcbiAgICBUbyxcclxuICAgIC8qKiBBbGxvd3Mgc2VsZWN0aW9uIG9mIHRoZSBmcm9tIGRhdGUuICovXHJcbiAgICBGcm9tLFxyXG4gICAgLyoqIE1ha2VzIHRoZSBwaWNrZXIgaGlkZGVuLCBkZWZhdWx0IHN0YXRlLiAqL1xyXG4gICAgSGlkZGVuXHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdjdC1kdWFsLXBpY2tlcicsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9kdWFscGlja2VyLmNvbXBvbmVudC5odG1sJyksXHJcbiAgICBzdHlsZXM6IFtyZXF1aXJlKCcuL2R1YWxwaWNrZXIuY29tcG9uZW50Lmxlc3MnKSwgcmVxdWlyZSgnLi4vY29tbW9uL2NvbW1vbi5sZXNzJyldLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIHsgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IER1YWxQaWNrZXJDb21wb25lbnQpLCBtdWx0aTogdHJ1ZSB9LFxyXG4gICAgICAgIHsgcHJvdmlkZTogTkdfVkFMSURBVE9SUywgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRHVhbFBpY2tlckNvbXBvbmVudCksIG11bHRpOiB0cnVlIH1cclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIER1YWxQaWNrZXJDb21wb25lbnQgZXh0ZW5kcyBEYXRlUGlja2VyQmFzZSBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XHJcbiAgICAvL0VudW0gZGVmaW5pdGlvbnMgZm9yIGFjY2VzcyBpbiB2aWV3XHJcbiAgICBwdWJsaWMgQ2FsZW5kYXJNb2RlID0gQ2FsZW5kYXJNb2RlO1xyXG4gICAgcHVibGljIER1YWxQaWNrZXJNb2RlID0gRHVhbFBpY2tlck1vZGU7XHJcblxyXG4gICAgLyoqIERhdGUgZnJvbSAoYmluZGluZyB2YWx1ZSkgKi9cclxuICAgIHByaXZhdGUgZGF0ZUZyb21WYWx1ZTogbW9tZW50Lk1vbWVudDtcclxuICAgIC8qKiBEYXRlIHRvIChiaW5kaW5nIHZhbHVlKSAqL1xyXG4gICAgcHJpdmF0ZSBkYXRlVG9WYWx1ZTogbW9tZW50Lk1vbWVudDtcclxuICAgIC8qKiBUb2RheSdzIERhdGUgdG8gcGFzcyBpbnRvIHRoZSBzZWNvbmQgcGlja2VyICoqL1xyXG4gICAgcHJpdmF0ZSB0b2RheTogbW9tZW50Lk1vbWVudCA9IG1vbWVudCgpO1xyXG4gICAgLyoqIEVtaXR0ZXIgZm9yIGNoYW5nZSAoZnJvbSkqL1xyXG4gICAgQE91dHB1dCgpIGRhdGVGcm9tQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIEVtaXR0ZXIgZm9yIGNoYW5nZSAodG8pICovXHJcbiAgICBAT3V0cHV0KCkgZGF0ZVRvQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIElucHV0IGRlZmluaXRpb24gZm9yIChmcm9tKSAqL1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkYXRlRnJvbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbVZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IGRhdGVGcm9tKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBtb21lbnQgJiYgdmFsLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0RnJvbS5uYXRpdmVFbGVtZW50LnZhbHVlID0gdmFsLmZvcm1hdChcIk1NL0REL1lZWVlcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUZyb21WYWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgdGhpcy5kYXRlRnJvbUNoYW5nZS5lbWl0KHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHsgZGF0ZUZyb206IHRoaXMuZGF0ZUZyb20sIGRhdGVUbzogdGhpcy5kYXRlVG8gfSk7ICAgICAgICBcclxuICAgIH1cclxuICAgIC8qKiBJbnB1dCBkZWZpbml0aW9uIGZvciAodG8pICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGRhdGVUbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlVG9WYWx1ZTtcclxuICAgIH1cclxuICAgIHNldCBkYXRlVG8odmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIG1vbWVudCAmJiB2YWwuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUby5uYXRpdmVFbGVtZW50LnZhbHVlID0gdmFsLmZvcm1hdChcIk1NL0REL1lZWVlcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvQ2hhbmdlLmVtaXQodmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UoeyBkYXRlRnJvbTogdGhpcy5kYXRlRnJvbSwgZGF0ZVRvOiB0aGlzLmRhdGVUbyB9KTsgICAgICAgICAgICAgICAgXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHZhbGlkRGF0ZUV4cHJlc3Npb246IFJlZ0V4cDtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgbWF0Y2goKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWREYXRlRXhwcmVzc2lvbiB8fCAvXigoMD9bMTM1NzhdfDEwfDEyKSgtfFxcLykoKFsxLTldKXwoMFsxLTldKXwoWzEyXSkoWzAtOV0/KXwoM1swMV0/KSkoLXxcXC8pKCgxOSkoWzItOV0pKFxcZHsxfSl8KDIwKShbMDFdKShcXGR7MX0pfChbODkwMV0pKFxcZHsxfSkpfCgwP1syNDY5XXwxMSkoLXxcXC8pKChbMS05XSl8KDBbMS05XSl8KFsxMl0pKFswLTldPyl8KDNbMF0/KSkoLXxcXC8pKCgxOSkoWzItOV0pKFxcZHsxfSl8KDIwKShbMDFdKShcXGR7MX0pfChbODkwMV0pKFxcZHsxfSkpKSQvO1xyXG4gICAgfVxyXG4gICAgc2V0IG1hdGNoKHZhbCkge1xyXG4gICAgICAgIHRoaXMudmFsaWREYXRlRXhwcmVzc2lvbiA9IHZhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ2FsMSB2aWV3IGNoaWxkIGNvbXBvbmVudCwgdXNlIHRvIGNvbnRyb2wgcmVuZGVyaW5nICovXHJcbiAgICBAQ29udGVudENoaWxkKCdkYXRlVG8nLCBDYWxlbmRhckNvbXBvbmVudCkgcHVibGljIGlucHV0VG86IEVsZW1lbnRSZWY7XHJcbiAgICAvKiogQ2FsMiB2aWV3IGNoaWxkIGNvbXBvbmVudCwgdXNlIHRvIGNvbnRyb2wgcmVuZGVyaW5nICovXHJcbiAgICBAQ29udGVudENoaWxkKCdkYXRlRnJvbScsIENhbGVuZGFyQ29tcG9uZW50KSBwdWJsaWMgaW5wdXRGcm9tOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIC8qKiBDYWwxIHZpZXcgY2hpbGQgY29tcG9uZW50LCB1c2UgdG8gY29udHJvbCByZW5kZXJpbmcgKi9cclxuICAgIEBWaWV3Q2hpbGQoJ2NhbDEnLCBDYWxlbmRhckNvbXBvbmVudCkgcHVibGljIGNhbDE6IENhbGVuZGFyQ29tcG9uZW50O1xyXG4gICAgLyoqIENhbDIgdmlldyBjaGlsZCBjb21wb25lbnQsIHVzZSB0byBjb250cm9sIHJlbmRlcmluZyAqL1xyXG4gICAgQFZpZXdDaGlsZCgnY2FsMicsIENhbGVuZGFyQ29tcG9uZW50KSBwdWJsaWMgY2FsMjogQ2FsZW5kYXJDb21wb25lbnQ7XHJcbiAgICAvKiogTW9kZSAqL1xyXG4gICAgcHVibGljIG1vZGU6IER1YWxQaWNrZXJNb2RlID0gRHVhbFBpY2tlck1vZGUuSGlkZGVuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbXlFbGVtZW50OiBFbGVtZW50UmVmKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZXMgdGhlIGdsb2JhbCBtb2RlIG9mIHRoZSBwaWNrZXIgKG5vdCB0aGUgbW9kZSBvZiB0aGUgY2FsZW5kYXIpXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdGltZXJJZCA9IG51bGw7XHJcbiAgICBwdWJsaWMgY2hhbmdlR2xvYmFsTW9kZShtb2RlOiBEdWFsUGlja2VyTW9kZSwgZGVsYXk6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlbGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmNoYW5nZUdsb2JhbE1vZGVGbihtb2RlKSB9LCA0MDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZUZuKG1vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoYW5nZUdsb2JhbE1vZGVGbihtb2RlOiBEdWFsUGlja2VyTW9kZSkge1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5UbzpcclxuICAgICAgICAgICAgICAgIGxldCBsID0gJCh0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudCkucG9zaXRpb24oKS5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KS5maW5kKFwiLmN0LWRwLWNhcmV0XCIpLmNzcyh7IFwibGVmdFwiOiBsIH0pO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KS5hZGRDbGFzcyhcImN0LWRwLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLkZyb206XHJcbiAgICAgICAgICAgICAgICBsZXQgbGZyb20gPSAkKHRoaXMuaW5wdXRGcm9tLm5hdGl2ZUVsZW1lbnQpLnBvc2l0aW9uKCkubGVmdDtcclxuICAgICAgICAgICAgICAgICQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCkuZmluZChcIi5jdC1kcC1jYXJldFwiKS5jc3MoeyBcImxlZnRcIjogbGZyb20gfSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmFkZENsYXNzKFwiY3QtZHAtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRHVhbFBpY2tlck1vZGUuSGlkZGVuOlxyXG4gICAgICAgICAgICAgICAgJCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhcImN0LWRwLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRGF0ZUZyb21TdHJpbmdDaGFuZ2UodmFsKSB7XHJcbiAgICAgICAgaWYodGhpcy5tYXRjaC50ZXN0KHZhbCkpIHtcclxuICAgICAgICAgICAgbGV0IG0gPSBtb21lbnQobmV3IERhdGUodmFsKSk7XHJcbiAgICAgICAgICAgIGlmIChtLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUZyb21WYWx1ZSA9PT0gdW5kZWZpbmVkKSB7IHRoaXMuZGF0ZUZyb21WYWx1ZSA9IG07IH1cclxuICAgICAgICAgICAgICAgIGVsc2UgeyB0aGlzLmRhdGVGcm9tVmFsdWUuc2V0KG0udG9PYmplY3QoKSk7IH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdERhdGVUbygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWwxLmRhdGUgPSB0aGlzLmRhdGVGcm9tVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlRnJvbUNoYW5nZS5lbWl0KHRoaXMuZGF0ZUZyb21WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRGF0ZVRvU3RyaW5nQ2hhbmdlKHZhbCkge1xyXG4gICAgICAgIGlmKHRoaXMubWF0Y2gudGVzdCh2YWwpKSB7XHJcbiAgICAgICAgICAgIGxldCBtID0gbW9tZW50KG5ldyBEYXRlKHZhbCkpO1xyXG4gICAgICAgICAgICBpZiAobS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVUb1ZhbHVlID09PSB1bmRlZmluZWQpIHsgdGhpcy5kYXRlVG9WYWx1ZSA9IG07IH1cclxuICAgICAgICAgICAgICAgIGVsc2UgeyB0aGlzLmRhdGVUb1ZhbHVlLnNldChtLnRvT2JqZWN0KCkpOyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlRnJvbSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWwyLmRhdGUgPSB0aGlzLmRhdGVUb1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGlmdENhbDEoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvQ2hhbmdlLmVtaXQodGhpcy5kYXRlVG9WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaGlmdENhbDEoKSB7XHJcbiAgICAgICAgdGhpcy5jYWwxLmRhdGUgPSBtb21lbnQodGhpcy5jYWwyLmRhdGUpO1xyXG4gICAgICAgIHRoaXMuY2FsMS5kYXRlLnN1YnRyYWN0KHsgXCJtb250aFwiOiAxIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hpZnRDYWwyKCkge1xyXG4gICAgICAgIHRoaXMuY2FsMi5kYXRlID0gbW9tZW50KHRoaXMuY2FsMS5kYXRlKTtcclxuICAgICAgICB0aGlzLmNhbDIuZGF0ZS5hZGQoeyBcIm1vbnRoXCI6IDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoYW5nZU1vZGUobW9kZTogQ2FsZW5kYXJNb2RlLCBjYWw6IENhbGVuZGFyQ29tcG9uZW50KSB7XHJcbiAgICAgICAgY2FsLmNoYW5nZU1vZGUobW9kZSk7XHJcbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLkNhbGVuZGFyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnb1ByZXYoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FsMS5tb2RlID09IENhbGVuZGFyTW9kZS5DYWxlbmRhciAmJiB0aGlzLmNhbDIubW9kZSA9PSBDYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWwxLmRhdGUubW9udGgodGhpcy5jYWwxLmRhdGUubW9udGgoKSAtIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYWwxLmdvUHJldigpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbDIuZ29QcmV2KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnb05leHQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FsMS5tb2RlID09IENhbGVuZGFyTW9kZS5DYWxlbmRhciAmJiB0aGlzLmNhbDIubW9kZSA9PSBDYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWwxLmRhdGUubW9udGgodGhpcy5jYWwxLmRhdGUubW9udGgoKSArIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYWwxLmdvTmV4dCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbDIuZ29OZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbW9udGgxQ2hhbmdlTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtb250aDJDaGFuZ2VMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNoaWZ0Q2FsMSgpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMSk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHllYXIxQ2hhbmdlTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB5ZWFyMkNoYW5nZUxpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2hpZnRDYWwxKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwxKTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG91Y2hlZCgpIHtcclxuICAgICAgICB0aGlzLnByb3BhZ2F0ZVRvdWNoZWQoeyBkYXRlRnJvbTogdGhpcy5kYXRlRnJvbSwgZGF0ZVRvOiB0aGlzLmRhdGVUbyB9KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgY2xvc2VQaWNrZXIoZXZlbnQpIHtcclxuICAgICAgICBpZihldmVudC53aGljaCA9PT0gOSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZUdsb2JhbE1vZGVGbihEdWFsUGlja2VyTW9kZS5IaWRkZW4pO1xyXG4gICAgICAgICAgICB0aGlzLnRvdWNoZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5jYWwxLmRhdGUgPSBtb21lbnQodGhpcy5kYXRlRnJvbSk7XHJcbiAgICAgICAgLy8gYnVpbGQgd2hhdCBkYXRlIHNob3VsZCBiZSBvbiB0aGUgc2Vjb25kIGNhbGVuZGFyXHJcbiAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYWwxLnN1YnNjcmliZVRvQ2hhbmdlTW9udGgodGhpcy5tb250aDFDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgdGhpcy5jYWwyLnN1YnNjcmliZVRvQ2hhbmdlTW9udGgodGhpcy5tb250aDJDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgdGhpcy5jYWwxLnN1YnNjcmliZVRvQ2hhbmdlWWVhcih0aGlzLnllYXIxQ2hhbmdlTGlzdGVuZXIpO1xyXG4gICAgICAgIHRoaXMuY2FsMi5zdWJzY3JpYmVUb0NoYW5nZVllYXIodGhpcy55ZWFyMkNoYW5nZUxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudC5zdHlsZVsnei1pbmRleCddID0gdGhpcy56SW5kZXhWYWw7XHJcbiAgICAgICAgdGhpcy5pbnB1dEZyb20ubmF0aXZlRWxlbWVudC5zdHlsZVsnei1pbmRleCddID0gdGhpcy56SW5kZXhWYWw7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXRGcm9tLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7IHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEdWFsUGlja2VyTW9kZS5Gcm9tKSB9KTtcclxuICAgICAgICB0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHsgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLlRvKSB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dEZyb20ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4geyB0aGlzLm9uRGF0ZUZyb21TdHJpbmdDaGFuZ2UodGhpcy5pbnB1dEZyb20ubmF0aXZlRWxlbWVudC52YWx1ZSkgfSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dFRvLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHsgdGhpcy5vbkRhdGVUb1N0cmluZ0NoYW5nZSh0aGlzLmlucHV0VG8ubmF0aXZlRWxlbWVudC52YWx1ZSkgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXRUby5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHsgdGhpcy5jbG9zZVBpY2tlcihldmVudCk7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGlucHV0cykge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICB3cml0ZVZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvID0gdmFsdWUuZGF0ZVRvO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVGcm9tID0gdmFsdWUuZGF0ZUZyb207XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlKGM6IEZvcm1Db250cm9sKSB7XHJcbiAgICAgICAgaWYgKGMudmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJJbnZhbGlkIFZhbHVlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghKGMudmFsdWUuZGF0ZUZyb20gaW5zdGFuY2VvZiBtb21lbnQpIHx8ICFjLnZhbHVlLmRhdGVGcm9tLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJJbnZhbGlkIERhdGVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWluRGF0ZVZhbCAmJiB0aGlzLm1pbkRhdGVWYWwuaXNBZnRlcihjLnZhbHVlLmRhdGVGcm9tKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJEYXRlIGNhbm5vdCBiZSBiZWZvcmUgXCIgKyB0aGlzLm1pbkRhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWF4RGF0ZVZhbCAmJiB0aGlzLm1heERhdGVWYWwuaXNCZWZvcmUoYy52YWx1ZS5kYXRlRnJvbSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiRGF0ZSBjYW5ub3QgYmUgYWZ0ZXIgXCIgKyB0aGlzLm1heERhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEoYy52YWx1ZS5kYXRlVG8gaW5zdGFuY2VvZiBtb21lbnQpIHx8ICFjLnZhbHVlLmRhdGVUby5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiSW52YWxpZCBEYXRlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1pbkRhdGVWYWwgJiYgdGhpcy5taW5EYXRlVmFsLmlzQWZ0ZXIoYy52YWx1ZS5kYXRlVG8pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkRhdGUgY2Fubm90IGJlIGJlZm9yZSBcIiArIHRoaXMubWluRGF0ZVZhbC5mb3JtYXQoXCJtbS9ERC95eXl5XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYXhEYXRlVmFsICYmIHRoaXMubWF4RGF0ZVZhbC5pc0JlZm9yZShjLnZhbHVlLmRhdGVUbykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiRGF0ZSBjYW5ub3QgYmUgYWZ0ZXIgXCIgKyB0aGlzLm1heERhdGVWYWwuZm9ybWF0KFwibW0vREQveXl5eVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyQ2FsZW5kYXIoKSB7XHJcbiAgICAgICAgdGhpcy5jYWwxLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZVRvLCB0aGlzLmRhdGVGcm9tLCB0aGlzLm1pbkRhdGVWYWwsIHRoaXMubWF4RGF0ZVZhbCk7XHJcbiAgICAgICAgdGhpcy5jYWwyLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZVRvLCB0aGlzLmRhdGVGcm9tLCB0aGlzLm1pbkRhdGVWYWwsIHRoaXMubWF4RGF0ZVZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGF0ZUNsaWNrTGlzdGVuZXIgPSAoZGF0ZTogbW9tZW50Lk1vbWVudCkgPT4ge1xyXG4gICAgICAgIGxldCBkID0gbW9tZW50KGRhdGUpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0ZShkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGF0ZShkYXRlOiBtb21lbnQuTW9tZW50KSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5Gcm9tOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlRnJvbSA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlVG8oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEdWFsUGlja2VyTW9kZS5Ubyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5UbzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdERhdGVGcm9tKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUdsb2JhbE1vZGUoRHVhbFBpY2tlck1vZGUuSGlkZGVuLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRvdWNoZWQoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb3JyZWN0RGF0ZVRvKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGVUbyAmJiB0aGlzLmRhdGVGcm9tLmlzQWZ0ZXIodGhpcy5kYXRlVG8pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvID0gbW9tZW50KHRoaXMuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVUby5hZGQoeyBcImRheVwiOiAxIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvcnJlY3REYXRlRnJvbSgpIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRlRnJvbSAmJiB0aGlzLmRhdGVGcm9tLmlzVmFsaWQoKSAmJiB0aGlzLmRhdGVUby5pc0JlZm9yZSh0aGlzLmRhdGVGcm9tKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVGcm9tID0gbW9tZW50KHRoaXMuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRlRnJvbS5zdWJ0cmFjdCh7IFwiZGF5XCI6IDEgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vYW5ndWxhcjItdGVtcGxhdGUtbG9hZGVyIS4vc3JjL2R1YWxwaWNrZXIvZHVhbHBpY2tlci5jb21wb25lbnQudHMiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcclxcbjxkaXYgY2xhc3M9XFxcImN0LWRwLXNoYWRvdy1ib3hcXFwiIChjbGljayk9XFxcImNoYW5nZUdsb2JhbE1vZGUoRHVhbFBpY2tlck1vZGUuSGlkZGVuKVxcXCIgKm5nSWY9XFxcIm1vZGUgIT0gRHVhbFBpY2tlck1vZGUuSGlkZGVuXFxcIiBbc3R5bGUuei1pbmRleF09XFxcInNoYWRvd1pJbmRleFxcXCI+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBjbGFzcz1cXFwiY3QtZHAtcGlja2VyIGN0LWRwLWR1YWxwaWNrZXJcXFwiIFtjbGFzcy5oaWRkZW5dPVxcXCJtb2RlID09IER1YWxQaWNrZXJNb2RlLkhpZGRlblxcXCIgW2NsYXNzLmN0LWRwLXBpY2tlci10b109XFxcIm1vZGUgPT0gRHVhbFBpY2tlck1vZGUuVG9cXFwiIFtzdHlsZS56LWluZGV4XT1cXFwiekluZGV4VmFsXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtY2FyZXQgY3QtZHAtY2FyZXQtMVxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImN0LWRwLWNhcmV0IGN0LWRwLWNhcmV0LTJcXFwiPjwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1oZWFkZXJcXFwiPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXByZXYgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiZ29QcmV2KClcXFwiIFtkaXNhYmxlZF09XFxcImNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGggfHwgY2FsMi5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmx0OzwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW1vbnRoIGN0LWRwLWJ0blxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsMi5tb2RlICE9IENhbGVuZGFyTW9kZS5DYWxlbmRhclxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuTW9udGgsIGNhbDEpXFxcIj57e2NhbDEuZGF0ZS5mb3JtYXQoXFxcIk1NTU1cXFwiKX19PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4teWVhciAgY3QtZHAtYnRuXFxcIiBbZGlzYWJsZWRdPVxcXCJjYWwyLm1vZGUgIT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5ZZWFyLCBjYWwxKVxcXCI+e3tjYWwxLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW5leHQgIGN0LWRwLWJ0blxcXCIgW2Rpc2FibGVkXT1cXFwidHJ1ZVxcXCI+PC9idXR0b24+PCEtLVxcclxcbiAgICAgICAgLS0+PGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tcHJldiAgY3QtZHAtYnRuXFxcIiBbZGlzYWJsZWRdPVxcXCJ0cnVlXFxcIj48L2J1dHRvbj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1tb250aCBjdC1kcC1idG5cXFwiIFtkaXNhYmxlZF09XFxcImNhbDEubW9kZSAhPSBDYWxlbmRhck1vZGUuQ2FsZW5kYXJcXFwiIChjbGljayk9XFxcImNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLk1vbnRoLCBjYWwyKVxcXCI+e3tjYWwyLmRhdGUuZm9ybWF0KFxcXCJNTU1NXFxcIil9fTwvYnV0dG9uPjwhLS1cXHJcXG4gICAgICAgIC0tPjxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXllYXIgIGN0LWRwLWJ0blxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsMS5tb2RlICE9IENhbGVuZGFyTW9kZS5DYWxlbmRhclxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuWWVhciwgY2FsMilcXFwiPnt7Y2FsMi5kYXRlLmZvcm1hdChcXFwiWVlZWVxcXCIpfX08L2J1dHRvbj48IS0tXFxyXFxuICAgICAgICAtLT48YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1uZXh0ICBjdC1kcC1idG5cXFwiIChjbGljayk9XFxcImdvTmV4dCgpXFxcIiBbZGlzYWJsZWRdPVxcXCJ0aGlzLmNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGggfHwgdGhpcy5jYWwyLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mZ3Q7PC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8Y3QtY2FsZW5kYXIgI2NhbDEgW25nQ2xhc3NdPVxcXCJ7J2N0LWRwLWNhbC1pbmFjdGl2ZSc6IGNhbDIubW9kZSAhPSBDYWxlbmRhck1vZGUuQ2FsZW5kYXJ9XFxcIj48L2N0LWNhbGVuZGFyPlxcclxcbiAgICA8Y3QtY2FsZW5kYXIgI2NhbDIgW25nQ2xhc3NdPVxcXCJ7J2N0LWRwLWNhbC1pbmFjdGl2ZSc6IGNhbDEubW9kZSAhPSBDYWxlbmRhck1vZGUuQ2FsZW5kYXJ9XFxcIj48L2N0LWNhbGVuZGFyPlxcclxcbjwvZGl2PlwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2R1YWxwaWNrZXIvZHVhbHBpY2tlci5jb21wb25lbnQuaHRtbFxuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==