!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("moment"),require("jquery"));else if("function"==typeof define&&define.amd)define(["@angular/core","@angular/common","@angular/forms","moment","jquery"],t);else{var n="object"==typeof exports?t(require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("moment"),require("jquery")):t(e["@angular/core"],e["@angular/common"],e["@angular/forms"],e.moment,e.jquery);for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(e,t,n,a,o){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="/",__webpack_require__(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),a=e[t[0]];return function(e,t,o){a.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";var a=n(1);t.DatePickerModule=a.DatePickerModule},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(3),d=n(4),c=n(5),l=n(17),s=n(7),p=n(9),h=function(){function DatePickerModule(){}return DatePickerModule=a([r.NgModule({exports:[c.DatePickerComponent,l.DualPickerComponent],declarations:[c.DatePickerComponent,l.DualPickerComponent,s.CalendarComponent,p.CalendarGridComponent],imports:[i.CommonModule,d.FormsModule]}),o("design:paramtypes",[])],DatePickerModule)}();t.DatePickerModule=h},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(7),c=n(8);!function(e){e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden"}(t.DatePickerMode||(t.DatePickerMode={}));var l=t.DatePickerMode,s=function(){function DatePickerComponent(e,t){var n=this;this.myElement=e,this.renderer=t,this.CalendarMode=c.CalendarMode,this.DatePickerMode=l,this.dateChange=new r.EventEmitter,this.disabled=!1,this.mode=l.Hidden,this.dateClickListener=function(e){var t=i(e);return function(){n.setDate(t)}},this.monthChangeListener=function(){n.changeMode(c.CalendarMode.Calendar)},this.yearChangeListener=function(){n.changeMode(c.CalendarMode.Calendar)}}return Object.defineProperty(DatePickerComponent.prototype,"date",{get:function(){return this.dateValue},set:function(e){e instanceof i&&e.isValid()&&(this.dateString=e.format("MM/DD/YYYY"),this.dateValue=e,this.dateChange.emit(e))},enumerable:!0,configurable:!0}),DatePickerComponent.prototype.onDateStringChange=function(e){this.dateString=e;var t=i(new Date(e));t.isValid()&&(this.dateValue.set(t.toObject()),this.cal.date=this.dateValue,this.dateChange.emit(this.dateValue),this.renderCalendar())},DatePickerComponent.prototype.changeGlobalMode=function(e){switch(this.mode=e,this.mode){case l.Visible:this.changeMode(c.CalendarMode.Calendar)}},DatePickerComponent.prototype.blur=function(e){9==(e.which||e.keyCode)&&this.changeGlobalMode(l.Hidden)},DatePickerComponent.prototype.changeMode=function(e){switch(this.cal.changeMode(e),e){case c.CalendarMode.Calendar:this.renderCalendar()}},DatePickerComponent.prototype.goPrev=function(){this.cal.mode==c.CalendarMode.Calendar?(this.cal.date.month(this.cal.date.month()-1),this.renderCalendar()):this.cal.goPrev()},DatePickerComponent.prototype.goNext=function(){this.cal.mode==c.CalendarMode.Calendar?(this.cal.date.month(this.cal.date.month()+1),this.renderCalendar()):this.cal.goNext()},DatePickerComponent.prototype.ngOnInit=function(){this.date instanceof i&&this.date.isValid()?this.cal.date=i(this.date):this.cal.date=i(),this.cal.subscribeToChangeMonth(this.monthChangeListener),this.cal.subscribeToChangeYear(this.yearChangeListener)},DatePickerComponent.prototype.ngAfterViewInit=function(){this.renderCalendar()},DatePickerComponent.prototype.ngOnDestroy=function(){},DatePickerComponent.prototype.renderCalendar=function(){this.cal.renderCalendar(this.dateClickListener,this.date,this.date)},DatePickerComponent.prototype.setDate=function(e){switch(this.mode){case l.Visible:this.date=e,this.changeGlobalMode(l.Hidden)}this.renderCalendar()},a([r.Output(),o("design:type",Object)],DatePickerComponent.prototype,"dateChange",void 0),a([r.Input(),o("design:type",Object)],DatePickerComponent.prototype,"date",null),a([r.Input(),o("design:type",Boolean)],DatePickerComponent.prototype,"disabled",void 0),a([r.Input(),o("design:type",Object)],DatePickerComponent.prototype,"inputClass",void 0),a([r.ViewChild(d.CalendarComponent),o("design:type","function"==typeof(e="undefined"!=typeof d.CalendarComponent&&d.CalendarComponent)&&e||Object)],DatePickerComponent.prototype,"cal",void 0),DatePickerComponent=a([r.Component({selector:"ct-datepicker",template:n(14),styles:[n(15),n(16)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.ElementRef&&r.ElementRef)&&t||Object,"function"==typeof(s="undefined"!=typeof r.Renderer&&r.Renderer)&&s||Object])],DatePickerComponent);var e,t,s}();t.DatePickerComponent=s},function(e,t){e.exports=a},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(8),c=n(9),l=function(){function CalendarComponent(){this.CalendarMode=d.CalendarMode,this.mode=d.CalendarMode.Calendar,this.months=[],this.years=[],this.monthListeners=[],this.yearListeners=[],this.generateMonthData()}return Object.defineProperty(CalendarComponent.prototype,"yearData",{get:function(){return this.years},enumerable:!0,configurable:!0}),CalendarComponent.prototype.ngOnInit=function(){},CalendarComponent.prototype.ngOnDestroy=function(){},CalendarComponent.prototype.subscribeToChangeMonth=function(e){this.monthListeners.push(e)},CalendarComponent.prototype.subscribeToChangeYear=function(e){this.yearListeners.push(e)},CalendarComponent.prototype.changeMode=function(e){switch(this.mode=e,e){case d.CalendarMode.Year:this.generateYearData(this.date.year())}},CalendarComponent.prototype.generateMonthData=function(){var e=i(new Date);e.month(0);var t=i(new Date);for(t.month(0);e.year()===t.year();)this.months.push(t.format("MMM")),t.month(t.month()+1)},CalendarComponent.prototype.generateYearData=function(e){this.years=[];for(var t=e-CalendarComponent.halfNumYearsShown,n=0;n<CalendarComponent.numYearsShown;n++)this.years.push(t+n)},CalendarComponent.prototype.goPrev=function(){switch(this.mode){case d.CalendarMode.Calendar:break;case d.CalendarMode.Month:break;case d.CalendarMode.Year:this.generateYearData(this.years[CalendarComponent.halfNumYearsShown]-CalendarComponent.numYearsShown)}},CalendarComponent.prototype.goNext=function(){switch(this.mode){case d.CalendarMode.Calendar:break;case d.CalendarMode.Month:break;case d.CalendarMode.Year:this.generateYearData(this.years[CalendarComponent.halfNumYearsShown]+CalendarComponent.numYearsShown)}},CalendarComponent.prototype.renderCalendar=function(e,t,n){this.grid.renderCalendar(this.date,e,t,n)},CalendarComponent.prototype.setMonth=function(e){this.date.month(e);for(var t=0,n=this.monthListeners;t<n.length;t++){var a=n[t];a()}},CalendarComponent.prototype.setYear=function(e){this.date.year(e);for(var t=0,n=this.yearListeners;t<n.length;t++){var a=n[t];a()}},CalendarComponent.numYearsShown=9,CalendarComponent.halfNumYearsShown=Math.floor(CalendarComponent.numYearsShown/2),a([r.ViewChild(c.CalendarGridComponent),o("design:type","function"==typeof(e="undefined"!=typeof c.CalendarGridComponent&&c.CalendarGridComponent)&&e||Object)],CalendarComponent.prototype,"grid",void 0),CalendarComponent=a([r.Component({selector:"ct-calendar",template:n(12),styles:[n(13)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",[])],CalendarComponent);var e}();t.CalendarComponent=l},function(e,t){"use strict";!function(e){e[e.Calendar=0]="Calendar",e[e.Month=1]="Month",e[e.Year=2]="Year"}(t.CalendarMode||(t.CalendarMode={}));t.CalendarMode},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(10),c=function(){function CalendarGridComponent(e,t){this.myElement=e,this.renderer=t}return CalendarGridComponent.prototype.ngOnInit=function(){},CalendarGridComponent.prototype.ngOnDestroy=function(){},CalendarGridComponent.prototype.renderCalendar=function(e,t,n,a){var o=i(e);o.date(1);for(var r=d("<div class='ct-dp-cal-header'></div>"),c=0;c<7;c++){o.day(c);var l=d("<div></div>");l.text(o.format("dd")),l.attr("ct-cal-dp-day",c.toString()),l.addClass("ct-dp-cal-day"),r.append(l)}o.date(1);for(var s=d("<div class='ct-dp-cal-body'></div>"),c=0;c<o.day();c++){var l=d("<div></div>");l.attr("ct-dp-cal-day",c.toString()),l.addClass("ct-dp-cal-day"),s.append(l)}for(;o.month()===e.month();){var l=d("<button></button>");l.text(o.date().toString()),l.attr("ct-dp-cal-day",o.date().toString()),l.attr("tabIndex","-1"),l.addClass("ct-dp-cal-day"),(n&&o.isSame(n,"day")||a&&o.isSame(a,"day"))&&l.addClass("active"),a&&n&&o.isBetween(a,n)&&l.addClass("between"),l.click(t(o)),o.date(o.date()+1),s.append(l)}d(this.myElement.nativeElement).empty(),r.appendTo(this.myElement.nativeElement),s.appendTo(this.myElement.nativeElement)},CalendarGridComponent.prototype.renderCalendarRenderer=function(e,t,n,a){var o=i(e.date);o.date(1),this.renderer.selectRootElement(this.myElement.nativeElement);var r=this.renderer.createElement(this.myElement.nativeElement,"div");this.renderer.setElementClass(r,".ct-dp-cal-header",!0);var d=this.renderer.createElement(this.myElement.nativeElement,"div");this.renderer.setElementClass(r,".ct-dp-cal-body",!0);for(var c=0;c<7;c++){o.day(c);var l=this.renderer.createElement(r,"div");this.renderer.setText(l,o.format("dd")),this.renderer.setElementAttribute(l,"ct-cal-dp-day",c.toString()),this.renderer.setElementClass(l,"ct-dp-cal-day",!0)}o.date(1);for(var c=0;c<o.day();c++){var l=this.renderer.createElement(d,"div");this.renderer.setElementAttribute(l,"ct-dp-cal-day",c.toString()),this.renderer.setElementClass(l,"ct-dp-cal-day",!0)}for(;o.month()===e.date.month();){var l=this.renderer.createElement(d,"button");this.renderer.setText(l,o.date().toString()),this.renderer.setElementAttribute(l,"ct-dp-cal-day",o.date().toString()),this.renderer.setElementAttribute(l,"tabindex","-1"),this.renderer.setElementClass(l,"ct-dp-cal-day",!0),(n&&o.isSame(n,"day")||a&&o.isSame(a,"day"))&&this.renderer.setElementClass(l,"active",!0),a&&n&&o.isBetween(a,n)&&this.renderer.setElementClass(l,"between",!0),this.renderer.listen(l,"click",t(o)),o.date(o.date()+1)}},CalendarGridComponent=a([r.Component({selector:"ct-calendar-grid",template:"",styles:[n(11)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.ElementRef&&r.ElementRef)&&e||Object,"function"==typeof(t="undefined"!=typeof r.Renderer&&r.Renderer)&&t||Object])],CalendarGridComponent);var e,t}();t.CalendarGridComponent=c},function(e,t){e.exports=o},function(e,t){e.exports=""},function(e,t){e.exports='<div class="ct-dp-cal" [ngClass]="{\'hidden\': mode != CalendarMode.Calendar}">\r\n    <ct-calendar-grid></ct-calendar-grid>\r\n</div>\r\n<div class="ct-dp-months" [ngClass]="{\'hidden\': mode != CalendarMode.Month}">\r\n    <template ngFor let-item [ngForOf]="months" [ngForTrackBy]="myTrackBy" let-i="index">\r\n        <button tabindex="-1" class="btn btn-default ct-dp-month" (click)="setMonth(i)">{{item}}</button>\r\n    </template>\r\n</div>\r\n<div class="ct-dp-years" [ngClass]="{\'hidden\': mode != CalendarMode.Year}">\r\n    <template ngFor let-item [ngForOf]="years" [ngForTrackBy]="myTrackBy" let-i="index">\r\n        <button tabindex="-1" class="btn btn-default ct-dp-year" (click)="setYear(item)">{{item}}</button>\r\n    </template>\r\n</div>'},11,function(e,t){e.exports='<div class="ct-dp">\r\n    <input \r\n        class="ct-dp-input" \r\n        type="text" \r\n        (focus)="changeGlobalMode(DatePickerMode.Visible)"\r\n        (keydown)="blur($event)" \r\n        [ngModel]="dateString"\r\n        (ngModelChange)="onDateStringChange($event)"\r\n        [disabled]="disabled"\r\n        [ngClass]="inputClass"\r\n    />\r\n    <div class="ct-dp-shadow-box" (click)="changeGlobalMode(DatePickerMode.Hidden)" *ngIf="mode != DatePickerMode.Hidden">\r\n    </div>\r\n    <div class="ct-dp-picker" [ngClass]="{\'hidden\': mode == DatePickerMode.Hidden}">\r\n        <div class="ct-dp-header">\r\n            <button tabindex="-1" class="ct-dp-btn-prev  ct-dp-btn" (click)="goPrev()" [disabled]="cal.mode == CalendarMode.Month">&lt;</button>\r\n            <button tabindex="-1" class="ct-dp-btn-month ct-dp-btn" (click)="changeMode(CalendarMode.Month)">{{cal.date.format("MMMM")}}</button>\r\n            <button tabindex="-1" class="ct-dp-btn-year  ct-dp-btn" (click)="changeMode(CalendarMode.Year)">{{cal.date.format("YYYY")}}</button>\r\n            <button tabindex="-1" class="ct-dp-btn-next  ct-dp-btn" (click)="goNext()" [disabled]="cal.mode == CalendarMode.Month">&gt;</button>\r\n        </div>\r\n        <ct-calendar></ct-calendar>\r\n    </div>\r\n</div>'},11,function(e,t){e.exports='.ct-dp{position:relative;display:inline-block}.ct-dp-input{position:relative;z-index:101}.ct-dp-from-focus .ct-dp-input.ct-dp-input-from{background-color:lightskyblue}.ct-dp-to-focus .ct-dp-input.ct-dp-input-to{background-color:lightskyblue}.ct-dp-shadow-box{position:fixed;top:0;right:0;bottom:0;left:0;background-color:transparent;z-index:100}.ct-dp-picker{width:220px;border-left:1px solid #bfbfbf;border-right:1px solid #bfbfbf;border-bottom:1px solid #bfbfbf;box-sizing:content-box;position:absolute;z-index:101;background-color:white}.ct-dp-picker.ct-dp-dualpicker{width:440px}.ct-dp-header{border-bottom:1px solid #bfbfbf}.ct-dp-cal{padding:5px;width:220px;float:left}.ct-dp-cal-header{color:#bfbfbf}.ct-dp-cal-day{width:30px;height:30px;float:left;text-align:center}.ct-dp-cal-day.active{background-color:lightblue}.ct-dp-cal-day.between{background-color:lightgray}.ct-dp-months{width:210px;float:left}.ct-dp-month{width:70px;float:left;text-align:center}.ct-dp-years{width:210px;float:left}.ct-dp-year{width:70px;float:left;text-align:center}.ct-dp-btn{margin-right:-1px;border-top:none;border-right:1px solid #bfbfbf;border-bottom:none;border-left:none;padding:4px;background-color:white}.ct-dp-btn:hover{background-color:#d9d9d9}.ct-dp-btn-prev,.ct-dp-btn-next{width:30px}.ct-dp-btn-month{width:100px;font-weight:500}.ct-dp-btn-year{width:50px;font-weight:500}.clearfix,.ct-dp-cal:after,.ct-dp-months:after,.ct-dp-years:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.no-button,.ct-dp-cal-day{background:transparent;border:none !important}'},function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(2),i=n(6),d=n(7),c=n(8);!function(e){e[e.To=0]="To",e[e.From=1]="From",e[e.Hidden=2]="Hidden"}(t.DualPickerMode||(t.DualPickerMode={}));var l=t.DualPickerMode,s=function(){function DualPickerComponent(){var e=this;this.CalendarMode=c.CalendarMode,this.DualPickerMode=l,this.dateFromChange=new r.EventEmitter,this.dateToChange=new r.EventEmitter,this.disabled=!1,this.mode=l.Hidden,this.month1ChangeListener=function(){e.shiftCal2(),e.changeMode(c.CalendarMode.Calendar,e.cal1),e.changeMode(c.CalendarMode.Calendar,e.cal2)},this.month2ChangeListener=function(){e.shiftCal1(),e.changeMode(c.CalendarMode.Calendar,e.cal1),e.changeMode(c.CalendarMode.Calendar,e.cal2)},this.year1ChangeListener=function(){e.shiftCal2(),e.changeMode(c.CalendarMode.Calendar,e.cal1),e.changeMode(c.CalendarMode.Calendar,e.cal2)},this.year2ChangeListener=function(){e.shiftCal1(),e.changeMode(c.CalendarMode.Calendar,e.cal1),e.changeMode(c.CalendarMode.Calendar,e.cal2)},this.dateClickListener=function(t){var n=i(t);return function(){e.setDate(n)}}}return Object.defineProperty(DualPickerComponent.prototype,"dateFrom",{get:function(){return this.dateFromValue},set:function(e){this.dateFromString=e.format("MM/DD/YYYY"),this.dateFromValue=e,this.dateFromChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(DualPickerComponent.prototype,"dateTo",{get:function(){return this.dateToValue},set:function(e){this.dateToString=e.format("MM/DD/YYYY"),this.dateToValue=e,this.dateToChange.emit(e)},enumerable:!0,configurable:!0}),DualPickerComponent.prototype.changeGlobalMode=function(e){switch(this.mode=e,this.mode){case l.To:case l.From:this.changeMode(c.CalendarMode.Calendar,this.cal1),this.changeMode(c.CalendarMode.Calendar,this.cal2)}},DualPickerComponent.prototype.onDateFromStringChange=function(e){this.dateFromString=e;var t=i(new Date(e));t.isValid()&&(this.dateFromValue.set(t.toObject()),this.correctDateTo(),this.cal1.date=this.dateFromValue,this.shiftCal2(),this.dateFromChange.emit(this.dateFromValue),this.renderCalendar())},DualPickerComponent.prototype.onDateToStringChange=function(e){this.dateToString=e;var t=i(new Date(e));t.isValid()&&(this.dateToValue.set(t.toObject()),this.correctDateFrom(),this.cal2.date=this.dateToValue,this.shiftCal1(),this.dateToChange.emit(this.dateToValue),this.renderCalendar())},DualPickerComponent.prototype.shiftCal1=function(){this.cal1.date=i(this.cal2.date),this.cal1.date.subtract({month:1})},DualPickerComponent.prototype.shiftCal2=function(){this.cal2.date=i(this.cal1.date),this.cal2.date.add({month:1})},DualPickerComponent.prototype.blur=function(e){9==(e.which||e.keyCode)&&this.changeGlobalMode(l.Hidden)},DualPickerComponent.prototype.changeMode=function(e,t){switch(t.changeMode(e),e){case c.CalendarMode.Calendar:this.renderCalendar()}},DualPickerComponent.prototype.goPrev=function(){this.cal1.mode==c.CalendarMode.Calendar&&this.cal2.mode==c.CalendarMode.Calendar?(this.cal1.date.month(this.cal1.date.month()-1),this.shiftCal2(),this.renderCalendar()):(this.cal1.goPrev(),this.cal2.goPrev())},DualPickerComponent.prototype.goNext=function(){this.cal1.mode==c.CalendarMode.Calendar&&this.cal2.mode==c.CalendarMode.Calendar?(this.cal1.date.month(this.cal1.date.month()+1),this.shiftCal2(),this.renderCalendar()):(this.cal1.goNext(),this.cal2.goNext())},DualPickerComponent.prototype.ngOnInit=function(){this.cal1.date=i(this.dateFrom),this.shiftCal2(),this.cal1.subscribeToChangeMonth(this.month1ChangeListener),this.cal2.subscribeToChangeMonth(this.month2ChangeListener),this.cal1.subscribeToChangeYear(this.year1ChangeListener),this.cal2.subscribeToChangeYear(this.year2ChangeListener)},DualPickerComponent.prototype.ngAfterViewInit=function(){this.renderCalendar()},DualPickerComponent.prototype.ngOnDestroy=function(){},DualPickerComponent.prototype.renderCalendar=function(){this.cal1.renderCalendar(this.dateClickListener,this.dateTo,this.dateFrom),this.cal2.renderCalendar(this.dateClickListener,this.dateTo,this.dateFrom)},DualPickerComponent.prototype.setDate=function(e){switch(this.mode){case l.From:this.dateFrom=e,this.dateFromString=e.format("MM/DD/YYYY"),this.correctDateTo(),this.changeGlobalMode(l.To);break;case l.To:this.dateTo=e,this.dateToString=e.format("MM/DD/YYYY"),this.correctDateFrom(),this.changeGlobalMode(l.Hidden)}this.renderCalendar()},DualPickerComponent.prototype.correctDateTo=function(){this.dateTo&&this.dateFrom.isAfter(this.dateTo)&&(this.dateTo=i(this.dateFrom),this.dateTo.add({day:1}),this.dateToString=this.dateTo.format("MM/DD/YYYY"))},DualPickerComponent.prototype.correctDateFrom=function(){this.dateFrom&&this.dateTo.isBefore(this.dateFrom)&&(this.dateFrom=i(this.dateTo),this.dateFrom.subtract({day:1}),this.dateFromString=this.dateFrom.format("MM/DD/YYYY"))},a([r.Output(),o("design:type",Object)],DualPickerComponent.prototype,"dateFromChange",void 0),a([r.Output(),o("design:type",Object)],DualPickerComponent.prototype,"dateToChange",void 0),a([r.Input(),o("design:type",Object)],DualPickerComponent.prototype,"dateFrom",null),a([r.Input(),o("design:type",Object)],DualPickerComponent.prototype,"dateTo",null),a([r.Input(),o("design:type",Boolean)],DualPickerComponent.prototype,"disabled",void 0),a([r.Input(),o("design:type",Object)],DualPickerComponent.prototype,"inputClass",void 0),a([r.ViewChild("cal1",d.CalendarComponent),o("design:type","function"==typeof(e="undefined"!=typeof d.CalendarComponent&&d.CalendarComponent)&&e||Object)],DualPickerComponent.prototype,"cal1",void 0),a([r.ViewChild("cal2",d.CalendarComponent),o("design:type","function"==typeof(t="undefined"!=typeof d.CalendarComponent&&d.CalendarComponent)&&t||Object)],DualPickerComponent.prototype,"cal2",void 0),DualPickerComponent=a([r.Component({selector:"ct-dualpicker",template:n(18),styles:[n(19),n(16)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",[])],DualPickerComponent);var e,t}();t.DualPickerComponent=s},function(e,t){e.exports='<div class="ct-dp" [ngClass]="{\'ct-dp-from-focus\': mode == DualPickerMode.From, \'ct-dp-to-focus\': mode == DualPickerMode.To}">\r\n    <input \r\n        class="ct-dp-input ct-dp-input-from" \r\n        type="text" \r\n        (focus)="changeGlobalMode(DualPickerMode.From)"\r\n        (keydown)="blur($event)" \r\n        [ngModel]="dateFromString"\r\n        [ngClass]="inputClass"\r\n        (ngModelChange)="onDateFromStringChange($event)"\r\n        [disabled]="disabled"\r\n    /><!--\r\n --><input \r\n        class="ct-dp-input ct-dp-input-to" \r\n        type="text" \r\n        (focus)="changeGlobalMode(DualPickerMode.To)"\r\n        (keydown)="blur($event)"          \r\n        [ngModel]="dateToString"\r\n        [ngClass]="inputClass"        \r\n        (ngModelChange)="onDateToStringChange($event)"\r\n        [disabled]="disabled"              \r\n    />\r\n    <div class="ct-dp-shadow-box" (click)="changeGlobalMode(DualPickerMode.Hidden)" *ngIf="mode != DualPickerMode.Hidden">\r\n    </div>\r\n    <div class="ct-dp-picker ct-dp-dualpicker" [ngClass]="{\'hidden\': mode == DualPickerMode.Hidden}">\r\n        <div class="ct-dp-header">\r\n            <button tabindex="-1" class="ct-dp-btn-prev  ct-dp-btn" (click)="goPrev()" [disabled]="cal1.mode == CalendarMode.Month || cal2.mode == CalendarMode.Month">&lt;</button>\r\n            <button tabindex="-1" class="ct-dp-btn-month ct-dp-btn" (click)="changeMode(CalendarMode.Month, cal1)">{{cal1.date.format("MMMM")}}</button>\r\n            <button tabindex="-1" class="ct-dp-btn-year  ct-dp-btn" (click)="changeMode(CalendarMode.Year, cal1)">{{cal1.date.format("YYYY")}}</button>\r\n            <span class="pull-right">\r\n                <button tabindex="-1" class="ct-dp-btn-month ct-dp-btn" (click)="changeMode(CalendarMode.Month, cal2)">{{cal2.date.format("MMMM")}}</button>\r\n                <button tabindex="-1" class="ct-dp-btn-year  ct-dp-btn" (click)="changeMode(CalendarMode.Year, cal2)">{{cal2.date.format("YYYY")}}</button>\r\n                <button tabindex="-1" class="ct-dp-btn-next  ct-dp-btn" (click)="goNext()" [disabled]="this.cal1.mode == CalendarMode.Month || this.cal2.mode == CalendarMode.Month">&gt;</button>\r\n            </span>\r\n        </div>\r\n        <ct-calendar #cal1></ct-calendar>\r\n        <ct-calendar #cal2></ct-calendar>\r\n    </div>\r\n</div>'},11]))});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9jdG5nLnVtZC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMmM5NjhkM2UzOWQ5ZjY4MTNlNjkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0ZXBpY2tlci5tb2R1bGUudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2NvbW1vblwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBhbmd1bGFyL2Zvcm1zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NhbGVuZGFyLW1vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwianF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQubGVzcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NvbW1vbi5sZXNzIiwid2VicGFjazovLy8uL3NyYy9kdWFscGlja2VyL2R1YWxwaWNrZXIuY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9kdWFscGlja2VyL2R1YWxwaWNrZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMF9fIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIl9tIiwiYXJncyIsInNsaWNlIiwiZm4iLCJiIiwiYXBwbHkiLCJjb25jYXQiLCJkYXRlcGlja2VyX21vZHVsZV8xIiwiRGF0ZVBpY2tlck1vZHVsZSIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiZGVmaW5lUHJvcGVydHkiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsImNvcmVfMSIsImNvbW1vbl8xIiwiZm9ybXNfMSIsImRhdGVwaWNrZXJfY29tcG9uZW50XzEiLCJkdWFscGlja2VyX2NvbXBvbmVudF8xIiwiY2FsZW5kYXJfY29tcG9uZW50XzEiLCJjYWxlbmRhcl9ncmlkX2NvbXBvbmVudF8xIiwiTmdNb2R1bGUiLCJEYXRlUGlja2VyQ29tcG9uZW50IiwiRHVhbFBpY2tlckNvbXBvbmVudCIsImRlY2xhcmF0aW9ucyIsIkNhbGVuZGFyQ29tcG9uZW50IiwiQ2FsZW5kYXJHcmlkQ29tcG9uZW50IiwiaW1wb3J0cyIsIkNvbW1vbk1vZHVsZSIsIkZvcm1zTW9kdWxlIiwibW9tZW50IiwiY2FsZW5kYXJfbW9kZV8xIiwiRGF0ZVBpY2tlck1vZGUiLCJteUVsZW1lbnQiLCJyZW5kZXJlciIsIl90aGlzIiwiQ2FsZW5kYXJNb2RlIiwiZGF0ZUNoYW5nZSIsIkV2ZW50RW1pdHRlciIsImRpc2FibGVkIiwibW9kZSIsIkhpZGRlbiIsImRhdGVDbGlja0xpc3RlbmVyIiwiZGF0ZSIsInNldERhdGUiLCJtb250aENoYW5nZUxpc3RlbmVyIiwiY2hhbmdlTW9kZSIsIkNhbGVuZGFyIiwieWVhckNoYW5nZUxpc3RlbmVyIiwiZ2V0IiwiZGF0ZVZhbHVlIiwic2V0IiwidmFsIiwiaXNWYWxpZCIsImRhdGVTdHJpbmciLCJmb3JtYXQiLCJlbWl0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIm9uRGF0ZVN0cmluZ0NoYW5nZSIsIkRhdGUiLCJ0b09iamVjdCIsImNhbCIsInJlbmRlckNhbGVuZGFyIiwiY2hhbmdlR2xvYmFsTW9kZSIsIlZpc2libGUiLCJibHVyIiwiZXZlbnQiLCJ3aGljaCIsImtleUNvZGUiLCJnb1ByZXYiLCJtb250aCIsImdvTmV4dCIsIm5nT25Jbml0Iiwic3Vic2NyaWJlVG9DaGFuZ2VNb250aCIsInN1YnNjcmliZVRvQ2hhbmdlWWVhciIsIm5nQWZ0ZXJWaWV3SW5pdCIsIm5nT25EZXN0cm95IiwiT3V0cHV0IiwiSW5wdXQiLCJCb29sZWFuIiwiVmlld0NoaWxkIiwiX2EiLCJDb21wb25lbnQiLCJzZWxlY3RvciIsInRlbXBsYXRlIiwic3R5bGVzIiwiZW5jYXBzdWxhdGlvbiIsIlZpZXdFbmNhcHN1bGF0aW9uIiwiTm9uZSIsIl9iIiwiRWxlbWVudFJlZiIsIl9jIiwiUmVuZGVyZXIiLCJtb250aHMiLCJ5ZWFycyIsIm1vbnRoTGlzdGVuZXJzIiwieWVhckxpc3RlbmVycyIsImdlbmVyYXRlTW9udGhEYXRhIiwibGlzdGVuZXIiLCJwdXNoIiwiWWVhciIsImdlbmVyYXRlWWVhckRhdGEiLCJ5ZWFyIiwieSIsImhhbGZOdW1ZZWFyc1Nob3duIiwibnVtWWVhcnNTaG93biIsIk1vbnRoIiwiY2xpY2tDYWxsYmFjayIsImRhdGVUbyIsImRhdGVGcm9tIiwiZ3JpZCIsInNldE1vbnRoIiwiaW5kZXgiLCJfaSIsInNldFllYXIiLCJNYXRoIiwiZmxvb3IiLCIkIiwiaGVhZGVyIiwiZGF5IiwiZWwiLCJ0ZXh0IiwiYXR0ciIsInRvU3RyaW5nIiwiYWRkQ2xhc3MiLCJhcHBlbmQiLCJib2R5IiwiaXNTYW1lIiwiaXNCZXR3ZWVuIiwiY2xpY2siLCJuYXRpdmVFbGVtZW50IiwiZW1wdHkiLCJhcHBlbmRUbyIsInJlbmRlckNhbGVuZGFyUmVuZGVyZXIiLCJzZWxlY3RSb290RWxlbWVudCIsImhlYWRlckVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0RWxlbWVudENsYXNzIiwiY2FsRWxlbWVudCIsInNldFRleHQiLCJzZXRFbGVtZW50QXR0cmlidXRlIiwibGlzdGVuIiwiRHVhbFBpY2tlck1vZGUiLCJkYXRlRnJvbUNoYW5nZSIsImRhdGVUb0NoYW5nZSIsIm1vbnRoMUNoYW5nZUxpc3RlbmVyIiwic2hpZnRDYWwyIiwiY2FsMSIsImNhbDIiLCJtb250aDJDaGFuZ2VMaXN0ZW5lciIsInNoaWZ0Q2FsMSIsInllYXIxQ2hhbmdlTGlzdGVuZXIiLCJ5ZWFyMkNoYW5nZUxpc3RlbmVyIiwiZGF0ZUZyb21WYWx1ZSIsImRhdGVGcm9tU3RyaW5nIiwiZGF0ZVRvVmFsdWUiLCJkYXRlVG9TdHJpbmciLCJUbyIsIkZyb20iLCJvbkRhdGVGcm9tU3RyaW5nQ2hhbmdlIiwiY29ycmVjdERhdGVUbyIsIm9uRGF0ZVRvU3RyaW5nQ2hhbmdlIiwiY29ycmVjdERhdGVGcm9tIiwic3VidHJhY3QiLCJhZGQiLCJpc0FmdGVyIiwiaXNCZWZvcmUiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsbUJBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELEVB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USxRaUJ0eUIzQ1csR0FBQ2lCLEVBQUFtRSxVQUFVLE9BQVE5RCxFQUFBTSxtQmpCeXlCZGYsRUFBVyxjQUEwSSxtQkFBbEhnRixFQUF1RCxtQkFBM0N2RSxHQUFxQk0sbUJBQXFDTixFQUFxQk0sb0JBQXFDaUUsR0FBT3pHLFNBQzNLc0Msb0JBQW9CckMsVUFBVyxPQUFRLFFpQjcxQi9DcUMsb0JBQUExQixHQUFDaUIsRUFBQXFFLFdBQ0dDLFNBQVUsZ0JBQ1ZDLFNBQVU3RyxFQUFRLElBQ2xCOEcsUUFBUzlHLEVBQVEsSUFBZ0NBLEVBQVEsS0FDekQrRyxjQUFlekUsRUFBQTBFLGtCQUFrQkMsT2pCaTJCNUIvRSxFQUFXLHlCQUNaYSxvQkFFSCxJQUFJMkQsR0FBSVEsSWlCbDJCQWhJLEdBQUE2RCxvQkFBbUJBLEdqQnkyQjFCLFNBQVM1RCxFQUFRRCxHa0JoNEJ2QkMsRUFBQUQsUUFBQSxvMEVsQnM0QkEiLCJmaWxlIjoiY3RuZy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvZm9ybXNcIiksIHJlcXVpcmUoXCJtb21lbnRcIiksIHJlcXVpcmUoXCJqcXVlcnlcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQGFuZ3VsYXIvY29yZVwiLCBcIkBhbmd1bGFyL2NvbW1vblwiLCBcIkBhbmd1bGFyL2Zvcm1zXCIsIFwibW9tZW50XCIsIFwianF1ZXJ5XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvZm9ybXNcIiksIHJlcXVpcmUoXCJtb21lbnRcIiksIHJlcXVpcmUoXCJqcXVlcnlcIikpIDogZmFjdG9yeShyb290W1wiQGFuZ3VsYXIvY29yZVwiXSwgcm9vdFtcIkBhbmd1bGFyL2NvbW1vblwiXSwgcm9vdFtcIkBhbmd1bGFyL2Zvcm1zXCJdLCByb290W1wibW9tZW50XCJdLCByb290W1wianF1ZXJ5XCJdKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzEwX18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2Zvcm1zXCIpLCByZXF1aXJlKFwibW9tZW50XCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBhbmd1bGFyL2NvcmVcIiwgXCJAYW5ndWxhci9jb21tb25cIiwgXCJAYW5ndWxhci9mb3Jtc1wiLCBcIm1vbWVudFwiLCBcImpxdWVyeVwiXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZmFjdG9yeShyZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2NvbW1vblwiKSwgcmVxdWlyZShcIkBhbmd1bGFyL2Zvcm1zXCIpLCByZXF1aXJlKFwibW9tZW50XCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBhbmd1bGFyL2NvcmVcIl0sIHJvb3RbXCJAYW5ndWxhci9jb21tb25cIl0sIHJvb3RbXCJAYW5ndWxhci9mb3Jtc1wiXSwgcm9vdFtcIm1vbWVudFwiXSwgcm9vdFtcImpxdWVyeVwiXSk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzJfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMF9fKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoKGZ1bmN0aW9uKG1vZHVsZXMpIHtcblx0Ly8gQ2hlY2sgYWxsIG1vZHVsZXMgZm9yIGRlZHVwbGljYXRlZCBtb2R1bGVzXG5cdGZvcih2YXIgaSBpbiBtb2R1bGVzKSB7XG5cdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZHVsZXMsIGkpKSB7XG5cdFx0XHRzd2l0Y2godHlwZW9mIG1vZHVsZXNbaV0pIHtcblx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOiBicmVhaztcblx0XHRcdGNhc2UgXCJvYmplY3RcIjpcblx0XHRcdFx0Ly8gTW9kdWxlIGNhbiBiZSBjcmVhdGVkIGZyb20gYSB0ZW1wbGF0ZVxuXHRcdFx0XHRtb2R1bGVzW2ldID0gKGZ1bmN0aW9uKF9tKSB7XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBfbS5zbGljZSgxKSwgZm4gPSBtb2R1bGVzW19tWzBdXTtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGEsYixjKSB7XG5cdFx0XHRcdFx0XHRmbi5hcHBseSh0aGlzLCBbYSxiLGNdLmNvbmNhdChhcmdzKSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fShtb2R1bGVzW2ldKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0Ly8gTW9kdWxlIGlzIGEgY29weSBvZiBhbm90aGVyIG1vZHVsZVxuXHRcdFx0XHRtb2R1bGVzW2ldID0gbW9kdWxlc1ttb2R1bGVzW2ldXTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtb2R1bGVzO1xufShbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgZGF0ZXBpY2tlcl9tb2R1bGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0ZXhwb3J0cy5EYXRlUGlja2VyTW9kdWxlID0gZGF0ZXBpY2tlcl9tb2R1bGVfMS5EYXRlUGlja2VyTW9kdWxlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgY29tbW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xyXG5cdHZhciBmb3Jtc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgZGF0ZXBpY2tlcl9jb21wb25lbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XHJcblx0dmFyIGR1YWxwaWNrZXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcclxuXHR2YXIgY2FsZW5kYXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBjYWxlbmRhcl9ncmlkX2NvbXBvbmVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxuXHR2YXIgRGF0ZVBpY2tlck1vZHVsZSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIERhdGVQaWNrZXJNb2R1bGUoKSB7XHJcblx0ICAgIH1cclxuXHQgICAgRGF0ZVBpY2tlck1vZHVsZSA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLk5nTW9kdWxlKHtcclxuXHQgICAgICAgICAgICBleHBvcnRzOiBbZGF0ZXBpY2tlcl9jb21wb25lbnRfMS5EYXRlUGlja2VyQ29tcG9uZW50LCBkdWFscGlja2VyX2NvbXBvbmVudF8xLkR1YWxQaWNrZXJDb21wb25lbnRdLFxyXG5cdCAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW2RhdGVwaWNrZXJfY29tcG9uZW50XzEuRGF0ZVBpY2tlckNvbXBvbmVudCwgZHVhbHBpY2tlcl9jb21wb25lbnRfMS5EdWFsUGlja2VyQ29tcG9uZW50LCBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCwgY2FsZW5kYXJfZ3JpZF9jb21wb25lbnRfMS5DYWxlbmRhckdyaWRDb21wb25lbnRdLFxyXG5cdCAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb25fMS5Db21tb25Nb2R1bGUsIGZvcm1zXzEuRm9ybXNNb2R1bGVdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtdKVxyXG5cdCAgICBdLCBEYXRlUGlja2VyTW9kdWxlKTtcclxuXHQgICAgcmV0dXJuIERhdGVQaWNrZXJNb2R1bGU7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkRhdGVQaWNrZXJNb2R1bGUgPSBEYXRlUGlja2VyTW9kdWxlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yX187XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgbW9tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcclxuXHR2YXIgY2FsZW5kYXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBjYWxlbmRhcl9tb2RlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG5cdChmdW5jdGlvbiAoRGF0ZVBpY2tlck1vZGUpIHtcclxuXHQgICAgRGF0ZVBpY2tlck1vZGVbRGF0ZVBpY2tlck1vZGVbXCJWaXNpYmxlXCJdID0gMF0gPSBcIlZpc2libGVcIjtcclxuXHQgICAgRGF0ZVBpY2tlck1vZGVbRGF0ZVBpY2tlck1vZGVbXCJIaWRkZW5cIl0gPSAxXSA9IFwiSGlkZGVuXCI7XHJcblx0fSkoZXhwb3J0cy5EYXRlUGlja2VyTW9kZSB8fCAoZXhwb3J0cy5EYXRlUGlja2VyTW9kZSA9IHt9KSk7XHJcblx0dmFyIERhdGVQaWNrZXJNb2RlID0gZXhwb3J0cy5EYXRlUGlja2VyTW9kZTtcclxuXHR2YXIgRGF0ZVBpY2tlckNvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIERhdGVQaWNrZXJDb21wb25lbnQobXlFbGVtZW50LCByZW5kZXJlcikge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMubXlFbGVtZW50ID0gbXlFbGVtZW50O1xyXG5cdCAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cdCAgICAgICAgdGhpcy5DYWxlbmRhck1vZGUgPSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlO1xyXG5cdCAgICAgICAgdGhpcy5EYXRlUGlja2VyTW9kZSA9IERhdGVQaWNrZXJNb2RlO1xyXG5cdCAgICAgICAgdGhpcy5kYXRlQ2hhbmdlID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuXHQgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuXHQgICAgICAgIHRoaXMubW9kZSA9IERhdGVQaWNrZXJNb2RlLkhpZGRlbjtcclxuXHQgICAgICAgIHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG5cdCAgICAgICAgICAgIHZhciBkID0gbW9tZW50KGRhdGUpO1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLnNldERhdGUoZCk7XHJcblx0ICAgICAgICAgICAgfTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLm1vbnRoQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLnllYXJDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgfVxyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB7XHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlVmFsdWU7XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIG1vbWVudCAmJiB2YWwuaXNWYWxpZCgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVN0cmluZyA9IHZhbC5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVWYWx1ZSA9IHZhbDtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodmFsKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUub25EYXRlU3RyaW5nQ2hhbmdlID0gZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgdGhpcy5kYXRlU3RyaW5nID0gdmFsO1xyXG5cdCAgICAgICAgdmFyIG0gPSBtb21lbnQobmV3IERhdGUodmFsKSk7XHJcblx0ICAgICAgICBpZiAobS5pc1ZhbGlkKCkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVWYWx1ZS5zZXQobS50b09iamVjdCgpKTtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5kYXRlID0gdGhpcy5kYXRlVmFsdWU7XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodGhpcy5kYXRlVmFsdWUpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY2hhbmdlR2xvYmFsTW9kZSA9IGZ1bmN0aW9uIChtb2RlKSB7XHJcblx0ICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG5cdCAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIERhdGVQaWNrZXJNb2RlLlZpc2libGU6XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmJsdXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHQgICAgICAgIGlmICgoZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZSkgPT0gOSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jaGFuZ2VNb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsLmNoYW5nZU1vZGUobW9kZSk7XHJcblx0ICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXI6XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmdvUHJldiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLmNhbC5tb2RlID09IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5kYXRlLm1vbnRoKHRoaXMuY2FsLmRhdGUubW9udGgoKSAtIDEpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsLmdvUHJldigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5nb05leHQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICBpZiAodGhpcy5jYWwubW9kZSA9PSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5jYWwuZGF0ZS5tb250aCh0aGlzLmNhbC5kYXRlLm1vbnRoKCkgKyAxKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5nb05leHQoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICBpZiAodGhpcy5kYXRlIGluc3RhbmNlb2YgbW9tZW50ICYmIHRoaXMuZGF0ZS5pc1ZhbGlkKCkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5kYXRlID0gbW9tZW50KHRoaXMuZGF0ZSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbC5kYXRlID0gbW9tZW50KCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB0aGlzLmNhbC5zdWJzY3JpYmVUb0NoYW5nZU1vbnRoKHRoaXMubW9udGhDaGFuZ2VMaXN0ZW5lcik7XHJcblx0ICAgICAgICB0aGlzLmNhbC5zdWJzY3JpYmVUb0NoYW5nZVllYXIodGhpcy55ZWFyQ2hhbmdlTGlzdGVuZXIpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgIH07XHJcblx0ICAgIERhdGVQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICB9O1xyXG5cdCAgICBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJDYWxlbmRhciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZSwgdGhpcy5kYXRlKTtcclxuXHQgICAgfTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuc2V0RGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcblx0ICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgRGF0ZVBpY2tlck1vZGUuVmlzaWJsZTpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLkhpZGRlbik7XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5PdXRwdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZUNoYW5nZVwiLCB2b2lkIDApO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbnB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIG51bGwpO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbnB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgQm9vbGVhbilcclxuXHQgICAgXSwgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5wdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRGF0ZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5wdXRDbGFzc1wiLCB2b2lkIDApO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5WaWV3Q2hpbGQoY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgKHR5cGVvZiAoX2EgPSB0eXBlb2YgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQgIT09ICd1bmRlZmluZWQnICYmIGNhbGVuZGFyX2NvbXBvbmVudF8xLkNhbGVuZGFyQ29tcG9uZW50KSA9PT0gJ2Z1bmN0aW9uJyAmJiBfYSkgfHwgT2JqZWN0KVxyXG5cdCAgICBdLCBEYXRlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjYWxcIiwgdm9pZCAwKTtcclxuXHQgICAgRGF0ZVBpY2tlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdjdC1kYXRlcGlja2VyJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygxNCksXHJcblx0ICAgICAgICAgICAgc3R5bGVzOiBbX193ZWJwYWNrX3JlcXVpcmVfXygxNSksIF9fd2VicGFja19yZXF1aXJlX18oMTYpXSxcclxuXHQgICAgICAgICAgICBlbmNhcHN1bGF0aW9uOiBjb3JlXzEuVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbKHR5cGVvZiAoX2IgPSB0eXBlb2YgY29yZV8xLkVsZW1lbnRSZWYgIT09ICd1bmRlZmluZWQnICYmIGNvcmVfMS5FbGVtZW50UmVmKSA9PT0gJ2Z1bmN0aW9uJyAmJiBfYikgfHwgT2JqZWN0LCAodHlwZW9mIChfYyA9IHR5cGVvZiBjb3JlXzEuUmVuZGVyZXIgIT09ICd1bmRlZmluZWQnICYmIGNvcmVfMS5SZW5kZXJlcikgPT09ICdmdW5jdGlvbicgJiYgX2MpIHx8IE9iamVjdF0pXHJcblx0ICAgIF0sIERhdGVQaWNrZXJDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gRGF0ZVBpY2tlckNvbXBvbmVudDtcclxuXHQgICAgdmFyIF9hLCBfYiwgX2M7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkRhdGVQaWNrZXJDb21wb25lbnQgPSBEYXRlUGlja2VyQ29tcG9uZW50O1xyXG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcblx0dmFyIGNhbGVuZGFyX21vZGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XHJcblx0dmFyIGNhbGVuZGFyX2dyaWRfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xyXG5cdHZhciBDYWxlbmRhckNvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIENhbGVuZGFyQ29tcG9uZW50KCkge1xyXG5cdCAgICAgICAgLyoqIEFjY2Vzc29yIHRvIHRoZSBtb2RlIGZvciBodG1sICovXHJcblx0ICAgICAgICB0aGlzLkNhbGVuZGFyTW9kZSA9IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGU7XHJcblx0ICAgICAgICB0aGlzLm1vZGUgPSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyO1xyXG5cdCAgICAgICAgLyoqIEFycmF5IG9mIG1vbnRocyB0byBzaG93IHdoZW4gc2VsZWN0aW5nIGEgbmV3IG1vbnRoICovXHJcblx0ICAgICAgICB0aGlzLm1vbnRocyA9IFtdO1xyXG5cdCAgICAgICAgLyoqIEFycmF5IG9mIHllYXJzIHRvIHNob3cgd2hlbiBzZWxlY3RpbmcgYSBuZXcgeWVhciAqL1xyXG5cdCAgICAgICAgdGhpcy55ZWFycyA9IFtdO1xyXG5cdCAgICAgICAgLyoqIExpc3RlbmVycyBmb3IgbW9udGggY2hhbmdlICovXHJcblx0ICAgICAgICB0aGlzLm1vbnRoTGlzdGVuZXJzID0gW107XHJcblx0ICAgICAgICAvKiogTGlzdGVuZXJzIGZvciB5ZWFyIGNoYW5nZSAqL1xyXG5cdCAgICAgICAgdGhpcy55ZWFyTGlzdGVuZXJzID0gW107XHJcblx0ICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhEYXRhKCk7XHJcblx0ICAgIH1cclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ5ZWFyRGF0YVwiLCB7XHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMueWVhcnM7IH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICA7XHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHsgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkgeyB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuc3Vic2NyaWJlVG9DaGFuZ2VNb250aCA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG5cdCAgICAgICAgdGhpcy5tb250aExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLnN1YnNjcmliZVRvQ2hhbmdlWWVhciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG5cdCAgICAgICAgdGhpcy55ZWFyTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuY2hhbmdlTW9kZSA9IGZ1bmN0aW9uIChtb2RlKSB7XHJcblx0ICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG5cdCAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcblx0ICAgICAgICAgICAgY2FzZSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLlllYXI6XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFyRGF0YSh0aGlzLmRhdGUueWVhcigpKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5nZW5lcmF0ZU1vbnRoRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBkYXRlID0gbW9tZW50KG5ldyBEYXRlKCkpOyAvL2RvZXNuJ3QgY2hhbmdlXHJcblx0ICAgICAgICBkYXRlLm1vbnRoKDApO1xyXG5cdCAgICAgICAgdmFyIGQgPSBtb21lbnQobmV3IERhdGUoKSk7XHJcblx0ICAgICAgICBkLm1vbnRoKDApO1xyXG5cdCAgICAgICAgd2hpbGUgKGRhdGUueWVhcigpID09PSBkLnllYXIoKSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMubW9udGhzLnB1c2goZC5mb3JtYXQoXCJNTU1cIikpO1xyXG5cdCAgICAgICAgICAgIGQubW9udGgoZC5tb250aCgpICsgMSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5nZW5lcmF0ZVllYXJEYXRhID0gZnVuY3Rpb24gKHllYXIpIHtcclxuXHQgICAgICAgIHRoaXMueWVhcnMgPSBbXTtcclxuXHQgICAgICAgIHZhciB5ID0geWVhciAtIENhbGVuZGFyQ29tcG9uZW50LmhhbGZOdW1ZZWFyc1Nob3duO1xyXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duOyBpKyspIHtcclxuXHQgICAgICAgICAgICB0aGlzLnllYXJzLnB1c2goeSArIGkpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuZ29QcmV2ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXI6XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5Nb250aDpcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICAgICAgY2FzZSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLlllYXI6XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFyRGF0YSh0aGlzLnllYXJzW0NhbGVuZGFyQ29tcG9uZW50LmhhbGZOdW1ZZWFyc1Nob3duXSAtIENhbGVuZGFyQ29tcG9uZW50Lm51bVllYXJzU2hvd24pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuZ29OZXh0ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXI6XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5Nb250aDpcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICAgICAgY2FzZSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLlllYXI6XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFyRGF0YSh0aGlzLnllYXJzW0NhbGVuZGFyQ29tcG9uZW50LmhhbGZOdW1ZZWFyc1Nob3duXSArIENhbGVuZGFyQ29tcG9uZW50Lm51bVllYXJzU2hvd24pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyQ2FsZW5kYXIgPSBmdW5jdGlvbiAoY2xpY2tDYWxsYmFjaywgZGF0ZVRvLCBkYXRlRnJvbSkge1xyXG5cdCAgICAgICAgdGhpcy5ncmlkLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZSwgY2xpY2tDYWxsYmFjaywgZGF0ZVRvLCBkYXRlRnJvbSk7XHJcblx0ICAgIH07XHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5zZXRNb250aCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG5cdCAgICAgICAgdGhpcy5kYXRlLm1vbnRoKGluZGV4KTtcclxuXHQgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLm1vbnRoTGlzdGVuZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG5cdCAgICAgICAgICAgIHZhciBmbiA9IF9hW19pXTtcclxuXHQgICAgICAgICAgICBmbigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUuc2V0WWVhciA9IGZ1bmN0aW9uICh5ZWFyKSB7XHJcblx0ICAgICAgICB0aGlzLmRhdGUueWVhcih5ZWFyKTtcclxuXHQgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnllYXJMaXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGZuID0gX2FbX2ldO1xyXG5cdCAgICAgICAgICAgIGZuKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKiBEZXRlcm1pbmVzIGhvdyBtYW55IHllYXIgYnV0dG9ucyBhcmUgc2hvd24uICovXHJcblx0ICAgIENhbGVuZGFyQ29tcG9uZW50Lm51bVllYXJzU2hvd24gPSA5O1xyXG5cdCAgICAvKiogY29udmVuaWVuY2UgdmFyaWFibGUgZm9yIGdlbmVyYXRpbmcgeWVhcnMgKi9cclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQuaGFsZk51bVllYXJzU2hvd24gPSBNYXRoLmZsb29yKENhbGVuZGFyQ29tcG9uZW50Lm51bVllYXJzU2hvd24gLyAyKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuVmlld0NoaWxkKGNhbGVuZGFyX2dyaWRfY29tcG9uZW50XzEuQ2FsZW5kYXJHcmlkQ29tcG9uZW50KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsICh0eXBlb2YgKF9hID0gdHlwZW9mIGNhbGVuZGFyX2dyaWRfY29tcG9uZW50XzEuQ2FsZW5kYXJHcmlkQ29tcG9uZW50ICE9PSAndW5kZWZpbmVkJyAmJiBjYWxlbmRhcl9ncmlkX2NvbXBvbmVudF8xLkNhbGVuZGFyR3JpZENvbXBvbmVudCkgPT09ICdmdW5jdGlvbicgJiYgX2EpIHx8IE9iamVjdClcclxuXHQgICAgXSwgQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcImdyaWRcIiwgdm9pZCAwKTtcclxuXHQgICAgQ2FsZW5kYXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnY3QtY2FsZW5kYXInLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSxcclxuXHQgICAgICAgICAgICBzdHlsZXM6IFtfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKV0sXHJcblx0ICAgICAgICAgICAgZW5jYXBzdWxhdGlvbjogY29yZV8xLlZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXHJcblx0ICAgIF0sIENhbGVuZGFyQ29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIENhbGVuZGFyQ29tcG9uZW50O1xyXG5cdCAgICB2YXIgX2E7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkNhbGVuZGFyQ29tcG9uZW50ID0gQ2FsZW5kYXJDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0KGZ1bmN0aW9uIChDYWxlbmRhck1vZGUpIHtcclxuXHQgICAgQ2FsZW5kYXJNb2RlW0NhbGVuZGFyTW9kZVtcIkNhbGVuZGFyXCJdID0gMF0gPSBcIkNhbGVuZGFyXCI7XHJcblx0ICAgIENhbGVuZGFyTW9kZVtDYWxlbmRhck1vZGVbXCJNb250aFwiXSA9IDFdID0gXCJNb250aFwiO1xyXG5cdCAgICBDYWxlbmRhck1vZGVbQ2FsZW5kYXJNb2RlW1wiWWVhclwiXSA9IDJdID0gXCJZZWFyXCI7XHJcblx0fSkoZXhwb3J0cy5DYWxlbmRhck1vZGUgfHwgKGV4cG9ydHMuQ2FsZW5kYXJNb2RlID0ge30pKTtcclxuXHR2YXIgQ2FsZW5kYXJNb2RlID0gZXhwb3J0cy5DYWxlbmRhck1vZGU7XHJcblxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciBtb21lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xyXG5cdHZhciAkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XHJcblx0dmFyIENhbGVuZGFyR3JpZENvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIENhbGVuZGFyR3JpZENvbXBvbmVudChteUVsZW1lbnQsIHJlbmRlcmVyKSB7XHJcblx0ICAgICAgICB0aGlzLm15RWxlbWVudCA9IG15RWxlbWVudDtcclxuXHQgICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHQgICAgfVxyXG5cdCAgICBDYWxlbmRhckdyaWRDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICB9O1xyXG5cdCAgICBDYWxlbmRhckdyaWRDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogUmVuZGVycyBhIGNhbGVuZGFyIGJhc2VkIG9uIHRoZSBkYXRlLCBzZWxlY3RpbmcgdGhlIHByb3BlciBmcm9tL3RvIGlmIHZpc2libGUuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDYWxlbmRhckdyaWRDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckNhbGVuZGFyID0gZnVuY3Rpb24gKGRhdGUsIGNsaWNrQ2FsbGJhY2ssIGRhdGVUbywgZGF0ZUZyb20pIHtcclxuXHQgICAgICAgIHZhciBkID0gbW9tZW50KGRhdGUpO1xyXG5cdCAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblx0ICAgICAgICB2YXIgaGVhZGVyID0gJChcIjxkaXYgY2xhc3M9J2N0LWRwLWNhbC1oZWFkZXInPjwvZGl2PlwiKTtcclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcblx0ICAgICAgICAgICAgZC5kYXkoaSk7XHJcblx0ICAgICAgICAgICAgdmFyIGVsID0gJChcIjxkaXY+PC9kaXY+XCIpO1xyXG5cdCAgICAgICAgICAgIGVsLnRleHQoZC5mb3JtYXQoXCJkZFwiKSk7XHJcblx0ICAgICAgICAgICAgZWwuYXR0cihcImN0LWNhbC1kcC1kYXlcIiwgaS50b1N0cmluZygpKTtcclxuXHQgICAgICAgICAgICBlbC5hZGRDbGFzcyhcImN0LWRwLWNhbC1kYXlcIik7XHJcblx0ICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChlbCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBkLmRhdGUoMSk7IC8vcmVzZXQgZGF0ZS5cclxuXHQgICAgICAgIHZhciBib2R5ID0gJChcIjxkaXYgY2xhc3M9J2N0LWRwLWNhbC1ib2R5Jz48L2Rpdj5cIik7XHJcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQuZGF5KCk7IGkrKykge1xyXG5cdCAgICAgICAgICAgIHZhciBlbCA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcclxuXHQgICAgICAgICAgICBlbC5hdHRyKFwiY3QtZHAtY2FsLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG5cdCAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiY3QtZHAtY2FsLWRheVwiKTtcclxuXHQgICAgICAgICAgICBib2R5LmFwcGVuZChlbCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB3aGlsZSAoZC5tb250aCgpID09PSBkYXRlLm1vbnRoKCkpIHtcclxuXHQgICAgICAgICAgICB2YXIgZWwgPSAkKFwiPGJ1dHRvbj48L2J1dHRvbj5cIik7XHJcblx0ICAgICAgICAgICAgZWwudGV4dCgoZC5kYXRlKCkpLnRvU3RyaW5nKCkpO1xyXG5cdCAgICAgICAgICAgIGVsLmF0dHIoXCJjdC1kcC1jYWwtZGF5XCIsIGQuZGF0ZSgpLnRvU3RyaW5nKCkpO1xyXG5cdCAgICAgICAgICAgIGVsLmF0dHIoXCJ0YWJJbmRleFwiLCBcIi0xXCIpO1xyXG5cdCAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiY3QtZHAtY2FsLWRheVwiKTtcclxuXHQgICAgICAgICAgICBpZiAoKGRhdGVUbyAmJiBkLmlzU2FtZShkYXRlVG8sIFwiZGF5XCIpKSB8fCAoZGF0ZUZyb20gJiYgZC5pc1NhbWUoZGF0ZUZyb20sIFwiZGF5XCIpKSkge1xyXG5cdCAgICAgICAgICAgICAgICBlbC5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKGRhdGVGcm9tICYmIGRhdGVUbyAmJiBkLmlzQmV0d2VlbihkYXRlRnJvbSwgZGF0ZVRvKSkge1xyXG5cdCAgICAgICAgICAgICAgICBlbC5hZGRDbGFzcyhcImJldHdlZW5cIik7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsLmNsaWNrKGNsaWNrQ2FsbGJhY2soZCkpO1xyXG5cdCAgICAgICAgICAgIGQuZGF0ZShkLmRhdGUoKSArIDEpO1xyXG5cdCAgICAgICAgICAgIGJvZHkuYXBwZW5kKGVsKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgICQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCkuZW1wdHkoKTtcclxuXHQgICAgICAgIGhlYWRlci5hcHBlbmRUbyh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50KTtcclxuXHQgICAgICAgIGJvZHkuYXBwZW5kVG8odGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBEZXByZWNhdGVkIHVudGlsIHN1cHBvcnQgb2YgcmVuZGVyZXIgaXMgbW9yZSBzdGFibGUuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDYWxlbmRhckdyaWRDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckNhbGVuZGFyUmVuZGVyZXIgPSBmdW5jdGlvbiAoY2FsLCBjbGlja0NhbGxiYWNrLCBkYXRlVG8sIGRhdGVGcm9tKSB7XHJcblx0ICAgICAgICB2YXIgZCA9IG1vbWVudChjYWwuZGF0ZSk7XHJcblx0ICAgICAgICBkLmRhdGUoMSk7IC8vcmVzZXQgZGF0ZS5cclxuXHQgICAgICAgIHRoaXMucmVuZGVyZXIuc2VsZWN0Um9vdEVsZW1lbnQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcblx0ICAgICAgICB2YXIgaGVhZGVyRWxlbWVudCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImRpdlwiKTtcclxuXHQgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGhlYWRlckVsZW1lbnQsIFwiLmN0LWRwLWNhbC1oZWFkZXJcIiwgdHJ1ZSk7XHJcblx0ICAgICAgICB2YXIgY2FsRWxlbWVudCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlRWxlbWVudCh0aGlzLm15RWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImRpdlwiKTtcclxuXHQgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGhlYWRlckVsZW1lbnQsIFwiLmN0LWRwLWNhbC1ib2R5XCIsIHRydWUpO1xyXG5cdCAgICAgICAgLy9BZGQgbmFtZSBmb3IgZGF5IG9mIHdlZWtcclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcblx0ICAgICAgICAgICAgZC5kYXkoaSk7XHJcblx0ICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KGhlYWRlckVsZW1lbnQsIFwiZGl2XCIpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0VGV4dChlbCwgZC5mb3JtYXQoXCJkZFwiKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50QXR0cmlidXRlKGVsLCBcImN0LWNhbC1kcC1kYXlcIiwgaS50b1N0cmluZygpKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIHRydWUpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblx0ICAgICAgICAvL0FkZCBibGFuayBmaWxsZXIgZGF5cy5cclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5kYXkoKTsgaSsrKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KGNhbEVsZW1lbnQsIFwiZGl2XCIpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIGkudG9TdHJpbmcoKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCB0cnVlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIC8vQWRkIGNhbGVuZGFyXHJcblx0ICAgICAgICB3aGlsZSAoZC5tb250aCgpID09PSBjYWwuZGF0ZS5tb250aCgpKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXM7XHJcblx0ICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KGNhbEVsZW1lbnQsIFwiYnV0dG9uXCIpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0VGV4dChlbCwgKGQuZGF0ZSgpKS50b1N0cmluZygpKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCBkLmRhdGUoKS50b1N0cmluZygpKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIFwidGFiaW5kZXhcIiwgXCItMVwiKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIHRydWUpO1xyXG5cdCAgICAgICAgICAgIGlmICgoZGF0ZVRvICYmIGQuaXNTYW1lKGRhdGVUbywgXCJkYXlcIikpIHx8IChkYXRlRnJvbSAmJiBkLmlzU2FtZShkYXRlRnJvbSwgXCJkYXlcIikpKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGVsLCBcImFjdGl2ZVwiLCB0cnVlKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKGRhdGVGcm9tICYmIGRhdGVUbyAmJiBkLmlzQmV0d2VlbihkYXRlRnJvbSwgZGF0ZVRvKSkge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJiZXR3ZWVuXCIsIHRydWUpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihlbCwgXCJjbGlja1wiLCBjbGlja0NhbGxiYWNrKGQpKTtcclxuXHQgICAgICAgICAgICBkLmRhdGUoZC5kYXRlKCkgKyAxKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ2FsZW5kYXJHcmlkQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuXHQgICAgICAgICAgICBzZWxlY3RvcjogJ2N0LWNhbGVuZGFyLWdyaWQnLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiAnJyxcclxuXHQgICAgICAgICAgICBzdHlsZXM6IFtfX3dlYnBhY2tfcmVxdWlyZV9fKDExKV0sXHJcblx0ICAgICAgICAgICAgZW5jYXBzdWxhdGlvbjogY29yZV8xLlZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgWyh0eXBlb2YgKF9hID0gdHlwZW9mIGNvcmVfMS5FbGVtZW50UmVmICE9PSAndW5kZWZpbmVkJyAmJiBjb3JlXzEuRWxlbWVudFJlZikgPT09ICdmdW5jdGlvbicgJiYgX2EpIHx8IE9iamVjdCwgKHR5cGVvZiAoX2IgPSB0eXBlb2YgY29yZV8xLlJlbmRlcmVyICE9PSAndW5kZWZpbmVkJyAmJiBjb3JlXzEuUmVuZGVyZXIpID09PSAnZnVuY3Rpb24nICYmIF9iKSB8fCBPYmplY3RdKVxyXG5cdCAgICBdLCBDYWxlbmRhckdyaWRDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gQ2FsZW5kYXJHcmlkQ29tcG9uZW50O1xyXG5cdCAgICB2YXIgX2EsIF9iO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5DYWxlbmRhckdyaWRDb21wb25lbnQgPSBDYWxlbmRhckdyaWRDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMF9fO1xuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCJcIlxuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjdC1kcC1jYWxcXFwiIFtuZ0NsYXNzXT1cXFwieydoaWRkZW4nOiBtb2RlICE9IENhbGVuZGFyTW9kZS5DYWxlbmRhcn1cXFwiPlxcclxcbiAgICA8Y3QtY2FsZW5kYXItZ3JpZD48L2N0LWNhbGVuZGFyLWdyaWQ+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBjbGFzcz1cXFwiY3QtZHAtbW9udGhzXFxcIiBbbmdDbGFzc109XFxcInsnaGlkZGVuJzogbW9kZSAhPSBDYWxlbmRhck1vZGUuTW9udGh9XFxcIj5cXHJcXG4gICAgPHRlbXBsYXRlIG5nRm9yIGxldC1pdGVtIFtuZ0Zvck9mXT1cXFwibW9udGhzXFxcIiBbbmdGb3JUcmFja0J5XT1cXFwibXlUcmFja0J5XFxcIiBsZXQtaT1cXFwiaW5kZXhcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgY3QtZHAtbW9udGhcXFwiIChjbGljayk9XFxcInNldE1vbnRoKGkpXFxcIj57e2l0ZW19fTwvYnV0dG9uPlxcclxcbiAgICA8L3RlbXBsYXRlPlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImN0LWRwLXllYXJzXFxcIiBbbmdDbGFzc109XFxcInsnaGlkZGVuJzogbW9kZSAhPSBDYWxlbmRhck1vZGUuWWVhcn1cXFwiPlxcclxcbiAgICA8dGVtcGxhdGUgbmdGb3IgbGV0LWl0ZW0gW25nRm9yT2ZdPVxcXCJ5ZWFyc1xcXCIgW25nRm9yVHJhY2tCeV09XFxcIm15VHJhY2tCeVxcXCIgbGV0LWk9XFxcImluZGV4XFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IGN0LWRwLXllYXJcXFwiIChjbGljayk9XFxcInNldFllYXIoaXRlbSlcXFwiPnt7aXRlbX19PC9idXR0b24+XFxyXFxuICAgIDwvdGVtcGxhdGU+XFxyXFxuPC9kaXY+XCI7XG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuMTEsXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImN0LWRwXFxcIj5cXHJcXG4gICAgPGlucHV0IFxcclxcbiAgICAgICAgY2xhc3M9XFxcImN0LWRwLWlucHV0XFxcIiBcXHJcXG4gICAgICAgIHR5cGU9XFxcInRleHRcXFwiIFxcclxcbiAgICAgICAgKGZvY3VzKT1cXFwiY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5WaXNpYmxlKVxcXCJcXHJcXG4gICAgICAgIChrZXlkb3duKT1cXFwiYmx1cigkZXZlbnQpXFxcIiBcXHJcXG4gICAgICAgIFtuZ01vZGVsXT1cXFwiZGF0ZVN0cmluZ1xcXCJcXHJcXG4gICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cXFwib25EYXRlU3RyaW5nQ2hhbmdlKCRldmVudClcXFwiXFxyXFxuICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXHJcXG4gICAgICAgIFtuZ0NsYXNzXT1cXFwiaW5wdXRDbGFzc1xcXCJcXHJcXG4gICAgLz5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtc2hhZG93LWJveFxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pXFxcIiAqbmdJZj1cXFwibW9kZSAhPSBEYXRlUGlja2VyTW9kZS5IaWRkZW5cXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtcGlja2VyXFxcIiBbbmdDbGFzc109XFxcInsnaGlkZGVuJzogbW9kZSA9PSBEYXRlUGlja2VyTW9kZS5IaWRkZW59XFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImN0LWRwLWhlYWRlclxcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tcHJldiAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJnb1ByZXYoKVxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mbHQ7PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbW9udGggY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5Nb250aClcXFwiPnt7Y2FsLmRhdGUuZm9ybWF0KFxcXCJNTU1NXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXllYXIgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuWWVhcilcXFwiPnt7Y2FsLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW5leHQgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiZ29OZXh0KClcXFwiIFtkaXNhYmxlZF09XFxcImNhbC5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmd0OzwvYnV0dG9uPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8Y3QtY2FsZW5kYXI+PC9jdC1jYWxlbmRhcj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XCI7XG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuMTEsXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIi5jdC1kcHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1ibG9ja30uY3QtZHAtaW5wdXR7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxMDF9LmN0LWRwLWZyb20tZm9jdXMgLmN0LWRwLWlucHV0LmN0LWRwLWlucHV0LWZyb217YmFja2dyb3VuZC1jb2xvcjpsaWdodHNreWJsdWV9LmN0LWRwLXRvLWZvY3VzIC5jdC1kcC1pbnB1dC5jdC1kcC1pbnB1dC10b3tiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0c2t5Ymx1ZX0uY3QtZHAtc2hhZG93LWJveHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O3otaW5kZXg6MTAwfS5jdC1kcC1waWNrZXJ7d2lkdGg6MjIwcHg7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNiZmJmYmY7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjYmZiZmJmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNiZmJmYmY7Ym94LXNpemluZzpjb250ZW50LWJveDtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwMTtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlfS5jdC1kcC1waWNrZXIuY3QtZHAtZHVhbHBpY2tlcnt3aWR0aDo0NDBweH0uY3QtZHAtaGVhZGVye2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNiZmJmYmZ9LmN0LWRwLWNhbHtwYWRkaW5nOjVweDt3aWR0aDoyMjBweDtmbG9hdDpsZWZ0fS5jdC1kcC1jYWwtaGVhZGVye2NvbG9yOiNiZmJmYmZ9LmN0LWRwLWNhbC1kYXl7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtmbG9hdDpsZWZ0O3RleHQtYWxpZ246Y2VudGVyfS5jdC1kcC1jYWwtZGF5LmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZX0uY3QtZHAtY2FsLWRheS5iZXR3ZWVue2JhY2tncm91bmQtY29sb3I6bGlnaHRncmF5fS5jdC1kcC1tb250aHN7d2lkdGg6MjEwcHg7ZmxvYXQ6bGVmdH0uY3QtZHAtbW9udGh7d2lkdGg6NzBweDtmbG9hdDpsZWZ0O3RleHQtYWxpZ246Y2VudGVyfS5jdC1kcC15ZWFyc3t3aWR0aDoyMTBweDtmbG9hdDpsZWZ0fS5jdC1kcC15ZWFye3dpZHRoOjcwcHg7ZmxvYXQ6bGVmdDt0ZXh0LWFsaWduOmNlbnRlcn0uY3QtZHAtYnRue21hcmdpbi1yaWdodDotMXB4O2JvcmRlci10b3A6bm9uZTtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNiZmJmYmY7Ym9yZGVyLWJvdHRvbTpub25lO2JvcmRlci1sZWZ0Om5vbmU7cGFkZGluZzo0cHg7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZX0uY3QtZHAtYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2Q5ZDlkOX0uY3QtZHAtYnRuLXByZXYsLmN0LWRwLWJ0bi1uZXh0e3dpZHRoOjMwcHh9LmN0LWRwLWJ0bi1tb250aHt3aWR0aDoxMDBweDtmb250LXdlaWdodDo1MDB9LmN0LWRwLWJ0bi15ZWFye3dpZHRoOjUwcHg7Zm9udC13ZWlnaHQ6NTAwfS5jbGVhcmZpeCwuY3QtZHAtY2FsOmFmdGVyLC5jdC1kcC1tb250aHM6YWZ0ZXIsLmN0LWRwLXllYXJzOmFmdGVye3Zpc2liaWxpdHk6aGlkZGVuO2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjA7Y29udGVudDpcXFwiIFxcXCI7Y2xlYXI6Ym90aDtoZWlnaHQ6MH0ubm8tYnV0dG9uLC5jdC1kcC1jYWwtZGF5e2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmUgIWltcG9ydGFudH1cIlxuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgbW9tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcclxuXHR2YXIgY2FsZW5kYXJfY29tcG9uZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBjYWxlbmRhcl9tb2RlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG5cdC8qKlxyXG5cdCAqIERlZmluZXMgdGhlIG1vZGUgb2YgdGhlIHBpY2tlclxyXG5cdCAqL1xyXG5cdChmdW5jdGlvbiAoRHVhbFBpY2tlck1vZGUpIHtcclxuXHQgICAgLyoqIEFsbG93cyBzZWxlY3Rpb24gb2YgdGhlIHRvIGRhdGUuICovXHJcblx0ICAgIER1YWxQaWNrZXJNb2RlW0R1YWxQaWNrZXJNb2RlW1wiVG9cIl0gPSAwXSA9IFwiVG9cIjtcclxuXHQgICAgLyoqIEFsbG93cyBzZWxlY3Rpb24gb2YgdGhlIGZyb20gZGF0ZS4gKi9cclxuXHQgICAgRHVhbFBpY2tlck1vZGVbRHVhbFBpY2tlck1vZGVbXCJGcm9tXCJdID0gMV0gPSBcIkZyb21cIjtcclxuXHQgICAgLyoqIE1ha2VzIHRoZSBwaWNrZXIgaGlkZGVuLCBkZWZhdWx0IHN0YXRlLiAqL1xyXG5cdCAgICBEdWFsUGlja2VyTW9kZVtEdWFsUGlja2VyTW9kZVtcIkhpZGRlblwiXSA9IDJdID0gXCJIaWRkZW5cIjtcclxuXHR9KShleHBvcnRzLkR1YWxQaWNrZXJNb2RlIHx8IChleHBvcnRzLkR1YWxQaWNrZXJNb2RlID0ge30pKTtcclxuXHR2YXIgRHVhbFBpY2tlck1vZGUgPSBleHBvcnRzLkR1YWxQaWNrZXJNb2RlO1xyXG5cdHZhciBEdWFsUGlja2VyQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gRHVhbFBpY2tlckNvbXBvbmVudCgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICAvL0VudW0gZGVmaW5pdGlvbnMgZm9yIGFjY2VzcyBpbiB2aWV3XHJcblx0ICAgICAgICB0aGlzLkNhbGVuZGFyTW9kZSA9IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGU7XHJcblx0ICAgICAgICB0aGlzLkR1YWxQaWNrZXJNb2RlID0gRHVhbFBpY2tlck1vZGU7XHJcblx0ICAgICAgICAvKiogRW1pdHRlciBmb3IgY2hhbmdlIChmcm9tKSovXHJcblx0ICAgICAgICB0aGlzLmRhdGVGcm9tQ2hhbmdlID0gbmV3IGNvcmVfMS5FdmVudEVtaXR0ZXIoKTtcclxuXHQgICAgICAgIC8qKiBFbWl0dGVyIGZvciBjaGFuZ2UgKHRvKSAqL1xyXG5cdCAgICAgICAgdGhpcy5kYXRlVG9DaGFuZ2UgPSBuZXcgY29yZV8xLkV2ZW50RW1pdHRlcigpO1xyXG5cdCAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdCAgICAgICAgLyoqIE1vZGUgKi9cclxuXHQgICAgICAgIHRoaXMubW9kZSA9IER1YWxQaWNrZXJNb2RlLkhpZGRlbjtcclxuXHQgICAgICAgIHRoaXMubW9udGgxQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgX3RoaXMuc2hpZnRDYWwyKCk7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCBfdGhpcy5jYWwxKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIF90aGlzLmNhbDIpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMubW9udGgyQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgX3RoaXMuc2hpZnRDYWwxKCk7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCBfdGhpcy5jYWwxKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIF90aGlzLmNhbDIpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMueWVhcjFDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBfdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5jaGFuZ2VNb2RlKGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIsIF90aGlzLmNhbDEpO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmNoYW5nZU1vZGUoY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhciwgX3RoaXMuY2FsMik7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgdGhpcy55ZWFyMkNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIF90aGlzLnNoaWZ0Q2FsMSgpO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmNoYW5nZU1vZGUoY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhciwgX3RoaXMuY2FsMSk7XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCBfdGhpcy5jYWwyKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLmRhdGVDbGlja0xpc3RlbmVyID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuXHQgICAgICAgICAgICB2YXIgZCA9IG1vbWVudChkYXRlKTtcclxuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5zZXREYXRlKGQpO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICB9XHJcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlRnJvbVwiLCB7XHJcblx0ICAgICAgICAvKiogSW5wdXQgZGVmaW5pdGlvbiBmb3IgKGZyb20pICovXHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbVZhbHVlO1xyXG5cdCAgICAgICAgfSxcclxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuZGF0ZUZyb21TdHJpbmcgPSB2YWwuZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tVmFsdWUgPSB2YWw7XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlRnJvbUNoYW5nZS5lbWl0KHZhbCk7XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVUb1wiLCB7XHJcblx0ICAgICAgICAvKiogSW5wdXQgZGVmaW5pdGlvbiBmb3IgKHRvKSAqL1xyXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVRvVmFsdWU7XHJcblx0ICAgICAgICB9LFxyXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5kYXRlVG9TdHJpbmcgPSB2YWwuZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVUb1ZhbHVlID0gdmFsO1xyXG5cdCAgICAgICAgICAgIHRoaXMuZGF0ZVRvQ2hhbmdlLmVtaXQodmFsKTtcclxuXHQgICAgICAgIH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICAvKipcclxuXHQgICAgICogQ2hhbmdlcyB0aGUgZ2xvYmFsIG1vZGUgb2YgdGhlIHBpY2tlciAobm90IHRoZSBtb2RlIG9mIHRoZSBjYWxlbmRhcilcclxuXHQgICAgICovXHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZUdsb2JhbE1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xyXG5cdCAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuXHQgICAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcblx0ICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5UbzpcclxuXHQgICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLkZyb206XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTW9kZShjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1vZGUoY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwyKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uRGF0ZUZyb21TdHJpbmdDaGFuZ2UgPSBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICB0aGlzLmRhdGVGcm9tU3RyaW5nID0gdmFsO1xyXG5cdCAgICAgICAgdmFyIG0gPSBtb21lbnQobmV3IERhdGUodmFsKSk7XHJcblx0ICAgICAgICBpZiAobS5pc1ZhbGlkKCkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tVmFsdWUuc2V0KG0udG9PYmplY3QoKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5jb3JyZWN0RGF0ZVRvKCk7XHJcblx0ICAgICAgICAgICAgdGhpcy5jYWwxLmRhdGUgPSB0aGlzLmRhdGVGcm9tVmFsdWU7XHJcblx0ICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tQ2hhbmdlLmVtaXQodGhpcy5kYXRlRnJvbVZhbHVlKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uRGF0ZVRvU3RyaW5nQ2hhbmdlID0gZnVuY3Rpb24gKHZhbCkge1xyXG5cdCAgICAgICAgdGhpcy5kYXRlVG9TdHJpbmcgPSB2YWw7XHJcblx0ICAgICAgICB2YXIgbSA9IG1vbWVudChuZXcgRGF0ZSh2YWwpKTtcclxuXHQgICAgICAgIGlmIChtLmlzVmFsaWQoKSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuZGF0ZVRvVmFsdWUuc2V0KG0udG9PYmplY3QoKSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5jb3JyZWN0RGF0ZUZyb20oKTtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDIuZGF0ZSA9IHRoaXMuZGF0ZVRvVmFsdWU7XHJcblx0ICAgICAgICAgICAgdGhpcy5zaGlmdENhbDEoKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVUb0NoYW5nZS5lbWl0KHRoaXMuZGF0ZVRvVmFsdWUpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuc2hpZnRDYWwxID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5jYWwxLmRhdGUgPSBtb21lbnQodGhpcy5jYWwyLmRhdGUpO1xyXG5cdCAgICAgICAgdGhpcy5jYWwxLmRhdGUuc3VidHJhY3QoeyBcIm1vbnRoXCI6IDEgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnNoaWZ0Q2FsMiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsMi5kYXRlID0gbW9tZW50KHRoaXMuY2FsMS5kYXRlKTtcclxuXHQgICAgICAgIHRoaXMuY2FsMi5kYXRlLmFkZCh7IFwibW9udGhcIjogMSB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgaWYgKChldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlKSA9PSA5KSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkhpZGRlbik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZU1vZGUgPSBmdW5jdGlvbiAobW9kZSwgY2FsKSB7XHJcblx0ICAgICAgICBjYWwuY2hhbmdlTW9kZShtb2RlKTtcclxuXHQgICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG5cdCAgICAgICAgICAgIGNhc2UgY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhcjpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG5cdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuZ29QcmV2ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMuY2FsMS5tb2RlID09IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIgJiYgdGhpcy5jYWwyLm1vZGUgPT0gY2FsZW5kYXJfbW9kZV8xLkNhbGVuZGFyTW9kZS5DYWxlbmRhcikge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsMS5kYXRlLm1vbnRoKHRoaXMuY2FsMS5kYXRlLm1vbnRoKCkgLSAxKTtcclxuXHQgICAgICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHRoaXMuY2FsMS5nb1ByZXYoKTtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDIuZ29QcmV2KCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLmdvTmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLmNhbDEubW9kZSA9PSBjYWxlbmRhcl9tb2RlXzEuQ2FsZW5kYXJNb2RlLkNhbGVuZGFyICYmIHRoaXMuY2FsMi5tb2RlID09IGNhbGVuZGFyX21vZGVfMS5DYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDEuZGF0ZS5tb250aCh0aGlzLmNhbDEuZGF0ZS5tb250aCgpICsgMSk7XHJcblx0ICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmNhbDEuZ29OZXh0KCk7XHJcblx0ICAgICAgICAgICAgdGhpcy5jYWwyLmdvTmV4dCgpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5kYXRlID0gbW9tZW50KHRoaXMuZGF0ZUZyb20pO1xyXG5cdCAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuXHQgICAgICAgIHRoaXMuY2FsMS5zdWJzY3JpYmVUb0NoYW5nZU1vbnRoKHRoaXMubW9udGgxQ2hhbmdlTGlzdGVuZXIpO1xyXG5cdCAgICAgICAgdGhpcy5jYWwyLnN1YnNjcmliZVRvQ2hhbmdlTW9udGgodGhpcy5tb250aDJDaGFuZ2VMaXN0ZW5lcik7XHJcblx0ICAgICAgICB0aGlzLmNhbDEuc3Vic2NyaWJlVG9DaGFuZ2VZZWFyKHRoaXMueWVhcjFDaGFuZ2VMaXN0ZW5lcik7XHJcblx0ICAgICAgICB0aGlzLmNhbDIuc3Vic2NyaWJlVG9DaGFuZ2VZZWFyKHRoaXMueWVhcjJDaGFuZ2VMaXN0ZW5lcik7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckNhbGVuZGFyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5jYWwxLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZVRvLCB0aGlzLmRhdGVGcm9tKTtcclxuXHQgICAgICAgIHRoaXMuY2FsMi5yZW5kZXJDYWxlbmRhcih0aGlzLmRhdGVDbGlja0xpc3RlbmVyLCB0aGlzLmRhdGVUbywgdGhpcy5kYXRlRnJvbSk7XHJcblx0ICAgIH07XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLnNldERhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG5cdCAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuXHQgICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLkZyb206XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUZyb20gPSBkYXRlO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVGcm9tU3RyaW5nID0gZGF0ZS5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlVG8oKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLlRvKTtcclxuXHQgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0ICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5UbzpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG8gPSBkYXRlO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGVUb1N0cmluZyA9IGRhdGUuZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jb3JyZWN0RGF0ZUZyb20oKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkhpZGRlbik7XHJcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5jb3JyZWN0RGF0ZVRvID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMuZGF0ZVRvICYmIHRoaXMuZGF0ZUZyb20uaXNBZnRlcih0aGlzLmRhdGVUbykpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVUbyA9IG1vbWVudCh0aGlzLmRhdGVGcm9tKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVUby5hZGQoeyBcImRheVwiOiAxIH0pO1xyXG5cdCAgICAgICAgICAgIHRoaXMuZGF0ZVRvU3RyaW5nID0gdGhpcy5kYXRlVG8uZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUuY29ycmVjdERhdGVGcm9tID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMuZGF0ZUZyb20gJiYgdGhpcy5kYXRlVG8uaXNCZWZvcmUodGhpcy5kYXRlRnJvbSkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tID0gbW9tZW50KHRoaXMuZGF0ZVRvKTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tLnN1YnRyYWN0KHsgXCJkYXlcIjogMSB9KTtcclxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGcm9tU3RyaW5nID0gdGhpcy5kYXRlRnJvbS5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5PdXRwdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZUZyb21DaGFuZ2VcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuT3V0cHV0KCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVUb0NoYW5nZVwiLCB2b2lkIDApO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbnB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlRnJvbVwiLCBudWxsKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5wdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVRvXCIsIG51bGwpO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbnB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgQm9vbGVhbilcclxuXHQgICAgXSwgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5wdXQoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcclxuXHQgICAgXSwgRHVhbFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5wdXRDbGFzc1wiLCB2b2lkIDApO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5WaWV3Q2hpbGQoJ2NhbDEnLCBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCAodHlwZW9mIChfYSA9IHR5cGVvZiBjYWxlbmRhcl9jb21wb25lbnRfMS5DYWxlbmRhckNvbXBvbmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQpID09PSAnZnVuY3Rpb24nICYmIF9hKSB8fCBPYmplY3QpXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNhbDFcIiwgdm9pZCAwKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuVmlld0NoaWxkKCdjYWwyJywgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgKHR5cGVvZiAoX2IgPSB0eXBlb2YgY2FsZW5kYXJfY29tcG9uZW50XzEuQ2FsZW5kYXJDb21wb25lbnQgIT09ICd1bmRlZmluZWQnICYmIGNhbGVuZGFyX2NvbXBvbmVudF8xLkNhbGVuZGFyQ29tcG9uZW50KSA9PT0gJ2Z1bmN0aW9uJyAmJiBfYikgfHwgT2JqZWN0KVxyXG5cdCAgICBdLCBEdWFsUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjYWwyXCIsIHZvaWQgMCk7XHJcblx0ICAgIER1YWxQaWNrZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnY3QtZHVhbHBpY2tlcicsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oMTgpLFxyXG5cdCAgICAgICAgICAgIHN0eWxlczogW19fd2VicGFja19yZXF1aXJlX18oMTkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KV0sXHJcblx0ICAgICAgICAgICAgZW5jYXBzdWxhdGlvbjogY29yZV8xLlZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXHJcblx0ICAgIF0sIER1YWxQaWNrZXJDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gRHVhbFBpY2tlckNvbXBvbmVudDtcclxuXHQgICAgdmFyIF9hLCBfYjtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuRHVhbFBpY2tlckNvbXBvbmVudCA9IER1YWxQaWNrZXJDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjdC1kcFxcXCIgW25nQ2xhc3NdPVxcXCJ7J2N0LWRwLWZyb20tZm9jdXMnOiBtb2RlID09IER1YWxQaWNrZXJNb2RlLkZyb20sICdjdC1kcC10by1mb2N1cyc6IG1vZGUgPT0gRHVhbFBpY2tlck1vZGUuVG99XFxcIj5cXHJcXG4gICAgPGlucHV0IFxcclxcbiAgICAgICAgY2xhc3M9XFxcImN0LWRwLWlucHV0IGN0LWRwLWlucHV0LWZyb21cXFwiIFxcclxcbiAgICAgICAgdHlwZT1cXFwidGV4dFxcXCIgXFxyXFxuICAgICAgICAoZm9jdXMpPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkZyb20pXFxcIlxcclxcbiAgICAgICAgKGtleWRvd24pPVxcXCJibHVyKCRldmVudClcXFwiIFxcclxcbiAgICAgICAgW25nTW9kZWxdPVxcXCJkYXRlRnJvbVN0cmluZ1xcXCJcXHJcXG4gICAgICAgIFtuZ0NsYXNzXT1cXFwiaW5wdXRDbGFzc1xcXCJcXHJcXG4gICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cXFwib25EYXRlRnJvbVN0cmluZ0NoYW5nZSgkZXZlbnQpXFxcIlxcclxcbiAgICAgICAgW2Rpc2FibGVkXT1cXFwiZGlzYWJsZWRcXFwiXFxyXFxuICAgIC8+PCEtLVxcclxcbiAtLT48aW5wdXQgXFxyXFxuICAgICAgICBjbGFzcz1cXFwiY3QtZHAtaW5wdXQgY3QtZHAtaW5wdXQtdG9cXFwiIFxcclxcbiAgICAgICAgdHlwZT1cXFwidGV4dFxcXCIgXFxyXFxuICAgICAgICAoZm9jdXMpPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLlRvKVxcXCJcXHJcXG4gICAgICAgIChrZXlkb3duKT1cXFwiYmx1cigkZXZlbnQpXFxcIiAgICAgICAgICBcXHJcXG4gICAgICAgIFtuZ01vZGVsXT1cXFwiZGF0ZVRvU3RyaW5nXFxcIlxcclxcbiAgICAgICAgW25nQ2xhc3NdPVxcXCJpbnB1dENsYXNzXFxcIiAgICAgICAgXFxyXFxuICAgICAgICAobmdNb2RlbENoYW5nZSk9XFxcIm9uRGF0ZVRvU3RyaW5nQ2hhbmdlKCRldmVudClcXFwiXFxyXFxuICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCIgICAgICAgICAgICAgIFxcclxcbiAgICAvPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1zaGFkb3ctYm94XFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkhpZGRlbilcXFwiICpuZ0lmPVxcXCJtb2RlICE9IER1YWxQaWNrZXJNb2RlLkhpZGRlblxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1waWNrZXIgY3QtZHAtZHVhbHBpY2tlclxcXCIgW25nQ2xhc3NdPVxcXCJ7J2hpZGRlbic6IG1vZGUgPT0gRHVhbFBpY2tlck1vZGUuSGlkZGVufVxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXByZXYgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiZ29QcmV2KClcXFwiIFtkaXNhYmxlZF09XFxcImNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGggfHwgY2FsMi5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmx0OzwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW1vbnRoIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuTW9udGgsIGNhbDEpXFxcIj57e2NhbDEuZGF0ZS5mb3JtYXQoXFxcIk1NTU1cXFwiKX19PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4teWVhciAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5ZZWFyLCBjYWwxKVxcXCI+e3tjYWwxLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJwdWxsLXJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbW9udGggY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5Nb250aCwgY2FsMilcXFwiPnt7Y2FsMi5kYXRlLmZvcm1hdChcXFwiTU1NTVxcXCIpfX08L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4teWVhciAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5ZZWFyLCBjYWwyKVxcXCI+e3tjYWwyLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1uZXh0ICBjdC1kcC1idG5cXFwiIChjbGljayk9XFxcImdvTmV4dCgpXFxcIiBbZGlzYWJsZWRdPVxcXCJ0aGlzLmNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGggfHwgdGhpcy5jYWwyLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mZ3Q7PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8Y3QtY2FsZW5kYXIgI2NhbDE+PC9jdC1jYWxlbmRhcj5cXHJcXG4gICAgICAgIDxjdC1jYWxlbmRhciAjY2FsMj48L2N0LWNhbGVuZGFyPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cIjtcblxuLyoqKi8gfSxcbi8qIDE5ICovXG4xMVxuLyoqKioqKi8gXSkpKVxufSk7XG47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGN0bmcudW1kLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDJjOTY4ZDNlMzlkOWY2ODEzZTY5IiwiZXhwb3J0IHtEYXRlUGlja2VyTW9kdWxlfSBmcm9tICcuL2RhdGVwaWNrZXIubW9kdWxlJztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9saWIudHMiLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmltcG9ydCB7IERhdGVQaWNrZXJDb21wb25lbnQgfSBmcm9tICcuL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBEdWFsUGlja2VyQ29tcG9uZW50IH0gZnJvbSAnLi9kdWFscGlja2VyL2R1YWxwaWNrZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENhbGVuZGFyR3JpZENvbXBvbmVudCB9IGZyb20gJy4vY2FsZW5kYXItZ3JpZC9jYWxlbmRhci1ncmlkLmNvbXBvbmVudCc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGV4cG9ydHM6IFtEYXRlUGlja2VyQ29tcG9uZW50LCBEdWFsUGlja2VyQ29tcG9uZW50XSxcclxuICBkZWNsYXJhdGlvbnM6IFtEYXRlUGlja2VyQ29tcG9uZW50LCBEdWFsUGlja2VyQ29tcG9uZW50LCBDYWxlbmRhckNvbXBvbmVudCwgQ2FsZW5kYXJHcmlkQ29tcG9uZW50XSxcclxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBGb3Jtc01vZHVsZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJNb2R1bGUge1xyXG4gICAgXHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9kYXRlcGlja2VyLm1vZHVsZS50cyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAYW5ndWxhci9jb3JlXCJcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBhbmd1bGFyL2NvbW1vblwiXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAYW5ndWxhci9mb3Jtc1wiXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7IENvbXBvbmVudCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBFbGVtZW50UmVmLCBPbkluaXQsIFJlbmRlcmVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQsIFZpZXdDaGlsZCwgUXVlcnlMaXN0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuLi9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDYWxlbmRhck1vZGUgfSBmcm9tICcuLi9jb21tb24vY2FsZW5kYXItbW9kZSc7XHJcblxyXG5leHBvcnQgZW51bSBEYXRlUGlja2VyTW9kZSB7XHJcbiAgVmlzaWJsZSwgSGlkZGVuXHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnY3QtZGF0ZXBpY2tlcicsXHJcbiAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vZGF0ZXBpY2tlci5jb21wb25lbnQuaHRtbCcpLFxyXG4gIHN0eWxlczogW3JlcXVpcmUoJy4vZGF0ZXBpY2tlci5jb21wb25lbnQubGVzcycpLCByZXF1aXJlKCcuLi9jb21tb24vY29tbW9uLmxlc3MnKV0sXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0ZVBpY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgT25Jbml0IHtcclxuXHJcblxyXG4gIHB1YmxpYyBDYWxlbmRhck1vZGUgPSBDYWxlbmRhck1vZGU7XHJcbiAgcHVibGljIERhdGVQaWNrZXJNb2RlID0gRGF0ZVBpY2tlck1vZGU7XHJcblxyXG4gIEBPdXRwdXQoKSBkYXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIHByaXZhdGUgZGF0ZVZhbHVlOiBtb21lbnQuTW9tZW50O1xyXG4gIEBJbnB1dCgpXHJcbiAgZ2V0IGRhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRlVmFsdWU7XHJcbiAgfVxyXG4gIHNldCBkYXRlKHZhbCkge1xyXG4gICAgaWYgKHZhbCBpbnN0YW5jZW9mIG1vbWVudCAmJiB2YWwuaXNWYWxpZCgpKSB7XHJcbiAgICAgIHRoaXMuZGF0ZVN0cmluZyA9IHZhbC5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG4gICAgICB0aGlzLmRhdGVWYWx1ZSA9IHZhbDtcclxuICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodmFsKTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIGRhdGVTdHJpbmc6IHN0cmluZztcclxuXHJcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBpbnB1dENsYXNzOiBhbnk7XHJcbiAgXHJcbiAgQFZpZXdDaGlsZChDYWxlbmRhckNvbXBvbmVudCkgcHVibGljIGNhbDogQ2FsZW5kYXJDb21wb25lbnQ7XHJcbiAgcHVibGljIG1vZGU6IERhdGVQaWNrZXJNb2RlID0gRGF0ZVBpY2tlck1vZGUuSGlkZGVuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15RWxlbWVudDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIpIHtcclxuXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25EYXRlU3RyaW5nQ2hhbmdlKHZhbCkge1xyXG4gICAgdGhpcy5kYXRlU3RyaW5nID0gdmFsO1xyXG4gICAgbGV0IG0gPSBtb21lbnQobmV3IERhdGUodmFsKSk7XHJcbiAgICBpZiAobS5pc1ZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5kYXRlVmFsdWUuc2V0KG0udG9PYmplY3QoKSk7XHJcbiAgICAgIHRoaXMuY2FsLmRhdGUgPSB0aGlzLmRhdGVWYWx1ZTtcclxuICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodGhpcy5kYXRlVmFsdWUpO1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlR2xvYmFsTW9kZShtb2RlOiBEYXRlUGlja2VyTW9kZSkge1xyXG4gICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcbiAgICAgIGNhc2UgRGF0ZVBpY2tlck1vZGUuVmlzaWJsZTpcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBibHVyKGV2ZW50KSB7XHJcbiAgICBpZiAoKGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUpID09IDkpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLkhpZGRlbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlTW9kZShtb2RlOiBDYWxlbmRhck1vZGUpIHtcclxuICAgIHRoaXMuY2FsLmNoYW5nZU1vZGUobW9kZSk7XHJcbiAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgY2FzZSBDYWxlbmRhck1vZGUuQ2FsZW5kYXI6XHJcbiAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdvUHJldigpIHtcclxuICAgIGlmICh0aGlzLmNhbC5tb2RlID09IENhbGVuZGFyTW9kZS5DYWxlbmRhcikge1xyXG4gICAgICB0aGlzLmNhbC5kYXRlLm1vbnRoKHRoaXMuY2FsLmRhdGUubW9udGgoKSAtIDEpO1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNhbC5nb1ByZXYoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnb05leHQoKSB7XHJcbiAgICBpZiAodGhpcy5jYWwubW9kZSA9PSBDYWxlbmRhck1vZGUuQ2FsZW5kYXIpIHtcclxuICAgICAgdGhpcy5jYWwuZGF0ZS5tb250aCh0aGlzLmNhbC5kYXRlLm1vbnRoKCkgKyAxKTtcclxuICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jYWwuZ29OZXh0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGlmICh0aGlzLmRhdGUgaW5zdGFuY2VvZiBtb21lbnQgJiYgdGhpcy5kYXRlLmlzVmFsaWQoKSkge1xyXG4gICAgICB0aGlzLmNhbC5kYXRlID0gbW9tZW50KHRoaXMuZGF0ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNhbC5kYXRlID0gbW9tZW50KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNhbC5zdWJzY3JpYmVUb0NoYW5nZU1vbnRoKHRoaXMubW9udGhDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICB0aGlzLmNhbC5zdWJzY3JpYmVUb0NoYW5nZVllYXIodGhpcy55ZWFyQ2hhbmdlTGlzdGVuZXIpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FsZW5kYXIoKSB7XHJcbiAgICB0aGlzLmNhbC5yZW5kZXJDYWxlbmRhcih0aGlzLmRhdGVDbGlja0xpc3RlbmVyLCB0aGlzLmRhdGUsIHRoaXMuZGF0ZSk7XHJcbiAgfVxyXG5cclxuICBkYXRlQ2xpY2tMaXN0ZW5lciA9IChkYXRlOiBtb21lbnQuTW9tZW50KSA9PiB7XHJcbiAgICBsZXQgZCA9IG1vbWVudChkYXRlKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0RGF0ZShkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbW9udGhDaGFuZ2VMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB5ZWFyQ2hhbmdlTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKTtcclxuICB9XHJcblxyXG4gIHNldERhdGUoZGF0ZTogbW9tZW50Lk1vbWVudCkge1xyXG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcclxuICAgICAgY2FzZSBEYXRlUGlja2VyTW9kZS5WaXNpYmxlOlxyXG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKERhdGVQaWNrZXJNb2RlLkhpZGRlbik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2FuZ3VsYXIyLXRlbXBsYXRlLWxvYWRlciEuL3NyYy9kYXRlcGlja2VyL2RhdGVwaWNrZXIuY29tcG9uZW50LnRzIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIm1vbWVudFwiXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkRlc3Ryb3ksIEVsZW1lbnRSZWYsIFJlbmRlcmVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJNb2RlIH0gZnJvbSAnLi4vY29tbW9uL2NhbGVuZGFyLW1vZGUnO1xyXG5pbXBvcnQgeyBDYWxlbmRhckdyaWRDb21wb25lbnQgfSBmcm9tICcuLi9jYWxlbmRhci1ncmlkL2NhbGVuZGFyLWdyaWQuY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdjdC1jYWxlbmRhcicsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9jYWxlbmRhci5jb21wb25lbnQuaHRtbCcpLFxyXG4gICAgc3R5bGVzOiBbcmVxdWlyZSgnLi9jYWxlbmRhci5jb21wb25lbnQubGVzcycpXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG4gICAgLyoqIERldGVybWluZXMgaG93IG1hbnkgeWVhciBidXR0b25zIGFyZSBzaG93bi4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIG51bVllYXJzU2hvd24gPSA5O1xyXG4gICAgLyoqIGNvbnZlbmllbmNlIHZhcmlhYmxlIGZvciBnZW5lcmF0aW5nIHllYXJzICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBoYWxmTnVtWWVhcnNTaG93biA9IE1hdGguZmxvb3IoQ2FsZW5kYXJDb21wb25lbnQubnVtWWVhcnNTaG93biAvIDIpO1xyXG4gICAgLyoqIEFjY2Vzc29yIHRvIHRoZSBtb2RlIGZvciBodG1sICovXHJcbiAgICBwdWJsaWMgQ2FsZW5kYXJNb2RlID0gQ2FsZW5kYXJNb2RlO1xyXG4gICAgcHVibGljIG1vZGU6IENhbGVuZGFyTW9kZSA9IENhbGVuZGFyTW9kZS5DYWxlbmRhcjtcclxuICAgIC8qKiBEYXRlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIG1vbnRoL3llYXIgc2hvd24gb24gdGhpcyBjYWxlbmRhciAqL1xyXG4gICAgcHVibGljIGRhdGU6IG1vbWVudC5Nb21lbnQ7XHJcbiAgICAvKiogQXJyYXkgb2YgbW9udGhzIHRvIHNob3cgd2hlbiBzZWxlY3RpbmcgYSBuZXcgbW9udGggKi9cclxuICAgIHByaXZhdGUgbW9udGhzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgLyoqIEFycmF5IG9mIHllYXJzIHRvIHNob3cgd2hlbiBzZWxlY3RpbmcgYSBuZXcgeWVhciAqL1xyXG4gICAgcHJpdmF0ZSB5ZWFyczogbnVtYmVyW10gPSBbXTtcclxuICAgIGdldCB5ZWFyRGF0YSgpOiBudW1iZXJbXSB7cmV0dXJuIHRoaXMueWVhcnN9O1xyXG4gICAgLyoqIExpc3RlbmVycyBmb3IgbW9udGggY2hhbmdlICovXHJcbiAgICBwcml2YXRlIG1vbnRoTGlzdGVuZXJzOiBGdW5jdGlvbltdID0gW107XHJcbiAgICAvKiogTGlzdGVuZXJzIGZvciB5ZWFyIGNoYW5nZSAqL1xyXG4gICAgcHJpdmF0ZSB5ZWFyTGlzdGVuZXJzOiBGdW5jdGlvbltdID0gW107XHJcbiAgICAvKiogR3JpZCB2aWV3IGNoaWxkIGNvbXBvbmVudCAoYWN0dWFsbHkgc2hvd3MgdGhlIG51bWJlciBncmlkKSAqL1xyXG4gICAgQFZpZXdDaGlsZChDYWxlbmRhckdyaWRDb21wb25lbnQpIHB1YmxpYyBncmlkOiBDYWxlbmRhckdyaWRDb21wb25lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRoRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkgeyB9XHJcbiAgICBuZ09uRGVzdHJveSgpIHsgfVxyXG5cclxuICAgIHN1YnNjcmliZVRvQ2hhbmdlTW9udGgobGlzdGVuZXI6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5tb250aExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVUb0NoYW5nZVllYXIobGlzdGVuZXI6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy55ZWFyTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZU1vZGUobW9kZTogQ2FsZW5kYXJNb2RlKSB7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDYWxlbmRhck1vZGUuWWVhcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFyRGF0YSh0aGlzLmRhdGUueWVhcigpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlTW9udGhEYXRhKCkge1xyXG4gICAgICAgIGxldCBkYXRlID0gbW9tZW50KG5ldyBEYXRlKCkpOyAvL2RvZXNuJ3QgY2hhbmdlXHJcbiAgICAgICAgZGF0ZS5tb250aCgwKTtcclxuICAgICAgICBsZXQgZCA9IG1vbWVudChuZXcgRGF0ZSgpKTtcclxuICAgICAgICBkLm1vbnRoKDApO1xyXG4gICAgICAgIHdoaWxlIChkYXRlLnllYXIoKSA9PT0gZC55ZWFyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5tb250aHMucHVzaChkLmZvcm1hdChcIk1NTVwiKSk7XHJcbiAgICAgICAgICAgIGQubW9udGgoZC5tb250aCgpICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVZZWFyRGF0YSh5ZWFyOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnllYXJzID0gW107XHJcbiAgICAgICAgbGV0IHkgPSB5ZWFyIC0gQ2FsZW5kYXJDb21wb25lbnQuaGFsZk51bVllYXJzU2hvd247XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy55ZWFycy5wdXNoKHkgKyBpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ29QcmV2KCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLkNhbGVuZGFyOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLk1vbnRoOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLlllYXI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhckRhdGEodGhpcy55ZWFyc1tDYWxlbmRhckNvbXBvbmVudC5oYWxmTnVtWWVhcnNTaG93bl0gLSBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ29OZXh0KCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLkNhbGVuZGFyOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLk1vbnRoOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FsZW5kYXJNb2RlLlllYXI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhckRhdGEodGhpcy55ZWFyc1tDYWxlbmRhckNvbXBvbmVudC5oYWxmTnVtWWVhcnNTaG93bl0gKyBDYWxlbmRhckNvbXBvbmVudC5udW1ZZWFyc1Nob3duKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyQ2FsZW5kYXIoY2xpY2tDYWxsYmFjazogRnVuY3Rpb24sIGRhdGVUbzogbW9tZW50Lk1vbWVudCwgZGF0ZUZyb206IG1vbWVudC5Nb21lbnQpIHtcclxuICAgICAgICB0aGlzLmdyaWQucmVuZGVyQ2FsZW5kYXIodGhpcy5kYXRlLCBjbGlja0NhbGxiYWNrLCBkYXRlVG8sIGRhdGVGcm9tKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRNb250aChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRlLm1vbnRoKGluZGV4KTtcclxuICAgICAgICBmb3IgKGxldCBmbiBvZiB0aGlzLm1vbnRoTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFllYXIoeWVhcjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRlLnllYXIoeWVhcik7XHJcbiAgICAgICAgZm9yIChsZXQgZm4gb2YgdGhpcy55ZWFyTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vYW5ndWxhcjItdGVtcGxhdGUtbG9hZGVyIS4vc3JjL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudC50cyIsImV4cG9ydCBlbnVtIENhbGVuZGFyTW9kZSB7XHJcbiAgICBDYWxlbmRhciwgTW9udGgsIFllYXJcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vYW5ndWxhcjItdGVtcGxhdGUtbG9hZGVyIS4vc3JjL2NvbW1vbi9jYWxlbmRhci1tb2RlLnRzIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uRGVzdHJveSwgRWxlbWVudFJlZiwgUmVuZGVyZXIsIFZpZXdFbmNhcHN1bGF0aW9uLCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuLi9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgKiBhcyAkIGZyb20gJ2pxdWVyeSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnY3QtY2FsZW5kYXItZ3JpZCcsXHJcbiAgICB0ZW1wbGF0ZTogJycsXHJcbiAgICBzdHlsZXM6IFtyZXF1aXJlKCcuL2NhbGVuZGFyLWdyaWQuY29tcG9uZW50Lmxlc3MnKV0sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDYWxlbmRhckdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15RWxlbWVudDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyBhIGNhbGVuZGFyIGJhc2VkIG9uIHRoZSBkYXRlLCBzZWxlY3RpbmcgdGhlIHByb3BlciBmcm9tL3RvIGlmIHZpc2libGUuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckNhbGVuZGFyKGRhdGU6IG1vbWVudC5Nb21lbnQsIGNsaWNrQ2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRlVG86IG1vbWVudC5Nb21lbnQsIGRhdGVGcm9tOiBtb21lbnQuTW9tZW50KSB7XHJcbiAgICAgICAgbGV0IGQgPSBtb21lbnQoZGF0ZSk7XHJcbiAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXIgPSAkKFwiPGRpdiBjbGFzcz0nY3QtZHAtY2FsLWhlYWRlcic+PC9kaXY+XCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGQuZGF5KGkpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGVsID0gJChcIjxkaXY+PC9kaXY+XCIpO1xyXG4gICAgICAgICAgICBlbC50ZXh0KGQuZm9ybWF0KFwiZGRcIikpO1xyXG4gICAgICAgICAgICBlbC5hdHRyKFwiY3QtY2FsLWRwLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImN0LWRwLWNhbC1kYXlcIik7IFxyXG5cclxuICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkLmRhdGUoMSk7IC8vcmVzZXQgZGF0ZS5cclxuICAgICAgICBcclxuICAgICAgICBsZXQgYm9keSA9ICQoXCI8ZGl2IGNsYXNzPSdjdC1kcC1jYWwtYm9keSc+PC9kaXY+XCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5kYXkoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBlbCA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcclxuXHJcbiAgICAgICAgICAgIGVsLmF0dHIoXCJjdC1kcC1jYWwtZGF5XCIsIGkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiY3QtZHAtY2FsLWRheVwiKTtcclxuXHJcbiAgICAgICAgICAgIGJvZHkuYXBwZW5kKGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdoaWxlIChkLm1vbnRoKCkgPT09IGRhdGUubW9udGgoKSkge1xyXG4gICAgICAgICAgICBsZXQgZWwgPSAkKFwiPGJ1dHRvbj48L2J1dHRvbj5cIik7XHJcbiAgICAgICAgICAgIGVsLnRleHQoKGQuZGF0ZSgpKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICBlbC5hdHRyKFwiY3QtZHAtY2FsLWRheVwiLCBkLmRhdGUoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZWwuYXR0cihcInRhYkluZGV4XCIsIFwiLTFcIik7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiY3QtZHAtY2FsLWRheVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoZGF0ZVRvICYmIGQuaXNTYW1lKGRhdGVUbywgXCJkYXlcIikpIHx8IChkYXRlRnJvbSAmJiBkLmlzU2FtZShkYXRlRnJvbSwgXCJkYXlcIikpKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0ZUZyb20gJiYgZGF0ZVRvICYmIGQuaXNCZXR3ZWVuKGRhdGVGcm9tLCBkYXRlVG8pKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRDbGFzcyhcImJldHdlZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwuY2xpY2soY2xpY2tDYWxsYmFjayhkKSk7XHJcbiAgICAgICAgICAgIGQuZGF0ZShkLmRhdGUoKSArIDEpO1xyXG5cclxuICAgICAgICAgICAgYm9keS5hcHBlbmQoZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmVtcHR5KCk7XHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZFRvKHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIGJvZHkuYXBwZW5kVG8odGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXByZWNhdGVkIHVudGlsIHN1cHBvcnQgb2YgcmVuZGVyZXIgaXMgbW9yZSBzdGFibGUuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckNhbGVuZGFyUmVuZGVyZXIoY2FsOiBDYWxlbmRhckNvbXBvbmVudCwgY2xpY2tDYWxsYmFjazogRnVuY3Rpb24sIGRhdGVUbzogbW9tZW50Lk1vbWVudCwgZGF0ZUZyb206IG1vbWVudC5Nb21lbnQpIHtcclxuICAgICAgICBsZXQgZCA9IG1vbWVudChjYWwuZGF0ZSk7XHJcbiAgICAgICAgZC5kYXRlKDEpOyAvL3Jlc2V0IGRhdGUuXHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2VsZWN0Um9vdEVsZW1lbnQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlYWRlckVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQodGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoaGVhZGVyRWxlbWVudCwgXCIuY3QtZHAtY2FsLWhlYWRlclwiLCB0cnVlKTtcclxuICAgICAgICBjb25zdCBjYWxFbGVtZW50ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KHRoaXMubXlFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGhlYWRlckVsZW1lbnQsIFwiLmN0LWRwLWNhbC1ib2R5XCIsIHRydWUpO1xyXG5cclxuICAgICAgICAvL0FkZCBuYW1lIGZvciBkYXkgb2Ygd2Vla1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGQuZGF5KGkpO1xyXG4gICAgICAgICAgICBsZXQgZWw6IEVsZW1lbnRSZWYgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoaGVhZGVyRWxlbWVudCwgXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0VGV4dChlbCwgZC5mb3JtYXQoXCJkZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgXCJjdC1jYWwtZHAtZGF5XCIsIGkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGVsLCBcImN0LWRwLWNhbC1kYXlcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkLmRhdGUoMSk7IC8vcmVzZXQgZGF0ZS5cclxuXHJcbiAgICAgICAgLy9BZGQgYmxhbmsgZmlsbGVyIGRheXMuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkLmRheSgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGVsOiBFbGVtZW50UmVmID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KGNhbEVsZW1lbnQsIFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIFwiY3QtZHAtY2FsLWRheVwiLCBpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9BZGQgY2FsZW5kYXJcclxuICAgICAgICB3aGlsZSAoZC5tb250aCgpID09PSBjYWwuZGF0ZS5tb250aCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgZWw6IEVsZW1lbnRSZWYgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoY2FsRWxlbWVudCwgXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0VGV4dChlbCwgKGQuZGF0ZSgpKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50QXR0cmlidXRlKGVsLCBcImN0LWRwLWNhbC1kYXlcIiwgZC5kYXRlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEVsZW1lbnRDbGFzcyhlbCwgXCJjdC1kcC1jYWwtZGF5XCIsIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoKGRhdGVUbyAmJiBkLmlzU2FtZShkYXRlVG8sIFwiZGF5XCIpKSB8fCAoZGF0ZUZyb20gJiYgZC5pc1NhbWUoZGF0ZUZyb20sIFwiZGF5XCIpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRFbGVtZW50Q2xhc3MoZWwsIFwiYWN0aXZlXCIsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRlRnJvbSAmJiBkYXRlVG8gJiYgZC5pc0JldHdlZW4oZGF0ZUZyb20sIGRhdGVUbykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RWxlbWVudENsYXNzKGVsLCBcImJldHdlZW5cIiwgdHJ1ZSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKGVsLCBcImNsaWNrXCIsIGNsaWNrQ2FsbGJhY2soZCkpO1xyXG4gICAgICAgICAgICBkLmRhdGUoZC5kYXRlKCkgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9hbmd1bGFyMi10ZW1wbGF0ZS1sb2FkZXIhLi9zcmMvY2FsZW5kYXItZ3JpZC9jYWxlbmRhci1ncmlkLmNvbXBvbmVudC50cyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwianF1ZXJ5XCJcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCJcIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NhbGVuZGFyLWdyaWQvY2FsZW5kYXItZ3JpZC5jb21wb25lbnQubGVzc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImN0LWRwLWNhbFxcXCIgW25nQ2xhc3NdPVxcXCJ7J2hpZGRlbic6IG1vZGUgIT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyfVxcXCI+XFxyXFxuICAgIDxjdC1jYWxlbmRhci1ncmlkPjwvY3QtY2FsZW5kYXItZ3JpZD5cXHJcXG48L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjdC1kcC1tb250aHNcXFwiIFtuZ0NsYXNzXT1cXFwieydoaWRkZW4nOiBtb2RlICE9IENhbGVuZGFyTW9kZS5Nb250aH1cXFwiPlxcclxcbiAgICA8dGVtcGxhdGUgbmdGb3IgbGV0LWl0ZW0gW25nRm9yT2ZdPVxcXCJtb250aHNcXFwiIFtuZ0ZvclRyYWNrQnldPVxcXCJteVRyYWNrQnlcXFwiIGxldC1pPVxcXCJpbmRleFxcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBjdC1kcC1tb250aFxcXCIgKGNsaWNrKT1cXFwic2V0TW9udGgoaSlcXFwiPnt7aXRlbX19PC9idXR0b24+XFxyXFxuICAgIDwvdGVtcGxhdGU+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBjbGFzcz1cXFwiY3QtZHAteWVhcnNcXFwiIFtuZ0NsYXNzXT1cXFwieydoaWRkZW4nOiBtb2RlICE9IENhbGVuZGFyTW9kZS5ZZWFyfVxcXCI+XFxyXFxuICAgIDx0ZW1wbGF0ZSBuZ0ZvciBsZXQtaXRlbSBbbmdGb3JPZl09XFxcInllYXJzXFxcIiBbbmdGb3JUcmFja0J5XT1cXFwibXlUcmFja0J5XFxcIiBsZXQtaT1cXFwiaW5kZXhcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgY3QtZHAteWVhclxcXCIgKGNsaWNrKT1cXFwic2V0WWVhcihpdGVtKVxcXCI+e3tpdGVtfX08L2J1dHRvbj5cXHJcXG4gICAgPC90ZW1wbGF0ZT5cXHJcXG48L2Rpdj5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQuaHRtbFxuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImN0LWRwXFxcIj5cXHJcXG4gICAgPGlucHV0IFxcclxcbiAgICAgICAgY2xhc3M9XFxcImN0LWRwLWlucHV0XFxcIiBcXHJcXG4gICAgICAgIHR5cGU9XFxcInRleHRcXFwiIFxcclxcbiAgICAgICAgKGZvY3VzKT1cXFwiY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5WaXNpYmxlKVxcXCJcXHJcXG4gICAgICAgIChrZXlkb3duKT1cXFwiYmx1cigkZXZlbnQpXFxcIiBcXHJcXG4gICAgICAgIFtuZ01vZGVsXT1cXFwiZGF0ZVN0cmluZ1xcXCJcXHJcXG4gICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cXFwib25EYXRlU3RyaW5nQ2hhbmdlKCRldmVudClcXFwiXFxyXFxuICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXHJcXG4gICAgICAgIFtuZ0NsYXNzXT1cXFwiaW5wdXRDbGFzc1xcXCJcXHJcXG4gICAgLz5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtc2hhZG93LWJveFxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlR2xvYmFsTW9kZShEYXRlUGlja2VyTW9kZS5IaWRkZW4pXFxcIiAqbmdJZj1cXFwibW9kZSAhPSBEYXRlUGlja2VyTW9kZS5IaWRkZW5cXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY3QtZHAtcGlja2VyXFxcIiBbbmdDbGFzc109XFxcInsnaGlkZGVuJzogbW9kZSA9PSBEYXRlUGlja2VyTW9kZS5IaWRkZW59XFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImN0LWRwLWhlYWRlclxcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tcHJldiAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJnb1ByZXYoKVxcXCIgW2Rpc2FibGVkXT1cXFwiY2FsLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mbHQ7PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbW9udGggY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5Nb250aClcXFwiPnt7Y2FsLmRhdGUuZm9ybWF0KFxcXCJNTU1NXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXllYXIgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuWWVhcilcXFwiPnt7Y2FsLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW5leHQgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiZ29OZXh0KClcXFwiIFtkaXNhYmxlZF09XFxcImNhbC5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmd0OzwvYnV0dG9uPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8Y3QtY2FsZW5kYXI+PC9jdC1jYWxlbmRhcj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmNvbXBvbmVudC5odG1sXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiLmN0LWRwe3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5jdC1kcC1pbnB1dHtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwMX0uY3QtZHAtZnJvbS1mb2N1cyAuY3QtZHAtaW5wdXQuY3QtZHAtaW5wdXQtZnJvbXtiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0c2t5Ymx1ZX0uY3QtZHAtdG8tZm9jdXMgLmN0LWRwLWlucHV0LmN0LWRwLWlucHV0LXRve2JhY2tncm91bmQtY29sb3I6bGlnaHRza3libHVlfS5jdC1kcC1zaGFkb3ctYm94e3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7ei1pbmRleDoxMDB9LmN0LWRwLXBpY2tlcnt3aWR0aDoyMjBweDtib3JkZXItbGVmdDoxcHggc29saWQgI2JmYmZiZjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNiZmJmYmY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2JmYmZiZjtib3gtc2l6aW5nOmNvbnRlbnQtYm94O3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTAxO2JhY2tncm91bmQtY29sb3I6d2hpdGV9LmN0LWRwLXBpY2tlci5jdC1kcC1kdWFscGlja2Vye3dpZHRoOjQ0MHB4fS5jdC1kcC1oZWFkZXJ7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2JmYmZiZn0uY3QtZHAtY2Fse3BhZGRpbmc6NXB4O3dpZHRoOjIyMHB4O2Zsb2F0OmxlZnR9LmN0LWRwLWNhbC1oZWFkZXJ7Y29sb3I6I2JmYmZiZn0uY3QtZHAtY2FsLWRheXt3aWR0aDozMHB4O2hlaWdodDozMHB4O2Zsb2F0OmxlZnQ7dGV4dC1hbGlnbjpjZW50ZXJ9LmN0LWRwLWNhbC1kYXkuYWN0aXZle2JhY2tncm91bmQtY29sb3I6bGlnaHRibHVlfS5jdC1kcC1jYWwtZGF5LmJldHdlZW57YmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXl9LmN0LWRwLW1vbnRoc3t3aWR0aDoyMTBweDtmbG9hdDpsZWZ0fS5jdC1kcC1tb250aHt3aWR0aDo3MHB4O2Zsb2F0OmxlZnQ7dGV4dC1hbGlnbjpjZW50ZXJ9LmN0LWRwLXllYXJze3dpZHRoOjIxMHB4O2Zsb2F0OmxlZnR9LmN0LWRwLXllYXJ7d2lkdGg6NzBweDtmbG9hdDpsZWZ0O3RleHQtYWxpZ246Y2VudGVyfS5jdC1kcC1idG57bWFyZ2luLXJpZ2h0Oi0xcHg7Ym9yZGVyLXRvcDpub25lO2JvcmRlci1yaWdodDoxcHggc29saWQgI2JmYmZiZjtib3JkZXItYm90dG9tOm5vbmU7Ym9yZGVyLWxlZnQ6bm9uZTtwYWRkaW5nOjRweDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlfS5jdC1kcC1idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZDlkOWQ5fS5jdC1kcC1idG4tcHJldiwuY3QtZHAtYnRuLW5leHR7d2lkdGg6MzBweH0uY3QtZHAtYnRuLW1vbnRoe3dpZHRoOjEwMHB4O2ZvbnQtd2VpZ2h0OjUwMH0uY3QtZHAtYnRuLXllYXJ7d2lkdGg6NTBweDtmb250LXdlaWdodDo1MDB9LmNsZWFyZml4LC5jdC1kcC1jYWw6YWZ0ZXIsLmN0LWRwLW1vbnRoczphZnRlciwuY3QtZHAteWVhcnM6YWZ0ZXJ7dmlzaWJpbGl0eTpoaWRkZW47ZGlzcGxheTpibG9jaztmb250LXNpemU6MDtjb250ZW50OlxcXCIgXFxcIjtjbGVhcjpib3RoO2hlaWdodDowfS5uby1idXR0b24sLmN0LWRwLWNhbC1kYXl7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6bm9uZSAhaW1wb3J0YW50fVwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL2NvbW1vbi5sZXNzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBDb21wb25lbnQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgRWxlbWVudFJlZiwgT25Jbml0LCBSZW5kZXJlciwgVmlld0VuY2Fwc3VsYXRpb24sIElucHV0LCBWaWV3Q2hpbGQsIFF1ZXJ5TGlzdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IENhbGVuZGFyQ29tcG9uZW50IH0gZnJvbSAnLi4vY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ2FsZW5kYXJNb2RlIH0gZnJvbSAnLi4vY29tbW9uL2NhbGVuZGFyLW1vZGUnO1xyXG5cclxuLyoqIFxyXG4gKiBEZWZpbmVzIHRoZSBtb2RlIG9mIHRoZSBwaWNrZXJcclxuICovXHJcbmV4cG9ydCBlbnVtIER1YWxQaWNrZXJNb2RlIHtcclxuICAgIC8qKiBBbGxvd3Mgc2VsZWN0aW9uIG9mIHRoZSB0byBkYXRlLiAqL1xyXG4gICAgVG8sIFxyXG4gICAgLyoqIEFsbG93cyBzZWxlY3Rpb24gb2YgdGhlIGZyb20gZGF0ZS4gKi9cclxuICAgIEZyb20sIFxyXG4gICAgLyoqIE1ha2VzIHRoZSBwaWNrZXIgaGlkZGVuLCBkZWZhdWx0IHN0YXRlLiAqL1xyXG4gICAgSGlkZGVuXHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdjdC1kdWFscGlja2VyJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2R1YWxwaWNrZXIuY29tcG9uZW50Lmh0bWwnKSxcclxuICAgIHN0eWxlczogW3JlcXVpcmUoJy4vZHVhbHBpY2tlci5jb21wb25lbnQubGVzcycpLCByZXF1aXJlKCcuLi9jb21tb24vY29tbW9uLmxlc3MnKV0sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEdWFsUGlja2VyQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBPbkluaXQge1xyXG5cclxuICAgIC8vRW51bSBkZWZpbml0aW9ucyBmb3IgYWNjZXNzIGluIHZpZXdcclxuICAgIHB1YmxpYyBDYWxlbmRhck1vZGUgPSBDYWxlbmRhck1vZGU7XHJcbiAgICBwdWJsaWMgRHVhbFBpY2tlck1vZGUgPSBEdWFsUGlja2VyTW9kZTtcclxuXHJcbiAgICAvKiogRGF0ZSBmcm9tIChiaW5kaW5nIHZhbHVlKSAqL1xyXG4gICAgcHJpdmF0ZSBkYXRlRnJvbVZhbHVlOiBtb21lbnQuTW9tZW50O1xyXG4gICAgLyoqIERhdGUgdG8gKGJpbmRpbmcgdmFsdWUpICovXHJcbiAgICBwcml2YXRlIGRhdGVUb1ZhbHVlOiBtb21lbnQuTW9tZW50O1xyXG4gICAgLyoqIEVtaXR0ZXIgZm9yIGNoYW5nZSAoZnJvbSkqL1xyXG4gICAgQE91dHB1dCgpIGRhdGVGcm9tQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIEVtaXR0ZXIgZm9yIGNoYW5nZSAodG8pICovXHJcbiAgICBAT3V0cHV0KCkgZGF0ZVRvQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIElucHV0IGRlZmluaXRpb24gZm9yIChmcm9tKSAqL1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkYXRlRnJvbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbVZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IGRhdGVGcm9tKHZhbCkge1xyXG4gICAgICAgIHRoaXMuZGF0ZUZyb21TdHJpbmcgPSB2YWwuZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuICAgICAgICB0aGlzLmRhdGVGcm9tVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5kYXRlRnJvbUNoYW5nZS5lbWl0KHZhbCk7XHJcbiAgICB9XHJcbiAgICAvKiogSW5wdXQgZGVmaW5pdGlvbiBmb3IgKHRvKSAqL1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkYXRlVG8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVRvVmFsdWU7XHJcbiAgICB9XHJcbiAgICBzZXQgZGF0ZVRvKHZhbCkge1xyXG4gICAgICAgIHRoaXMuZGF0ZVRvU3RyaW5nID0gdmFsLmZvcm1hdChcIk1NL0REL1lZWVlcIik7XHJcbiAgICAgICAgdGhpcy5kYXRlVG9WYWx1ZSA9IHZhbDtcclxuICAgICAgICB0aGlzLmRhdGVUb0NoYW5nZS5lbWl0KHZhbCk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgaW5wdXRDbGFzczogYW55O1xyXG5cclxuICAgIC8qKiBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZnJvbSAqL1xyXG4gICAgcHVibGljIGRhdGVGcm9tU3RyaW5nOiBzdHJpbmc7XHJcbiAgICAvKiogU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRvICovXHJcbiAgICBwdWJsaWMgZGF0ZVRvU3RyaW5nOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIENhbDEgdmlldyBjaGlsZCBjb21wb25lbnQsIHVzZSB0byBjb250cm9sIHJlbmRlcmluZyAqL1xyXG4gICAgQFZpZXdDaGlsZCgnY2FsMScsIENhbGVuZGFyQ29tcG9uZW50KSBwdWJsaWMgY2FsMTogQ2FsZW5kYXJDb21wb25lbnQ7XHJcbiAgICAvKiogQ2FsMiB2aWV3IGNoaWxkIGNvbXBvbmVudCwgdXNlIHRvIGNvbnRyb2wgcmVuZGVyaW5nICovICAgIFxyXG4gICAgQFZpZXdDaGlsZCgnY2FsMicsIENhbGVuZGFyQ29tcG9uZW50KSBwdWJsaWMgY2FsMjogQ2FsZW5kYXJDb21wb25lbnQ7XHJcbiAgICAvKiogTW9kZSAqL1xyXG4gICAgcHVibGljIG1vZGU6IER1YWxQaWNrZXJNb2RlID0gRHVhbFBpY2tlck1vZGUuSGlkZGVuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZXMgdGhlIGdsb2JhbCBtb2RlIG9mIHRoZSBwaWNrZXIgKG5vdCB0aGUgbW9kZSBvZiB0aGUgY2FsZW5kYXIpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjaGFuZ2VHbG9iYWxNb2RlKG1vZGU6IER1YWxQaWNrZXJNb2RlKSB7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLlRvOlxyXG4gICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLkZyb206XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25EYXRlRnJvbVN0cmluZ0NoYW5nZSh2YWwpIHtcclxuICAgICAgICB0aGlzLmRhdGVGcm9tU3RyaW5nID0gdmFsO1xyXG4gICAgICAgIGxldCBtID0gbW9tZW50KG5ldyBEYXRlKHZhbCkpO1xyXG4gICAgICAgIGlmIChtLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVGcm9tVmFsdWUuc2V0KG0udG9PYmplY3QoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ycmVjdERhdGVUbygpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbDEuZGF0ZSA9IHRoaXMuZGF0ZUZyb21WYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRlRnJvbUNoYW5nZS5lbWl0KHRoaXMuZGF0ZUZyb21WYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRGF0ZVRvU3RyaW5nQ2hhbmdlKHZhbCkge1xyXG4gICAgICAgIHRoaXMuZGF0ZVRvU3RyaW5nID0gdmFsO1xyXG4gICAgICAgIGxldCBtID0gbW9tZW50KG5ldyBEYXRlKHZhbCkpO1xyXG4gICAgICAgIGlmIChtLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVUb1ZhbHVlLnNldChtLnRvT2JqZWN0KCkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlRnJvbSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbDIuZGF0ZSA9IHRoaXMuZGF0ZVRvVmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2hpZnRDYWwxKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvQ2hhbmdlLmVtaXQodGhpcy5kYXRlVG9WYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaGlmdENhbDEoKSB7XHJcbiAgICAgICAgdGhpcy5jYWwxLmRhdGUgPSBtb21lbnQodGhpcy5jYWwyLmRhdGUpO1xyXG4gICAgICAgIHRoaXMuY2FsMS5kYXRlLnN1YnRyYWN0KHsgXCJtb250aFwiOiAxIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hpZnRDYWwyKCkge1xyXG4gICAgICAgIHRoaXMuY2FsMi5kYXRlID0gbW9tZW50KHRoaXMuY2FsMS5kYXRlKTtcclxuICAgICAgICB0aGlzLmNhbDIuZGF0ZS5hZGQoeyBcIm1vbnRoXCI6IDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJsdXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAoKGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUpID09IDkpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkhpZGRlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjaGFuZ2VNb2RlKG1vZGU6IENhbGVuZGFyTW9kZSwgY2FsOiBDYWxlbmRhckNvbXBvbmVudCkge1xyXG4gICAgICAgIGNhbC5jaGFuZ2VNb2RlKG1vZGUpO1xyXG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIENhbGVuZGFyTW9kZS5DYWxlbmRhcjpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ29QcmV2KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuQ2FsZW5kYXIgJiYgdGhpcy5jYWwyLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsMS5kYXRlLm1vbnRoKHRoaXMuY2FsMS5kYXRlLm1vbnRoKCkgLSAxKTtcclxuICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsMS5nb1ByZXYoKTtcclxuICAgICAgICAgICAgdGhpcy5jYWwyLmdvUHJldigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ29OZXh0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuQ2FsZW5kYXIgJiYgdGhpcy5jYWwyLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLkNhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsMS5kYXRlLm1vbnRoKHRoaXMuY2FsMS5kYXRlLm1vbnRoKCkgKyAxKTtcclxuICAgICAgICAgICAgdGhpcy5zaGlmdENhbDIoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsMS5nb05leHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jYWwyLmdvTmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1vbnRoMUNoYW5nZUxpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2hpZnRDYWwyKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwxKTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbW9udGgyQ2hhbmdlTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zaGlmdENhbDEoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDEpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB5ZWFyMUNoYW5nZUxpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2hpZnRDYWwyKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwxKTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1vZGUoQ2FsZW5kYXJNb2RlLkNhbGVuZGFyLCB0aGlzLmNhbDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgeWVhcjJDaGFuZ2VMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNoaWZ0Q2FsMSgpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuQ2FsZW5kYXIsIHRoaXMuY2FsMSk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5DYWxlbmRhciwgdGhpcy5jYWwyKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLmNhbDEuZGF0ZSA9IG1vbWVudCh0aGlzLmRhdGVGcm9tKTtcclxuICAgICAgICB0aGlzLnNoaWZ0Q2FsMigpO1xyXG5cclxuICAgICAgICB0aGlzLmNhbDEuc3Vic2NyaWJlVG9DaGFuZ2VNb250aCh0aGlzLm1vbnRoMUNoYW5nZUxpc3RlbmVyKTtcclxuICAgICAgICB0aGlzLmNhbDIuc3Vic2NyaWJlVG9DaGFuZ2VNb250aCh0aGlzLm1vbnRoMkNoYW5nZUxpc3RlbmVyKTtcclxuICAgICAgICB0aGlzLmNhbDEuc3Vic2NyaWJlVG9DaGFuZ2VZZWFyKHRoaXMueWVhcjFDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgdGhpcy5jYWwyLnN1YnNjcmliZVRvQ2hhbmdlWWVhcih0aGlzLnllYXIyQ2hhbmdlTGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckNhbGVuZGFyKCkge1xyXG4gICAgICAgIHRoaXMuY2FsMS5yZW5kZXJDYWxlbmRhcih0aGlzLmRhdGVDbGlja0xpc3RlbmVyLCB0aGlzLmRhdGVUbywgdGhpcy5kYXRlRnJvbSk7XHJcbiAgICAgICAgdGhpcy5jYWwyLnJlbmRlckNhbGVuZGFyKHRoaXMuZGF0ZUNsaWNrTGlzdGVuZXIsIHRoaXMuZGF0ZVRvLCB0aGlzLmRhdGVGcm9tKTtcclxuICAgIH1cclxuXHJcbiAgICBkYXRlQ2xpY2tMaXN0ZW5lciA9IChkYXRlOiBtb21lbnQuTW9tZW50KSA9PiB7XHJcbiAgICAgICAgbGV0IGQgPSBtb21lbnQoZGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRlKGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlKGRhdGU6IG1vbWVudC5Nb21lbnQpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIER1YWxQaWNrZXJNb2RlLkZyb206XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUZyb21TdHJpbmcgPSBkYXRlLmZvcm1hdChcIk1NL0REL1lZWVlcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3REYXRlVG8oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEdWFsUGlja2VyTW9kZS5Ubyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEdWFsUGlja2VyTW9kZS5UbzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRvU3RyaW5nID0gZGF0ZS5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3JyZWN0RGF0ZUZyb20oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlR2xvYmFsTW9kZShEdWFsUGlja2VyTW9kZS5IaWRkZW4pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvcnJlY3REYXRlVG8oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVRvICYmIHRoaXMuZGF0ZUZyb20uaXNBZnRlcih0aGlzLmRhdGVUbykpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlVG8gPSBtb21lbnQodGhpcy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvLmFkZCh7IFwiZGF5XCI6IDEgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvU3RyaW5nID0gdGhpcy5kYXRlVG8uZm9ybWF0KFwiTU0vREQvWVlZWVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb3JyZWN0RGF0ZUZyb20oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZUZyb20gJiYgdGhpcy5kYXRlVG8uaXNCZWZvcmUodGhpcy5kYXRlRnJvbSkpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlRnJvbSA9IG1vbWVudCh0aGlzLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUZyb20uc3VidHJhY3QoeyBcImRheVwiOiAxIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVGcm9tU3RyaW5nID0gdGhpcy5kYXRlRnJvbS5mb3JtYXQoXCJNTS9ERC9ZWVlZXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9hbmd1bGFyMi10ZW1wbGF0ZS1sb2FkZXIhLi9zcmMvZHVhbHBpY2tlci9kdWFscGlja2VyLmNvbXBvbmVudC50cyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjdC1kcFxcXCIgW25nQ2xhc3NdPVxcXCJ7J2N0LWRwLWZyb20tZm9jdXMnOiBtb2RlID09IER1YWxQaWNrZXJNb2RlLkZyb20sICdjdC1kcC10by1mb2N1cyc6IG1vZGUgPT0gRHVhbFBpY2tlck1vZGUuVG99XFxcIj5cXHJcXG4gICAgPGlucHV0IFxcclxcbiAgICAgICAgY2xhc3M9XFxcImN0LWRwLWlucHV0IGN0LWRwLWlucHV0LWZyb21cXFwiIFxcclxcbiAgICAgICAgdHlwZT1cXFwidGV4dFxcXCIgXFxyXFxuICAgICAgICAoZm9jdXMpPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkZyb20pXFxcIlxcclxcbiAgICAgICAgKGtleWRvd24pPVxcXCJibHVyKCRldmVudClcXFwiIFxcclxcbiAgICAgICAgW25nTW9kZWxdPVxcXCJkYXRlRnJvbVN0cmluZ1xcXCJcXHJcXG4gICAgICAgIFtuZ0NsYXNzXT1cXFwiaW5wdXRDbGFzc1xcXCJcXHJcXG4gICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cXFwib25EYXRlRnJvbVN0cmluZ0NoYW5nZSgkZXZlbnQpXFxcIlxcclxcbiAgICAgICAgW2Rpc2FibGVkXT1cXFwiZGlzYWJsZWRcXFwiXFxyXFxuICAgIC8+PCEtLVxcclxcbiAtLT48aW5wdXQgXFxyXFxuICAgICAgICBjbGFzcz1cXFwiY3QtZHAtaW5wdXQgY3QtZHAtaW5wdXQtdG9cXFwiIFxcclxcbiAgICAgICAgdHlwZT1cXFwidGV4dFxcXCIgXFxyXFxuICAgICAgICAoZm9jdXMpPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLlRvKVxcXCJcXHJcXG4gICAgICAgIChrZXlkb3duKT1cXFwiYmx1cigkZXZlbnQpXFxcIiAgICAgICAgICBcXHJcXG4gICAgICAgIFtuZ01vZGVsXT1cXFwiZGF0ZVRvU3RyaW5nXFxcIlxcclxcbiAgICAgICAgW25nQ2xhc3NdPVxcXCJpbnB1dENsYXNzXFxcIiAgICAgICAgXFxyXFxuICAgICAgICAobmdNb2RlbENoYW5nZSk9XFxcIm9uRGF0ZVRvU3RyaW5nQ2hhbmdlKCRldmVudClcXFwiXFxyXFxuICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCIgICAgICAgICAgICAgIFxcclxcbiAgICAvPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1zaGFkb3ctYm94XFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VHbG9iYWxNb2RlKER1YWxQaWNrZXJNb2RlLkhpZGRlbilcXFwiICpuZ0lmPVxcXCJtb2RlICE9IER1YWxQaWNrZXJNb2RlLkhpZGRlblxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1waWNrZXIgY3QtZHAtZHVhbHBpY2tlclxcXCIgW25nQ2xhc3NdPVxcXCJ7J2hpZGRlbic6IG1vZGUgPT0gRHVhbFBpY2tlck1vZGUuSGlkZGVufVxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjdC1kcC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLXByZXYgIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiZ29QcmV2KClcXFwiIFtkaXNhYmxlZF09XFxcImNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGggfHwgY2FsMi5tb2RlID09IENhbGVuZGFyTW9kZS5Nb250aFxcXCI+Jmx0OzwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gdGFiaW5kZXg9XFxcIi0xXFxcIiBjbGFzcz1cXFwiY3QtZHAtYnRuLW1vbnRoIGN0LWRwLWJ0blxcXCIgKGNsaWNrKT1cXFwiY2hhbmdlTW9kZShDYWxlbmRhck1vZGUuTW9udGgsIGNhbDEpXFxcIj57e2NhbDEuZGF0ZS5mb3JtYXQoXFxcIk1NTU1cXFwiKX19PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4teWVhciAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5ZZWFyLCBjYWwxKVxcXCI+e3tjYWwxLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJwdWxsLXJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4tbW9udGggY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5Nb250aCwgY2FsMilcXFwiPnt7Y2FsMi5kYXRlLmZvcm1hdChcXFwiTU1NTVxcXCIpfX08L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJjdC1kcC1idG4teWVhciAgY3QtZHAtYnRuXFxcIiAoY2xpY2spPVxcXCJjaGFuZ2VNb2RlKENhbGVuZGFyTW9kZS5ZZWFyLCBjYWwyKVxcXCI+e3tjYWwyLmRhdGUuZm9ybWF0KFxcXCJZWVlZXFxcIil9fTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHRhYmluZGV4PVxcXCItMVxcXCIgY2xhc3M9XFxcImN0LWRwLWJ0bi1uZXh0ICBjdC1kcC1idG5cXFwiIChjbGljayk9XFxcImdvTmV4dCgpXFxcIiBbZGlzYWJsZWRdPVxcXCJ0aGlzLmNhbDEubW9kZSA9PSBDYWxlbmRhck1vZGUuTW9udGggfHwgdGhpcy5jYWwyLm1vZGUgPT0gQ2FsZW5kYXJNb2RlLk1vbnRoXFxcIj4mZ3Q7PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8Y3QtY2FsZW5kYXIgI2NhbDE+PC9jdC1jYWxlbmRhcj5cXHJcXG4gICAgICAgIDxjdC1jYWxlbmRhciAjY2FsMj48L2N0LWNhbGVuZGFyPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kdWFscGlja2VyL2R1YWxwaWNrZXIuY29tcG9uZW50Lmh0bWxcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=